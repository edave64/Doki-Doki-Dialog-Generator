{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/environments/envState.ts","webpack:///./src/environments/browser.ts","webpack:///./src/environments/edge.ts","webpack:///./src/environments/electron.ts","webpack:///./src/environments/environment.ts","webpack:///./src/components/toolbox/subpanels/color/color.vue?06e6","webpack:///./src/eventbus/event-bus.ts","webpack:///./src/components/toolbox/panels/character/partButton.vue?38da","webpack:///./src/components/toolbox/panels/content-pack.vue?3bcc","webpack:///./src/renderables/character.ts","webpack:///./src/components/toolbox/panels/credits.vue?40ed","webpack:///./src/components/toolbox/drop-target.vue?b183","webpack:///./src/components/toolbox/panels/notification.vue?9208","webpack:///./src/components/toolbox/panels/character.vue?eccb","webpack:///./src/components/toolbox/toolbox.vue?ff03","webpack:///./src/components/toolbox/panels/panels.vue?91f5","webpack:///./src/components/toolbox/panels/character/parts.vue?ef3b","webpack:///./src/asset-manager.ts","webpack:///./src/App.vue?f446","webpack:///./src/util/exhaust.ts","webpack:///./src/components/toggle.vue?8dcd","webpack:///./src/renderer/rendererContext.ts","webpack:///./src/components/toolbox/panels/textbox.vue?d941","webpack:///./src/renderer/renderAbortedException.ts","webpack:///./src/components/toolbox/panels/sprite.vue?6258","webpack:///./src/components/toolbox/panels/settings.vue?2361","webpack:///./src/components/toolbox/panels/poem.vue?0d36","webpack:///./src/components/toolbox/commonsFieldsets/layers.vue?6d52","webpack:///./src/components/toolbox/panels/background/settings.vue?9308","webpack:///./src/components/toolbox/subpanels/color/slider.vue?5ba1","webpack:///./src/components/toolbox/panels/add.vue?3550","webpack:///./src/models/error-asset.ts","webpack:///./src/components/toolbox/commonsFieldsets/positionAndSize.vue?7c6a","webpack:///./src/components/vertical-scroll-redirect.ts","webpack:///./src/components/toolbox/panels/background/button.vue?6167","webpack:///./src/store/objectTypes/characters.ts","webpack:///./src/components/toggle.vue?1e61","webpack:///./src/components/toggle.vue?c831","webpack:///./src/components/toggle.vue?111d","webpack:///./src/components/toggle.vue","webpack:///./src/models/seekers.ts","webpack:///./src/plugins/vuex-history.js","webpack:///./src/App.vue?1c2d","webpack:///./src/components/toolbox/toolbox.vue?fa08","webpack:///./src/components/toolbox/panels/settings.vue?c1bb","webpack:///./src/components/toolbox/panels/panelMixin.ts","webpack:///./src/components/toolbox/panels/settings.vue?c9e2","webpack:///./src/components/toolbox/panels/settings.vue?b55b","webpack:///./src/components/toolbox/panels/settings.vue","webpack:///./src/components/toolbox/panels/add.vue?5840","webpack:///./src/components/toolbox/panels/add.vue?d112","webpack:///./src/components/toolbox/panels/add.vue?6c2e","webpack:///./src/components/toolbox/panels/add.vue","webpack:///./src/components/toolbox/panels/character.vue?6b05","webpack:///./src/components/toolbox/commonsFieldsets/positionAndSize.vue?f01a","webpack:///./src/components/toolbox/commonsFieldsets/positionAndSize.vue?8e58","webpack:///./src/components/toolbox/commonsFieldsets/positionAndSize.vue?de84","webpack:///./src/components/toolbox/commonsFieldsets/positionAndSize.vue","webpack:///./src/components/toolbox/commonsFieldsets/layers.vue?afd6","webpack:///./src/components/toolbox/commonsFieldsets/layers.vue?dcb7","webpack:///./src/components/toolbox/commonsFieldsets/layers.vue?a903","webpack:///./src/components/toolbox/commonsFieldsets/layers.vue","webpack:///./src/components/toolbox/commonsFieldsets/opacity.vue?4c22","webpack:///./src/components/toolbox/commonsFieldsets/opacity.vue?e6e1","webpack:///./src/components/toolbox/commonsFieldsets/opacity.vue?4d33","webpack:///./src/components/toolbox/commonsFieldsets/opacity.vue","webpack:///./src/components/toolbox/commonsFieldsets/delete.vue?d8ed","webpack:///./src/components/toolbox/commonsFieldsets/delete.vue?c3eb","webpack:///./src/components/toolbox/commonsFieldsets/delete.vue?4121","webpack:///./src/components/toolbox/commonsFieldsets/delete.vue","webpack:///./src/components/toolbox/panels/character/parts.vue?2b60","webpack:///./src/components/toolbox/panels/character/partButton.vue?f27a","webpack:///./src/components/toolbox/panels/character/partButton.vue?9154","webpack:///./src/components/toolbox/panels/character/partButton.vue?b061","webpack:///./src/components/toolbox/panels/character/partButton.vue","webpack:///./src/components/toolbox/panels/character/parts.vue?9c59","webpack:///./src/components/toolbox/panels/character/parts.vue?25dd","webpack:///./src/components/toolbox/panels/character/parts.vue","webpack:///./src/components/toolbox/panels/character.vue?081c","webpack:///./src/components/toolbox/panels/character.vue?283a","webpack:///./src/components/toolbox/panels/character.vue","webpack:///./src/components/toolbox/panels/sprite.vue?1828","webpack:///./src/components/toolbox/panels/sprite.vue?dbdb","webpack:///./src/components/toolbox/panels/sprite.vue?bfdb","webpack:///./src/components/toolbox/panels/sprite.vue","webpack:///./src/components/toolbox/panels/textbox.vue?5116","webpack:///./src/components/toolbox/subpanels/color/color.vue?1c77","webpack:///./src/components/toolbox/subpanels/color/sliderGroup.vue?2936","webpack:///./src/util/colors/hsl.ts","webpack:///./src/util/colors/rgb.ts","webpack:///./src/components/toolbox/subpanels/color/slider.vue?105a","webpack:///./src/components/toolbox/subpanels/color/slider.vue?cd13","webpack:///./src/components/toolbox/subpanels/color/slider.vue?f916","webpack:///./src/components/toolbox/subpanels/color/slider.vue","webpack:///./src/components/toolbox/subpanels/color/sliderGroup.vue?67c8","webpack:///./src/components/toolbox/subpanels/color/sliderGroup.vue?c067","webpack:///./src/components/toolbox/subpanels/color/sliderGroup.vue","webpack:///./src/components/toolbox/subpanels/color/color.vue?0222","webpack:///./src/components/toolbox/subpanels/color/color.vue?827a","webpack:///./src/components/toolbox/subpanels/color/color.vue","webpack:///./src/components/toolbox/subpanels/text/text.vue?28d0","webpack:///./src/renderer/textRenderer/string-walker.ts","webpack:///./src/renderer/textRenderer/tokenizer.ts","webpack:///./src/renderer/textRenderer/textCommands.ts","webpack:///./src/renderer/textRenderer/textRenderer.ts","webpack:///./src/constants/textBox.ts","webpack:///./src/components/toolbox/subpanels/text/text.vue?ba8f","webpack:///./src/components/toolbox/subpanels/text/text.vue?c42a","webpack:///./src/components/toolbox/subpanels/text/text.vue","webpack:///./src/components/toolbox/panels/textbox.vue?ca5f","webpack:///./src/components/toolbox/panels/textbox.vue?500e","webpack:///./src/components/toolbox/panels/textbox.vue","webpack:///./src/components/toolbox/panels/choice.vue?7f25","webpack:///./src/components/toolbox/panels/choice.vue?16b2","webpack:///./src/components/toolbox/panels/choice.vue?d2f6","webpack:///./src/components/toolbox/panels/choice.vue","webpack:///./src/components/toolbox/panels/credits.vue?e2a2","webpack:///./src/components/toolbox/panels/credits.vue?05b9","webpack:///./src/components/toolbox/panels/credits.vue?3709","webpack:///./src/components/toolbox/panels/credits.vue","webpack:///./src/components/toolbox/panels/backgrounds.vue?f6a3","webpack:///./src/components/toolbox/panels/background/button.vue?c392","webpack:///./src/components/toolbox/panels/background/button.vue?92ee","webpack:///./src/components/toolbox/panels/background/button.vue?9649","webpack:///./src/components/toolbox/panels/background/button.vue","webpack:///./src/components/toolbox/panels/background/settings.vue?f30e","webpack:///./src/components/toolbox/panels/background/settings.vue?93fe","webpack:///./src/components/toolbox/panels/background/settings.vue?50a9","webpack:///./src/components/toolbox/panels/background/settings.vue","webpack:///./src/components/toolbox/panels/backgrounds.vue?9ca2","webpack:///./src/components/toolbox/panels/backgrounds.vue?18da","webpack:///./src/components/toolbox/panels/backgrounds.vue","webpack:///./src/components/toolbox/panels/content-pack.vue?a8cb","webpack:///./src/components/toolbox/panels/content-pack.vue?566c","webpack:///./src/store/panels.ts","webpack:///./src/components/toolbox/panels/content-pack.vue?7468","webpack:///./src/components/toolbox/panels/content-pack.vue","webpack:///./src/components/toolbox/panels/panels.vue?8766","webpack:///./src/renderables/background.ts","webpack:///./src/renderables/sprite.ts","webpack:///./src/renderer/pathTools.ts","webpack:///./src/constants/textBoxCustom.ts","webpack:///./src/renderables/textbox.ts","webpack:///./src/constants/choices.ts","webpack:///./src/renderables/choices.ts","webpack:///./src/constants/notification.ts","webpack:///./src/renderables/notification.ts","webpack:///./src/constants/poem.ts","webpack:///./src/renderables/poem.ts","webpack:///./src/renderables/scene-renderer.ts","webpack:///./src/components/toolbox/panels/panels.vue?f669","webpack:///./src/components/toolbox/panels/panels.vue?8e69","webpack:///./src/components/toolbox/panels/panels.vue","webpack:///./src/components/toolbox/panels/notification.vue?7ab6","webpack:///./src/components/toolbox/panels/notification.vue?9d27","webpack:///./src/components/toolbox/panels/notification.vue?824d","webpack:///./src/components/toolbox/panels/notification.vue","webpack:///./src/components/toolbox/panels/poem.vue?06ea","webpack:///./src/components/toolbox/panels/poem.vue?edd8","webpack:///./src/components/toolbox/panels/poem.vue?670f","webpack:///./src/components/toolbox/panels/poem.vue","webpack:///./src/components/toolbox/toolbox.vue?5a64","webpack:///./src/components/toolbox/toolbox.vue?983b","webpack:///./src/components/toolbox/toolbox.vue","webpack:///./src/components/message-console.vue?95ac","webpack:///./src/components/message-console.vue?092b","webpack:///./src/components/message-console.vue?1d97","webpack:///./src/components/message-console.vue","webpack:///./src/components/render.vue?7648","webpack:///./src/components/render.vue?7cec","webpack:///./src/components/render.vue?4d80","webpack:///./src/components/render.vue","webpack:///./src/components/ModalDialog.vue?f657","webpack:///./src/components/ModalDialog.vue?49e8","webpack:///./src/components/ModalDialog.vue?14cb","webpack:///./src/components/ModalDialog.vue","webpack:///./src/App.vue?ec60","webpack:///./src/App.vue?640d","webpack:///./src/App.vue","webpack:///./src/store/objectTypes/sprite.ts","webpack:///./src/store/objectTypes/choices.ts","webpack:///./src/store/objectTypes/textbox.ts","webpack:///./src/store/objectTypes/notification.ts","webpack:///./src/store/objectTypes/poem.ts","webpack:///./src/store/objects.ts","webpack:///./src/store/ui.ts","webpack:///./src/store/content/merge.ts","webpack:///./src/store/content/index.ts","webpack:///./src/store/index.ts","webpack:///./src/store/objectTypes/sprite_history_properties.ts","webpack:///./src/store/objects_history_properties.ts","webpack:///./src/main.ts","webpack:///./src/components/toolbox/panels/choice.vue?85aa","webpack:///./src/components/toolbox/commonsFieldsets/opacity.vue?df0d","webpack:///./src/components/toolbox/drop-target.vue?6282","webpack:///./src/components/toolbox/drop-target.vue?7454","webpack:///./src/components/toolbox/drop-target.vue?6822","webpack:///./src/components/toolbox/drop-target.vue","webpack:///./src/components/toolbox/panels/backgrounds.vue?46a8","webpack:///./src/components/ModalDialog.vue?4fd6","webpack:///./src/components/toolbox/subpanels/text/text.vue?9158","webpack:///./src/components/message-console.vue?2057","webpack:///./src/components/toolbox/subpanels/color/sliderGroup.vue?f3e3","webpack:///./src/renderer/renderer.ts","webpack:///./src/constants/base.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","installedCssChunks","jsonpScriptSrc","p","exports","module","l","e","promises","cssChunks","Promise","resolve","reject","href","fullhref","existingLinkTags","document","getElementsByTagName","tag","dataHref","getAttribute","rel","existingStyleTags","linkTag","createElement","type","onload","onerror","event","request","target","src","err","Error","code","parentNode","removeChild","head","appendChild","then","installedChunkData","promise","onScriptComplete","script","charset","timeout","nc","setAttribute","error","clearTimeout","chunk","errorType","realSrc","message","name","undefined","setTimeout","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","console","jsonpArray","window","oldJsonpFunction","slice","tempInstalled","tempUninstalled","active","inactive","allowLQ","isLocalRepoSupported","isAutoLoadingSupported","isBackgroundInstallingSupported","vueState","localRepositoryUrl","downloadCanvas","filename","format","quality","a","this","createObjectURL","url","body","click","background","id","defaultValue","prompt","handler","canvas","toBlob","URL","blob","toDataURL","dataURItoBlob","dataURI","binStr","atob","split","len","arr","Uint8Array","charCodeAt","Blob","navigator","msSaveBlob","installedBackgroundsPack","packId","dependencies","packCredits","characters","fonts","sprites","poemStyles","poemBackgrounds","backgrounds","colors","electron","promptCache","lastPrompt","vuexHistory","$store","bgInvalidation","pendingContentPacks","ipcRenderer","on","filePath","transaction","dispatch","filepath","parts","variants","label","invalidateInstalledBGs","fire","send","log","arrayBuffer","buffer","assets","sourcePack","hq","asset","HTMLImageElement","fetch","img","array","startsWith","newUrl","panel","store","requestAnimationFrame","updateInstalledBGs","cancelAnimationFrame","contentPack","chooseEnv","isElectron","msSaveOrOpenBlob","envX","toast","eventBus","fireCommand","command","$emit","subscribeCommand","$on","kind","subscribe","eventType","unsubscribe","$off","AssetFailureEvent","path","CustomAssetFailureEvent","InvalidateRenderEvent","ShowMessageEvent","VueErrorEvent","info","Character","obj","styleData","lastBase","components","lq","localRenderer","lastVersion","hitDetectionFallback","pose","size","render","rx","currentHeads","drawAssetsUnloaded","renderCommands","renderCommand","offset","composite","posePositions","images","posePosition","positions","part","partAssets","JSON","stringify","filter","drawAsset","map","loadAssets","loadedDraws","loadedDraw","drawImage","image","x","y","version","selected","updateLocalCanvas","w","width","h","height","flip","shadow","preview","blur","color","opacity","hx","hy","scaledX","scaledY","flippedX","scaleX","scaleY","getDataAt","Math","round","DOMException","includes","x0","x1","y0","y1","zoom","close","unloaded","webpSupportPromise","heifSupportPromise","isWebPSupported","losslessCode","addEventListener","isHeifSupported","assetCache","customAssets","getAAsset","getAssetByUrl","Image","crossOrigin","style","display","baseUrl","getAsset","replace","registerAsset","file","registerAssetWithURL","exhaust","opacityFactor","RenderContext","fsCtx","aborted","params","save","font","align","text","lineJoin","textAlign","outline","strokeStyle","lineWidth","strokeText","fill","fillStyle","fillText","restore","ret","measureText","globalAlpha","shadowColor","shadowBlur","offsetX","shadowOffsetX","offsetY","shadowOffsetY","translate","scale","globalCompositeOperation","paintOnto","composition","beginPath","rect","stroke","repetition","previewCanvas","createPattern","transform","createLinearGradient","RenderAbortedException","ErrorAsset","firefoxDeltaFactor","VerticalScrollRedirect","currentTarget","scrollHeight","clientHeight","stopImmediatePropagation","parentElement","ev","deltaY","mozInputSource","scrollLeft","CloseUpYOffset","BaseCharacterYPos","characterMutations","setPose","state","objects","poseId","setCharStyleGroup","styleGroupId","setCharStyle","styleId","setPosePosition","setClose","setFreeMove","freeMove","closestCharacterSlot","getData","getters","characterType","getDataG","rootGetters","getPose","styleGroups","styles","poses","getParts","positionKeys","keys","positionKey","compatibleHeads","unshift","getHeads","headTypeId","headType","heads","pos","sorted","idx","abs","sort","b","lastSpriteId","characterActions","createCharacters","rootState","commit","panelId","panels","currentPanel","onTop","preserveRatio","ratio","seekPart","delta","seekPose","mutatePoseAndPositions","change","seekStyle","linearStyles","flatMap","styleGroup","styleGroupIdx","styleIdx","styleGroupJson","styleA","styleB","localeCompare","linearIdx","findIndex","nextIdx","seekHead","headKey","setPart","val","setCharacterPosition","shiftCharacterSlot","currentSlotNr","newSlotNr","fixContentPackRemovalFromCharacter","context","oldPack","oldCharData","find","char","poseAndPositionChange","buildPoseAndPositionData","oldStyleGroup","oldStyle","oldPose","newCharData","content","current","chr","newStyleGroupIdx","newStyleGroup","styleProperies","newStyleIdx","newStyle","newPoseIdx","newPose","newPosePositions","newPosition","oldPositionIdx","oldHeadGroup","newHeadGroupIdx","indexOf","oldHead","newHeadIdx","variant","commitPoseAndPositionChanges","character","poseAndPosition","callback","oldHeadCollection","newHeadCollectionNr","_vm","_h","$createElement","_c","_self","ref","attrs","_uid","domProps","onChange","staticClass","_v","_s","staticRenderFns","$refs","checkbox","checked","String","Boolean","default","component","arraySeeker","install","Vue","options","_installedPlugins","plugin","Store","resetStateMutation","mutations","history","done","undone","newMutation","ignoreMutations","currentTransaction","transactionQueue","initialized","created","historyStuff","methods","initialize","mutation","exec","getMutationProperties","ignore","redo","pop","replayTransaction","undo","replayAll","lastUndo","combinable","combination","combinator","vm","oldTransactions","forEach","replayMutation","payload","baseObj","Array","assign","mixin","computed","mutationProperiesCache","mutationProperties","oldMutation","currentWildcard","canvasWidth","canvasHeight","drawLastDownload","$event","download","showDialog","showExpressionDialog","dialogVisable","_e","expressionBuilderVisible","expressionBuilderCharacter","expressionBuilderHeadGroup","class","vertical","setPanel","hasPrevRender","model","$$v","lqRendering","expression","nsfw","updateVertical","$el","verticalScrollRedirect","passive","classList","add","remove","namespace","nsfwPacks","names","Set","values","ui","environment","contentPacks","pack","has","packs","Toggle","showDropTarget","hideDropTarget","addCustomSpriteFile","group","_l","onChosen","toLowerCase","assetPath","sprite","assetSpriteBackground","addSpriteToScene","spriteUpload","onSpriteFileUpload","uploadFromURL","addTextBox","addPoem","addDialog","addChoice","addConsole","uploadedSpritesPack","customAssetCount","join","chibi","dataTransfer","effectAllowed","from","items","item","match","spriteDt","show","hide","uploadInput","files","lastSegment","addNewCustomSprite","processed","DropTarget","panelForParts","hasMultiplePoses","captialize","closeUp","allowSize","allowStepMove","isFirstPos","directives","rawName","modifiers","$$selectedVal","_value","_n","multiple","isLastPos","_m","stopPropagation","composing","$forceUpdate","required","shiftLayer","Infinity","setInFront","newValue","onClick","partList","charData","index","choose","styleComponent","button","choose_component","spriteSize","lookups","loaded","floor","lookup","backgroundImage","backgroundPosition","backgroundSize","Number","stylePriorities","baseStyle","updateStyleData","concat","previewSize","previewOffset","selection","priority","subSelect","updatePose","parseInt","headTypeIdx","headIdx","prioIdx","stylePriority","styleComponents","buttons","collection","currentPose","headKeyIdx","headImages","currentStyle","poseIdx","generatePosePreview","partIdx","partImage","PartButton","str","charAt","toUpperCase","substring","PositionAndSize","Layers","Opacity","Delete","Parts","colorSelect","colorName","textEditor","textEditorName","textEditorText","textBoxStyle","talkingDefaults","talkingOther","autoQuoting","autoWrap","dialog","textbox","resetPosition","splitTextbox","showControls","allowSkipping","showContinueArrow","customColor","staticStyle","customNameboxWidth","deriveCustomColors","customControlsColor","customNameboxColor","customNameboxStroke","title","updateHex","addSwatch","swatch","backgroundColor","label1","maxValue1","stops1","v1","label2","maxValue2","stops2","v2","label3","maxValue3","stops3","v3","stopsAlpha","deltas","HSLAColor","g","q","hue2rgb","toString","padStart","max","min","sqrt","pow","validCssRgb","validHex","fromCssRgb","fromHex","rgbEx","test","rgbaEx","rgbHead","parentesisPos","rbgTail","elements","parseFloat","trim","RGBAColor","hexShortEx","hexLongEx","hexTail","slider","enterSlide","moveSlide","exitSlide","gradientStops","pointerPath","maxValue","sliderLength","sliderOffset","slideActive","svg","contains","MouseEvent","which","bounding","getBoundingClientRect","clientX","touches","preventDefault","lastRGBEmit","initValues","newColor","rgbColor","toRgb","toHex","hslColor","toHSL","gen","stops","relative","eightsStops","stop","toCss","validator","Slider","generatedPackId","hex","swatches","existingPack","newPack","SliderGroup","applyColor","selectedColor","onValueChanged","insertText","insertCommand","selectedFont","selectColor","aroundContextSize","tokenize","tokens","stringWalker","currentTokenState","tokenStateNormal","tokenStateEnd","contents","walker","tokenStateCommand","tokenStateNewLine","tokenText","nextState","textContent","escape","next","msg","around","closing","commandName","argument","argumentsState","Map","paramlessOp","isItalic","isBold","isUnderlined","isStrikethrough","fontName","strokeColor","strokeWidth","letterSpacing","relativeNumberOp","parameter","fontSize","alpha","op","num","isNaN","rebuildParts","renderParts","getRenderParts","neededToLoad","doc","fontString","check","load","ctx","applyTextStyleToCanvas","State","lastChar","None","ExplictQuote","Star","measureWidth","ImplictQuote","lastPart","alignment","xStart","xEnd","yStart","maxLineWidth","currentLine","fixLine","applyLineWrapping","lineHeights","lineHeight","line","lastItem","lastItemInLine","styleStack","tagStack","currentStyleHeight","measureHeight","currentTag","token","TextRenderer","textCommands","lastBreakPoint","currentLineWidth","lastBreakLineWidth","newParts","tmpContext","getContext","lastStyle","textStyle","heightCache","lineSpacing","innerHTML","fontFamily","div","position","top","left","offsetHeight","set","TextBoxWidth","TextBoxCorruptedWidth","TextBoxHeight","TextBoxY","TextBoxTextXOffset","TextBoxTextYOffset","NameboxHeight","NameboxWidth","NameboxXOffset","NameboxTextYOffset","ControlsYBottomOffset","ControlsXHistoryOffset","ControlsXSkipOffset","ControlsXStuffOffset","ArrowXRightOffset","ArrowYBottomOffset","GlowRX","GlowRY","BaseTextStyle","NameboxTextStyle","ControlsTextStyle","ControlsTextDisabledStyle","NameboxY","colorSelector","rememberedStart","rememberedEnd","textArea","el","selectionStart","selectionEnd","$nextTick","selStart","selEnd","focus","arg","selectedText","before","after","commandOpen","Color","talkingDefault","controls","skip","continue","TextEditor","button_text","btnIdx","currentIdx","select","removeChoice","choiceIdx","choices","dragEnter","dt","addImageFile","bgColor","upload","onFileUpload","addByUrl","setBackground","isActive","backgroundId","bgData","urls","flipped","seekVariant","scaling","currentBackgroundId","uploadedBackgroundsPack","addNewCustomBackground","BackgroundButton","BackgroundSettings","addNew","credits","activate","deactivate","uninstall","restart","selectedPack","needRestart","location","reload","localRepoAdd","queuedUninstall","installed","localRepoRemove","autoLoadAdd","autoLoadRemove","freshInstall","ScalingModes","panel_button","updateCurrentPanel","addNewPanel","canDeletePanel","deletePanel","canMoveAhead","moveAhead","canMoveBehind","moveBehind","ppi","pages","estimateExportSize","transparentId","lastPanelNum","previewManager","panelToUrl","urlToPanel","register","unregister","delete","revokeObjectURL","namespaced","panelOrder","setCurrentPanel","setPanelPreview","lastRender","createPanel","setPanelOrder","setCurrentBackground","setBackgroundColor","setBackgroundFlipped","setBackgroundVariant","setBackgroundScaling","actions","duplicatePanel","parse","sourcePanelId","targetPanelId","root","oldIdx","seekBackgroundVariant","newOrderIdx","orderIdx","fixContentPackRemoval","oldContent","oldBackground","newBackground","oldVariantJSON","newVariantIdx","move","newIdx","Stretch","Cover","screenRatio","updatedContent","drawRect","hitTest","getHitbox","lockedRatio","hitX","hitY","roundedRectangle","moveTo","arcTo","closePath","roundedTopRectangle","lineTo","nameboxTextOutlineDelta","nameboxBackgroundDelta","nameboxGradientMiddleStopPosition","nameboxGradientEndDelta","nameboxRounding","textboxRounding","textboxRoundingBuffer","controlColorDelta","controlDisableColorDelta","dotColorDelta","dotRadius","dotPatternSize","textboxOutlineColorDelta","lastX","lastY","lastH","lastW","w2","x2","y2","renderBackdrop","renderNamebox","renderText","bottom","controlsY","controlsCenter","drawText","controlsStyle","controlsDisableStyle","nameboxOutlineColor","customTransform","clip","subRx","gradient","linearGradient","baseBG","fromCss","nameboxBackgroundColor","targetColor","addColorStop","loadFonts","fixAlignment","dotPattern","dotRx","drawDot","dotX","dotY","drawPath","ellipse","PI","subSubRx","pattern","patternFrom","glowGradient","outlineColor","baseX","baseY","quote","base","controlColor","col","disColor","ChoiceButtonColor","ChoiceButtonBorderColor","ChoiceButtonWidth","ChoiceSpacing","ChoiceYOffset","ChoicePadding","ChoiceY","ChoiceTextStyle","choiceRenderers","h2","updateChoiceBounds","choiceRenderer","getHeight","choice","reduce","acc","renderer","choiceDistance","NotificationBackdropColor","NotificationPadding","NotificationSpacing","NotificationOkTextStyle","NotificationTextStyle","backdrop","textRenderer","buttonRenderer","lineWrap","textWidth","getWidth","textHeight","buttonWidth","buttonHeight","defaultPoemBackground","defaultPoemStyle","defaultX","defaultY","poemTopPadding","poemPadding","defaultPoemWidth","defaultPoemHeight","consoleBackgroundColor","consoleWidth","consoleHeight","defaultConsoleBackground","defaultConsoleStyle","BasePoemStyle","poemTextStyles","consolePadding","consoleTopPadding","consoleLineWrapPadding","poemTopMargin","paper","padding","topPadding","lineWrapPadding","renderObjectCache","lCurrentlyRendering","renderCallback","date","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getRenderObjects","renderObject","getBackgroundRenderer","objectsState","order","onTopOrder","toUncache","estimateFactor","thumbnailFactor","thumbnailQuality","qualityFactor","defaultQuality","qualityWarningThreshold","webpSupport","heifSupport","panelsTool","moveFocusToActivePanel","sceneRenderer","targetCanvas","distribution","getPanelDistibution","prefix","extension","renderObjects","imageIdx","saveToFile","sizes","readableSizes","toFixed","filePluralize","itPluralize","sizePluralize","oldQuality","mapper","panelIdx","listedPages","foundMatch","trimmedPart","to","ary","pageIdx","getLimitedPanelList","imageI","sliceStart","sliceEnd","querySelector","scrollIntoView","ele","parent","children","scroll","scrollTop","clientWidth","panelButtons","objectOrders","txtBox","objId","extractObjectText","subType","poemBackground","poemStyle","panelSelection","onPanelChange","newSelection","lastDownload","SettingsPanel","AddPanel","BackgroundsPanel","CreditsPanel","CharacterPanel","TextBoxPanel","ChoicePanel","SpritePanel","ContentPacksPanel","PanelsPanel","NotificationPanel","PoemPanel","shortHidingTime","longHidingTime","hideShowTimeouts","messages","showLoading","showLoadingTimeout","hideLoadingTimeout","onLoadingChange","loading","stack","bitmapHeight","bitmapWidth","onUiClick","onTouchStart","onDragStart","onSpriteDragMove","onSpriteDrop","onDragOver","onDrop","onMouseEnter","currentlyRendering","queuedRender","showingLast","dropSpriteCount","dropPreventClick","draggedObject","dragXOffset","dragYOffset","dragXOriginal","dragYOriginal","imageUrl","sceneRender","oldUrl","render_","unsafe","invalidateRender","mut","sd","sdCtx","renderLoadingScreen","loadingScreen","rctx","offsetLeft","ry","offsetTop","sx","offsetWidth","sy","selectedObject","toRendererCoordinate","clientY","objectsAt","currentObjectIdx","dropEffect","deltaX","shiftKey","getAsFile","TouchEvent","_t","aspectRatio","arrowMoveStepSize","packDialogWaitMs","blendOver","uiSize","last","updateArea","removeEventListener","onKeydown","sw","sh","rh","rw","opth","optimum","optv","optimizeWithMenu","documentElement","cw","ch","v","search","wait","packDialog","setSearch","headGroup","ctrlKey","ToolBox","MessageConsole","Render","ModalDialog","SingleBox","ExpressionBuilder","spriteMutations","spriteActions","createSprite","choiceMutations","setChoices","setChoiceColor","setChoiceDistance","setAutoWrapping","lastChoiceId","choiceActions","createChoice","removeChoise","setChoiceText","splitTextboxSpacing","textBoxMutations","setText","setTalkingDefault","setTalkingOther","setStyle","setControlsVisible","setControlsColor","setDeriveCustomColors","setNameboxColor","setNameboxStroke","setNameboxWidth","setSkipable","setContinueArrow","setCustomColor","setAutoQuoting","setResetBounds","resetBounds","lastTextBoxId","textBoxActions","createTextBox","resetTextboxBounds","newWidth","notificationMutations","setNotificationColor","setNotificationText","setNotificationBackdrop","lastNotificationId","notificationActions","createNotification","poemMutations","setPoemBackground","setPoemFont","setPoemText","lastPoemId","poemActions","createPoem","createConsole","lastCopyId","removeFromList","addToList","setOnTop","setPosition","setFlip","setOpacity","setSize","setRatio","removeObject","setPreserveRatio","setWidth","setHeight","copyObjects","sourceOrders","oldObject","deleteAllOfPanel","setVertical","setNsfw","setLqRendering","setSelection","setLastDownload","mergeContentPacks","mergeBackgrounds","mergeCharacters","mergeArrayUnique","mergeIdArrays","xObj","yObj","mergeBackground","mergeCharacter","mergeHeadCollections","xStyleGroup","yStyleGroup","xClasses","yClasses","mergeStyleClasses","xStyle","yStyle","mergePose","classKey","headGroupKey","getId","merge","definedIds","yId","existingIdx","existing","baseDir","baseTypes","setContentPacks","setCurrentContent","convertContentPack","convertedPack","removeContentPacks","packIds","newContentPacks","replaceContentPack","action","packIdx","loadContentPacks","response","ok","statusText","json","paths","convertV1","getCharacters","getBackgrounds","types","replacementMap","use","setUnsafe","removePacks","oldState","oldMut","newMut","config","productionTip","$mount","visible","drop","Renderer","runningContext","abort","clearRect","getImageData","screenWidth","screenHeight","characterPositions"],"mappings":"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","file":"js/app.a878d128.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded CSS chunks\n \tvar installedCssChunks = {\n \t\t\"app\": 0\n \t}\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"js/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-238a1a62\":\"5faeae3c\",\"chunk-bae73642\":\"be3e161c\"}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// mini-css-extract-plugin CSS loading\n \t\tvar cssChunks = {\"chunk-238a1a62\":1,\"chunk-bae73642\":1};\n \t\tif(installedCssChunks[chunkId]) promises.push(installedCssChunks[chunkId]);\n \t\telse if(installedCssChunks[chunkId] !== 0 && cssChunks[chunkId]) {\n \t\t\tpromises.push(installedCssChunks[chunkId] = new Promise(function(resolve, reject) {\n \t\t\t\tvar href = \"css/\" + ({}[chunkId]||chunkId) + \".\" + {\"chunk-238a1a62\":\"af8f0ea5\",\"chunk-bae73642\":\"0056a68f\"}[chunkId] + \".css\";\n \t\t\t\tvar fullhref = __webpack_require__.p + href;\n \t\t\t\tvar existingLinkTags = document.getElementsByTagName(\"link\");\n \t\t\t\tfor(var i = 0; i < existingLinkTags.length; i++) {\n \t\t\t\t\tvar tag = existingLinkTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\") || tag.getAttribute(\"href\");\n \t\t\t\t\tif(tag.rel === \"stylesheet\" && (dataHref === href || dataHref === fullhref)) return resolve();\n \t\t\t\t}\n \t\t\t\tvar existingStyleTags = document.getElementsByTagName(\"style\");\n \t\t\t\tfor(var i = 0; i < existingStyleTags.length; i++) {\n \t\t\t\t\tvar tag = existingStyleTags[i];\n \t\t\t\t\tvar dataHref = tag.getAttribute(\"data-href\");\n \t\t\t\t\tif(dataHref === href || dataHref === fullhref) return resolve();\n \t\t\t\t}\n \t\t\t\tvar linkTag = document.createElement(\"link\");\n \t\t\t\tlinkTag.rel = \"stylesheet\";\n \t\t\t\tlinkTag.type = \"text/css\";\n \t\t\t\tlinkTag.onload = resolve;\n \t\t\t\tlinkTag.onerror = function(event) {\n \t\t\t\t\tvar request = event && event.target && event.target.src || fullhref;\n \t\t\t\t\tvar err = new Error(\"Loading CSS chunk \" + chunkId + \" failed.\\n(\" + request + \")\");\n \t\t\t\t\terr.code = \"CSS_CHUNK_LOAD_FAILED\";\n \t\t\t\t\terr.request = request;\n \t\t\t\t\tdelete installedCssChunks[chunkId]\n \t\t\t\t\tlinkTag.parentNode.removeChild(linkTag)\n \t\t\t\t\treject(err);\n \t\t\t\t};\n \t\t\t\tlinkTag.href = fullhref;\n\n \t\t\t\tvar head = document.getElementsByTagName(\"head\")[0];\n \t\t\t\thead.appendChild(linkTag);\n \t\t\t}).then(function() {\n \t\t\t\tinstalledCssChunks[chunkId] = 0;\n \t\t\t}));\n \t\t}\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import { Component, Vue } from 'vue-property-decorator';\n\n@Component({})\nexport class EnvState extends Vue {\n\tpublic tempInstalled: string[] = [];\n\tpublic tempUninstalled: string[] = [];\n\n\tpublic active: string[] = [];\n\tpublic inactive: string[] = [];\n}\n","import { IEnvironment, IPack } from './environment';\nimport { Background } from '@/renderables/background';\nimport { EnvState } from './envState';\n\nexport class Browser implements IEnvironment {\n\tpublic readonly allowLQ = true;\n\tpublic readonly isLocalRepoSupported = false;\n\tpublic readonly isAutoLoadingSupported = false;\n\tpublic readonly isBackgroundInstallingSupported = false;\n\tpublic readonly vueState = new EnvState();\n\tpublic readonly localRepositoryUrl = '';\n\n\tpublic async saveToFile(\n\t\tdownloadCanvas: HTMLCanvasElement,\n\t\tfilename: string,\n\t\tformat: string = 'image/png',\n\t\tquality: number = 1\n\t): Promise<string> {\n\t\tconst a = document.createElement('a');\n\t\ta.setAttribute('download', filename);\n\t\tconst url = await this.createObjectURL(downloadCanvas, format, quality);\n\t\ta.setAttribute('href', url);\n\t\tdocument.body.appendChild(a);\n\t\ta.click();\n\t\tdocument.body.removeChild(a);\n\t\treturn url;\n\t}\n\n\tpublic installBackground(background: Background): boolean {\n\t\tthrow new Error('This environment does not support installing backgrounds');\n\t}\n\n\tpublic uninstallBackground(background: Background): boolean {\n\t\tthrow new Error(\n\t\t\t'This environment does not support uninstalling backgrounds'\n\t\t);\n\t}\n\n\tpublic localRepoAdd(url: string): void {\n\t\tthrow new Error('This environment does not support a local repository');\n\t}\n\n\tpublic localRepoRemove(id: string): void {\n\t\tthrow new Error('This environment does not support a local repository');\n\t}\n\n\tpublic autoLoadAdd(id: string): void {\n\t\tthrow new Error('This environment does not support auto loading');\n\t}\n\n\tpublic autoLoadRemove(id: string): void {\n\t\tthrow new Error('This environment does not support auto loading');\n\t}\n\n\tpublic prompt(\n\t\tmessage: string,\n\t\tdefaultValue?: string\n\t): Promise<string | null> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tresolve(prompt(message, defaultValue));\n\t\t});\n\t}\n\n\tpublic onPanelChange(handler: (panel: string) => void): void {\n\t\treturn;\n\t}\n\n\tprotected createObjectURL(\n\t\tcanvas: HTMLCanvasElement,\n\t\tformat: string,\n\t\tquality: number\n\t): Promise<string> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (canvas.toBlob && window.URL && window.URL.createObjectURL) {\n\t\t\t\tcanvas.toBlob(\n\t\t\t\t\tblob => {\n\t\t\t\t\t\tif (!blob) {\n\t\t\t\t\t\t\treject();\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve(URL.createObjectURL(blob));\n\t\t\t\t\t},\n\t\t\t\t\tformat,\n\t\t\t\t\tquality\n\t\t\t\t);\n\t\t\t} else if (window.URL && window.URL.createObjectURL) {\n\t\t\t\tconst url = canvas.toDataURL();\n\t\t\t\tconst blob = this.dataURItoBlob(url, format);\n\t\t\t\tresolve(URL.createObjectURL(blob));\n\t\t\t} else {\n\t\t\t\tresolve(canvas.toDataURL());\n\t\t\t}\n\t\t});\n\t}\n\n\tprotected dataURItoBlob(dataURI: string, type: string) {\n\t\tconst binStr = atob(dataURI.split(',')[1]);\n\t\tconst len = binStr.length;\n\t\tconst arr = new Uint8Array(len);\n\n\t\tfor (let i = 0; i < len; i++) {\n\t\t\tarr[i] = binStr.charCodeAt(i);\n\t\t}\n\n\t\treturn new Blob([arr], { type });\n\t}\n}\n","import { Browser } from './browser';\n\nexport class Edge extends Browser {\n\tpublic async saveToFile(\n\t\tdownloadCanvas: HTMLCanvasElement,\n\t\tfilename: string,\n\t\tformat: string = 'image/png',\n\t\tquality: number = 1\n\t): Promise<string> {\n\t\tlet url = downloadCanvas.toDataURL(format, quality);\n\t\tconst blob = this.dataURItoBlob(url, format);\n\n\t\tif (window.URL && window.URL.createObjectURL) {\n\t\t\turl = URL.createObjectURL(blob);\n\t\t}\n\n\t\t// IE-specific code\n\t\twindow.navigator.msSaveBlob(blob, filename);\n\t\treturn url;\n\t}\n}\n","import { IEnvironment, IPack } from './environment';\nimport { registerAssetWithURL, getAsset } from '@/asset-manager';\nimport { Background } from '@/renderables/background';\nimport eventBus, { ShowMessageEvent } from '@/eventbus/event-bus';\nimport { EnvState } from '@/environments/envState';\nimport { ContentPack } from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport { ReplaceContentPackAction } from '@/store/content';\n\nconst packs: IPack[] = [];\n\nconst installedBackgroundsPack: ContentPack<string> = {\n\tpackId: 'dddg.buildin.installedBackgrounds',\n\tdependencies: [],\n\tpackCredits: [],\n\tcharacters: [],\n\tfonts: [],\n\tsprites: [],\n\tpoemStyles: [],\n\tpoemBackgrounds: [],\n\tbackgrounds: [],\n\tcolors: [],\n};\n\nexport class Electron implements IEnvironment {\n\tpublic readonly allowLQ = false;\n\tpublic readonly vueState = new EnvState();\n\tpublic readonly localRepositoryUrl = '/repo/repo.json';\n\tpublic readonly isBackgroundInstallingSupported = true;\n\tpublic readonly isLocalRepoSupported = true;\n\tpublic readonly isAutoLoadingSupported = true;\n\n\tprivate electron = (window as any) as IElectronWindow;\n\tprivate promptCache: {\n\t\t[promptId: number]: (resolved: string | null) => void;\n\t} = {};\n\tprivate lastPrompt: number = 0;\n\n\tprivate vuexHistory: IHistorySupport | null = null;\n\tprivate $store: Store<IRootState> | null = null;\n\tprivate bgInvalidation: number | null = null;\n\tprivate pendingContentPacks: string[] = [];\n\n\tconstructor() {\n\t\tthis.electron.ipcRenderer.on(\n\t\t\t'add-persistent-content-pack',\n\t\t\tasync (e, filePath: string) => {\n\t\t\t\tif (!this.$store || !this.vuexHistory) {\n\t\t\t\t\tthis.pendingContentPacks.push(filePath);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.vuexHistory.transaction(async () => {\n\t\t\t\t\tawait this.$store!.dispatch('content/loadContentPacks', filePath);\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t\tthis.electron.ipcRenderer.on(\n\t\t\t'add-persistent-background',\n\t\t\tasync (e, filepath: string) => {\n\t\t\t\tconst name = 'persistentBg-' + filepath;\n\t\t\t\tconst parts = filepath.split('/');\n\t\t\t\tregisterAssetWithURL(name, filepath);\n\t\t\t\tinstalledBackgroundsPack.backgrounds.push({\n\t\t\t\t\tid: name,\n\t\t\t\t\tvariants: [[name]],\n\t\t\t\t\tlabel: parts[parts.length - 1],\n\t\t\t\t});\n\t\t\t\tthis.invalidateInstalledBGs();\n\t\t\t}\n\t\t);\n\t\tthis.electron.ipcRenderer.on('push-message', async (e, message: string) => {\n\t\t\teventBus.fire(new ShowMessageEvent(message));\n\t\t});\n\t\tthis.electron.ipcRenderer.on(\n\t\t\t'prompt-answered',\n\t\t\t(e, id: number, value: string | null) => {\n\t\t\t\tthis.promptCache[id](value);\n\t\t\t}\n\t\t);\n\t\tthis.electron.ipcRenderer.on('update-ready', e => {});\n\t\tthis.electron.ipcRenderer.send('find-customs');\n\t}\n\n\tpublic localRepoAdd(url: string): void {\n\t\tconsole.log('installContentPack', url);\n\t\tthis.electron.ipcRenderer.send('install-content-pack', url);\n\t}\n\tpublic localRepoRemove(id: string): void {\n\t\tconsole.log('uninstallContentPack', id);\n\t\tthis.electron.ipcRenderer.send('uninstall-content-pack', id);\n\t}\n\tpublic autoLoadAdd(id: string): void {\n\t\tconsole.log('activateContentPack', id);\n\t\tthis.electron.ipcRenderer.send('activate-content-pack', id);\n\t}\n\tpublic autoLoadRemove(id: string): void {\n\t\tconsole.log('deactivateContentPack', id);\n\t\tthis.electron.ipcRenderer.send('deactivate-content-pack', id);\n\t}\n\n\tpublic saveToFile(\n\t\tdownloadCanvas: HTMLCanvasElement,\n\t\tfilename: string,\n\t\tformat: string = 'image/png',\n\t\tquality: number = 1\n\t): Promise<string> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tdownloadCanvas.toBlob(\n\t\t\t\tasync blob => {\n\t\t\t\t\tif (!blob) {\n\t\t\t\t\t\treject();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst buffer = await (blob as any).arrayBuffer();\n\t\t\t\t\tthis.electron.ipcRenderer.send(\n\t\t\t\t\t\t'save-file',\n\t\t\t\t\t\tfilename,\n\t\t\t\t\t\tnew Uint8Array(buffer)\n\t\t\t\t\t);\n\t\t\t\t\tresolve(URL.createObjectURL(blob));\n\t\t\t\t},\n\t\t\t\tformat,\n\t\t\t\tquality\n\t\t\t);\n\t\t});\n\t}\n\n\tpublic async installBackground(background: Background): Promise<void> {\n\t\tif (background.assets.length !== 1) return;\n\t\tif (\n\t\t\tbackground.assets[0].sourcePack !== 'dddg.buildin.uploadedBackgrounds'\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst asset = await getAsset(background.assets[0].hq, true);\n\t\tif (!(asset instanceof HTMLImageElement)) return;\n\t\tconst img = await fetch(asset.src);\n\t\tconst array = new Uint8Array(await img.arrayBuffer());\n\t\tthis.electron.ipcRenderer.send('install-background', array);\n\t}\n\n\tpublic async uninstallBackground(background: Background): Promise<void> {\n\t\tif (background.assets.length !== 1) return;\n\t\tif (\n\t\t\tbackground.assets[0].sourcePack !== 'dddg.buildin.installedBackgrounds'\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst asset = await getAsset(background.assets[0].hq, true);\n\t\tif (!(asset instanceof HTMLImageElement)) return;\n\t\tif (!asset.src.startsWith('blob:')) {\n\t\t\tconst img = await fetch(asset.src);\n\t\t\tconst blob = await img.blob();\n\t\t\tconst newUrl = URL.createObjectURL(blob);\n\t\t\tregisterAssetWithURL(background.assets[0].hq, newUrl);\n\t\t}\n\t\tthis.electron.ipcRenderer.send('uninstall-background', background.id);\n\t}\n\n\tpublic prompt(\n\t\tmessage: string,\n\t\tdefaultValue?: string\n\t): Promise<string | null> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.promptCache[++this.lastPrompt] = resolve;\n\t\t\tthis.electron.ipcRenderer.send(\n\t\t\t\t'show-prompt',\n\t\t\t\tthis.lastPrompt,\n\t\t\t\tmessage,\n\t\t\t\tdefaultValue\n\t\t\t);\n\t\t});\n\t}\n\n\tpublic onPanelChange(handler: (panel: string) => void): void {\n\t\tthis.electron.ipcRenderer.on('open-panel', (e, panel: string) => {\n\t\t\thandler(panel);\n\t\t});\n\t}\n\n\tpublic connectToStore(\n\t\tvuexHistory: IHistorySupport,\n\t\tstore: Store<IRootState>\n\t) {\n\t\tthis.vuexHistory = vuexHistory;\n\t\tthis.$store = store;\n\t\tthis.invalidateInstalledBGs();\n\n\t\tif (this.pendingContentPacks.length > 0) {\n\t\t\tthis.vuexHistory.transaction(async () => {\n\t\t\t\tawait this.$store!.dispatch(\n\t\t\t\t\t'content/loadContentPacks',\n\t\t\t\t\tthis.pendingContentPacks\n\t\t\t\t);\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate invalidateInstalledBGs() {\n\t\tif (!this.vuexHistory || !this.$store) return;\n\t\tif (this.bgInvalidation !== null) return;\n\t\tthis.bgInvalidation = requestAnimationFrame(() => {\n\t\t\tthis.updateInstalledBGs();\n\t\t});\n\t}\n\n\tprivate updateInstalledBGs() {\n\t\tif (this.bgInvalidation) {\n\t\t\tcancelAnimationFrame(this.bgInvalidation);\n\t\t\tthis.bgInvalidation = null;\n\t\t}\n\t\tif (!this.vuexHistory || !this.$store) return;\n\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store!.dispatch('content/replaceContentPack', {\n\t\t\t\tcontentPack: installedBackgroundsPack,\n\t\t\t} as ReplaceContentPackAction);\n\t\t});\n\t}\n}\n\ninterface IElectronWindow {\n\tisElectron: boolean;\n\tipcRenderer: IpcRenderer;\n}\n\ninterface IpcRenderer {\n\ton(\n\t\tchannel: string,\n\t\tlistener: (event: IpcRendererEvent, ...args: any[]) => void\n\t): void;\n\tsend(channel: string, ...args: any[]): void;\n}\n\ninterface IpcRendererEvent extends Event {\n\tsender: IpcRenderer;\n\tsenderId: number;\n}\n","import { Edge } from './edge';\nimport { Browser } from './browser';\nimport { Electron } from './electron';\nimport { Background } from '@/renderables/background';\nimport { EnvState } from './envState';\n\nexport interface IPack {\n\turl: string;\n\tid: string;\n\tcredits: string;\n\tqueuedUninstall: boolean;\n\tactive: boolean;\n}\n\nexport interface IEnvironment {\n\treadonly allowLQ: boolean;\n\treadonly isBackgroundInstallingSupported: boolean;\n\treadonly isLocalRepoSupported: boolean;\n\treadonly localRepositoryUrl: string;\n\treadonly isAutoLoadingSupported: boolean;\n\treadonly vueState: EnvState;\n\n\tsaveToFile(\n\t\tcanvas: HTMLCanvasElement,\n\t\tfilename: string,\n\t\tformat?: string,\n\t\tquality?: number\n\t): Promise<string>;\n\tinstallBackground(background: Background): void;\n\tuninstallBackground(background: Background): void;\n\tprompt(message: string, defaultValue?: string): Promise<string | null>;\n\tonPanelChange(handler: (panel: string) => void): void;\n\n\tlocalRepoAdd(url: string): void;\n\tlocalRepoRemove(id: string): void;\n\tautoLoadAdd(id: string): void;\n\tautoLoadRemove(id: string): void;\n}\n\nfunction chooseEnv(): IEnvironment {\n\tif ((window as any).isElectron) {\n\t\treturn new Electron();\n\t}\n\tif (window.navigator.msSaveOrOpenBlob !== undefined) {\n\t\treturn new Edge();\n\t}\n\treturn new Browser();\n}\n\nconst envX = chooseEnv();\n\n(window as any).toast = envX;\nexport default envX;\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./color.vue?vue&type=style&index=0&id=19212f1a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./color.vue?vue&type=style&index=0&id=19212f1a&lang=scss&scoped=true&\"","import Vue from 'vue';\nimport { ICommand } from './command';\nimport { DeepReadonly } from '@/util/readonly';\n\nconst eventBus = new Vue();\n\nexport default {\n\tfireCommand(command: ICommand) {\n\t\teventBus.$emit('command', command);\n\t},\n\tsubscribeCommand(handler: (ev: ICommand) => void): void {\n\t\teventBus.$on('command', handler);\n\t},\n\n\tfire(event: IEvent) {\n\t\teventBus.$emit(event.kind, event);\n\t},\n\n\tsubscribe<T extends IEvent>(\n\t\teventType: IEventClass<T>,\n\t\thandler: (ev: T) => void\n\t) {\n\t\teventBus.$on(eventType.kind, handler);\n\t},\n\n\tunsubscribe<T extends IEvent>(\n\t\teventType: IEventClass<T>,\n\t\thandler: (ev: T) => void\n\t) {\n\t\teventBus.$off(eventType.kind, handler);\n\t},\n};\n\ninterface IEvent {\n\tkind: string;\n}\n\ninterface IEventClass<T> {\n\tkind: string;\n\tnew (...args: any[]): T;\n}\n\n// tslint:disable: max-classes-per-file\n\nexport class AssetFailureEvent implements IEvent {\n\tpublic static readonly kind = 'AssetFailureEvent';\n\tpublic readonly kind = 'AssetFailureEvent';\n\tpublic constructor(public path: string) {}\n}\n\nexport class CustomAssetFailureEvent implements IEvent {\n\tpublic static readonly kind = 'CustomAssetFailureEvent';\n\tpublic readonly kind = 'CustomAssetFailureEvent';\n\tpublic constructor(public error: ErrorEvent) {}\n}\n\nexport class InvalidateRenderEvent implements IEvent {\n\tpublic static readonly kind = 'InvalidateRenderEvent';\n\tpublic readonly kind = 'InvalidateRenderEvent';\n}\n\nexport class ShowMessageEvent implements IEvent {\n\tpublic static readonly kind = 'ShowMessageEvent';\n\tpublic readonly kind = 'ShowMessageEvent';\n\tpublic constructor(public message: string) {}\n}\n\nexport class VueErrorEvent implements IEvent {\n\tpublic static readonly kind = 'VueErrorEvent';\n\tpublic readonly kind = 'VueErrorEvent';\n\tpublic constructor(\n\t\tpublic readonly error: DeepReadonly<Error>,\n\t\tpublic readonly info: string\n\t) {}\n}\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./partButton.vue?vue&type=style&index=0&id=349a1f54&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./partButton.vue?vue&type=style&index=0&id=349a1f54&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./content-pack.vue?vue&type=style&index=0&id=5035b04a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./content-pack.vue?vue&type=style&index=0&id=5035b04a&lang=scss&scoped=true&\"","import { RenderContext } from '@/renderer/rendererContext';\nimport { getAsset, getAAsset } from '@/asset-manager';\nimport { Renderer } from '@/renderer/renderer';\nimport { IRenderable, IHitbox } from './renderable';\nimport {\n\tICharacter,\n\tgetPose,\n\tgetHeads,\n\tCloseUpYOffset,\n\tgetDataG,\n\tgetData,\n} from '@/store/objectTypes/characters';\nimport {\n\tPose,\n\tCharacter as CharacterModel,\n\tContentPack,\n\tPoseRenderCommand,\n} from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\nimport { IAsset } from '@/store/content';\nimport { ErrorAsset } from '../models/error-asset';\nimport { DeepReadonly } from '@/util/readonly';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\n\nexport class Character implements IRenderable {\n\tpublic styleData = {\n\t\tlastBase: '',\n\t\tcomponents: {} as { [component: string]: string },\n\t};\n\tprivate lq: boolean = true;\n\tprivate localRenderer: Renderer | null = null;\n\tprivate lastVersion = -1;\n\tprivate hitDetectionFallback = false;\n\n\tpublic get id(): string {\n\t\treturn this.obj.id;\n\t}\n\n\tpublic constructor(\n\t\tpublic readonly obj: ICharacter,\n\t\tprivate data: DeepReadonly<CharacterModel<IAsset>>\n\t) {}\n\n\tpublic updatedContent(store: Store<DeepReadonly<IRootState>>): void {\n\t\tthis.data = getData(store, this.obj);\n\t}\n\n\tpublic async updateLocalCanvas() {\n\t\tconst pose = getPose(this.data, this.obj) as Pose<IAsset>;\n\t\tthis.localRenderer = new Renderer(pose.size[0], pose.size[1]);\n\t\tawait this.localRenderer.render(async rx => {\n\t\t\tconst currentHeads = getHeads(this.data, this.obj);\n\n\t\t\tconst drawAssetsUnloaded: IDrawAssetsUnloaded[] = [];\n\n\t\t\tfor (const renderCommand of pose.renderCommands) {\n\t\t\t\tswitch (renderCommand.type) {\n\t\t\t\t\tcase 'head':\n\t\t\t\t\t\tdrawAssetsUnloaded.push({\n\t\t\t\t\t\t\toffset: renderCommand.offset,\n\t\t\t\t\t\t\tcomposite: renderCommand.composite,\n\t\t\t\t\t\t\tassets: currentHeads\n\t\t\t\t\t\t\t\t? currentHeads.variants[this.obj.posePositions.head || 0]\n\t\t\t\t\t\t\t\t: [],\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'image':\n\t\t\t\t\t\tdrawAssetsUnloaded.push({\n\t\t\t\t\t\t\toffset: renderCommand.offset,\n\t\t\t\t\t\t\tcomposite: renderCommand.composite,\n\t\t\t\t\t\t\tassets: renderCommand.images,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'pose-part':\n\t\t\t\t\t\tconst posePosition = pose.positions[renderCommand.part];\n\t\t\t\t\t\tif (!posePosition || posePosition.length === 0) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tconst partAssets =\n\t\t\t\t\t\t\tposePosition[this.obj.posePositions[renderCommand.part] || 0];\n\t\t\t\t\t\tif (!partAssets) break;\n\t\t\t\t\t\tdrawAssetsUnloaded.push({\n\t\t\t\t\t\t\toffset: renderCommand.offset,\n\t\t\t\t\t\t\tcomposite: renderCommand.composite,\n\t\t\t\t\t\t\tassets: partAssets,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tconsole.log(renderCommand, JSON.stringify(drawAssetsUnloaded));\n\t\t\t}\n\n\t\t\tconst loadedDraws = await Promise.all(\n\t\t\t\tdrawAssetsUnloaded\n\t\t\t\t\t.filter(drawAsset => drawAsset.assets)\n\t\t\t\t\t.map(drawAsset => loadAssets(drawAsset, rx.hq))\n\t\t\t);\n\n\t\t\tfor (const loadedDraw of loadedDraws) {\n\t\t\t\tfor (const asset of loadedDraw.assets) {\n\t\t\t\t\trx.drawImage({\n\t\t\t\t\t\timage: asset,\n\t\t\t\t\t\tcomposite: loadedDraw.composite,\n\t\t\t\t\t\tx: loadedDraw.offset[0],\n\t\t\t\t\t\ty: loadedDraw.offset[1],\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.lastVersion = this.obj.version;\n\t\t});\n\t}\n\n\tpublic get width() {\n\t\tconst zoom = this.obj.close ? 2 : 1;\n\t\treturn this.obj.width * zoom;\n\t}\n\n\tpublic get height() {\n\t\tconst zoom = this.obj.close ? 2 : 1;\n\t\treturn this.obj.height * zoom;\n\t}\n\n\tpublic get x() {\n\t\treturn this.obj.x;\n\t}\n\n\tpublic get y() {\n\t\treturn (this.obj.close ? CloseUpYOffset : 0) + this.obj.y;\n\t}\n\n\tpublic async render(selected: boolean, rx: RenderContext) {\n\t\tif (\n\t\t\tthis.localRenderer === null ||\n\t\t\tthis.lastVersion !== this.obj.version ||\n\t\t\tthis.lq !== !rx.hq\n\t\t) {\n\t\t\tawait this.updateLocalCanvas();\n\t\t}\n\n\t\tconst w = this.width;\n\t\tconst h = this.height;\n\t\tconst x = this.x - w / 2;\n\t\tconst y = this.y;\n\n\t\trx.drawImage({\n\t\t\timage: this.localRenderer!,\n\t\t\tx,\n\t\t\ty,\n\t\t\tw,\n\t\t\th,\n\t\t\tflip: this.obj.flip,\n\t\t\tshadow: selected && rx.preview ? { blur: 20, color: 'red' } : undefined,\n\t\t\topacity: this.obj.opacity,\n\t\t});\n\t}\n\n\tpublic hitTest(hx: number, hy: number): boolean {\n\t\tif (!this.localRenderer) return false;\n\n\t\tconst scaledX = hx - (this.x - this.width / 2);\n\t\tconst scaledY = hy - this.y;\n\n\t\tif (scaledX < 0 || scaledX > this.width) return false;\n\t\tif (scaledY < 0 || scaledY > this.height) return false;\n\n\t\tif (!this.hitDetectionFallback) {\n\t\t\ttry {\n\t\t\t\tconst flippedX = this.obj.flip ? this.width - scaledX : scaledX;\n\t\t\t\tconst scaleX = this.localRenderer.width / this.width;\n\t\t\t\tconst scaleY = this.localRenderer.height / this.height;\n\t\t\t\tconst data = this.localRenderer.getDataAt(\n\t\t\t\t\tMath.round(flippedX * scaleX),\n\t\t\t\t\tMath.round(scaledY * scaleY)\n\t\t\t\t);\n\t\t\t\t// tslint:disable-next-line: no-magic-numbers\n\t\t\t\treturn data[3] !== 0;\n\t\t\t} catch (e) {\n\t\t\t\t// On chrome for android, the hit test tends to fail because of cross-origin shenanigans, even though\n\t\t\t\t// we only ever load from one origin. \\_()_/\n\t\t\t\t// So we have a fallback that doesn't read the contents of the canvas. This looses accuracy, but at\n\t\t\t\t// least works always.\n\t\t\t\tif (e instanceof DOMException && e.message.includes('cross-origin')) {\n\t\t\t\t\tthis.hitDetectionFallback = true;\n\t\t\t\t} else {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tpublic getHitbox(): IHitbox {\n\t\treturn {\n\t\t\tx0: this.x - this.width / 2,\n\t\t\tx1: this.x + this.width / 2,\n\t\t\ty0: this.y,\n\t\t\ty1: this.y + this.height,\n\t\t};\n\t}\n}\n\ninterface IDrawAssetsUnloaded {\n\toffset: DeepReadonly<[number, number]>;\n\tassets: DeepReadonly<IAsset[]>;\n\tcomposite: PoseRenderCommand<any>['composite'];\n}\n\ninterface IDrawAssets {\n\toffset: DeepReadonly<[number, number]>;\n\tassets: DeepReadonly<Array<HTMLImageElement | ErrorAsset>>;\n\tcomposite: PoseRenderCommand<any>['composite'];\n}\n\nasync function loadAssets(\n\tunloaded: IDrawAssetsUnloaded,\n\thq: boolean\n): Promise<IDrawAssets> {\n\treturn {\n\t\toffset: unloaded.offset,\n\t\tassets: await Promise.all(\n\t\t\tunloaded.assets.map(asset => getAAsset(asset, hq))\n\t\t),\n\t\tcomposite: unloaded.composite,\n\t};\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./credits.vue?vue&type=style&index=0&id=085172b6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./credits.vue?vue&type=style&index=0&id=085172b6&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drop-target.vue?vue&type=style&index=0&id=637fa60f&lang=css&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drop-target.vue?vue&type=style&index=0&id=637fa60f&lang=css&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./notification.vue?vue&type=style&index=0&id=efac3e1e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./notification.vue?vue&type=style&index=0&id=efac3e1e&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./character.vue?vue&type=style&index=0&id=7b2622e6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./character.vue?vue&type=style&index=0&id=7b2622e6&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toolbox.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toolbox.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./panels.vue?vue&type=style&index=0&id=dcf771d0&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./panels.vue?vue&type=style&index=0&id=dcf771d0&lang=scss&scoped=true&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./parts.vue?vue&type=style&index=0&id=1212eb87&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./parts.vue?vue&type=style&index=0&id=1212eb87&lang=scss&scoped=true&\"","import EventBus, {\n\tAssetFailureEvent,\n\tCustomAssetFailureEvent,\n} from './eventbus/event-bus';\nimport { ErrorAsset } from './models/error-asset';\nimport { IAsset } from './store/content';\nimport environment from './environments/environment';\n\nlet webpSupportPromise: Promise<boolean>;\nlet heifSupportPromise: Promise<boolean>;\n\nexport function isWebPSupported(): Promise<boolean> {\n\tif (!webpSupportPromise) {\n\t\twebpSupportPromise = new Promise((resolve, reject) => {\n\t\t\tconst losslessCode =\n\t\t\t\t'data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=';\n\t\t\tconst img = document.createElement('img');\n\t\t\timg.addEventListener('load', () => {\n\t\t\t\tresolve(img.width === 2 && img.height === 1);\n\t\t\t});\n\t\t\timg.addEventListener('error', () => {\n\t\t\t\tresolve(false);\n\t\t\t});\n\t\t\timg.src = losslessCode;\n\t\t});\n\t}\n\treturn webpSupportPromise;\n}\n\nexport function isHeifSupported(): Promise<boolean> {\n\tif (!heifSupportPromise) {\n\t\theifSupportPromise = new Promise((resolve, reject) => {\n\t\t\tconst losslessCode =\n\t\t\t\t'data:image/heic;base64,AAAAGGZ0eXBoZWljAAAAAG1pZjFoZWljAAAAsW1ldGEAAAAAAAAAIWhkbHIAAAAAAAAAAHBpY3QAXABjAGMAcwBsAGEAAAAADnBpdG0AAAAAAAEAAAAQaWxvYwAAAABEQAAAAAAAI2lpbmYAAAAAAAEAAAAVaW5mZQIAAAAAAQAAaHZjMQAAAABDaXBycAAAACdpcGNvAAAAH2h2Y0NmzGx1ci0AAAAAAABv9HP+//v9bjr3AAAAABRpcG1hAAAAAAAAAAEAAQGBAAAACG1kYXQ=';\n\t\t\tconst img = document.createElement('img');\n\t\t\timg.addEventListener('load', () => {\n\t\t\t\tconsole.log('Heif no error. ' + (img.width === 2 && img.height === 1));\n\t\t\t\tresolve(img.width === 2 && img.height === 1);\n\t\t\t});\n\t\t\timg.addEventListener('error', () => {\n\t\t\t\tconsole.log('Heif not supported');\n\t\t\t\tresolve(false);\n\t\t\t});\n\t\t\timg.src = losslessCode;\n\t\t});\n\t}\n\treturn heifSupportPromise;\n}\n\nconst assetCache: {\n\t[url: string]: Promise<HTMLImageElement | ErrorAsset> | undefined;\n} = {};\nconst customAssets: { [id: string]: Promise<HTMLImageElement> } = {};\n\nexport async function getAAsset(\n\tasset: IAsset,\n\thq: boolean = true\n): Promise<HTMLImageElement | ErrorAsset> {\n\treturn getAssetByUrl(environment.allowLQ && !hq ? asset.lq : asset.hq);\n}\nexport async function getAssetByUrl(\n\turl: string\n): Promise<HTMLImageElement | ErrorAsset> {\n\tif (!assetCache[url]) {\n\t\tassetCache[url] = new Promise((resolve, reject) => {\n\t\t\tconst img = new Image();\n\t\t\timg.addEventListener('load', () => {\n\t\t\t\tresolve(img);\n\t\t\t});\n\t\t\timg.addEventListener('error', () => {\n\t\t\t\tEventBus.fire(new AssetFailureEvent(url));\n\t\t\t\tassetCache[url] = undefined;\n\t\t\t\tresolve(new ErrorAsset());\n\t\t\t});\n\t\t\timg.crossOrigin = 'Anonymous';\n\t\t\timg.src = url;\n\t\t\timg.style.display = 'none';\n\t\t\tdocument.body.appendChild(img);\n\t\t});\n\t}\n\n\treturn assetCache[url]!;\n}\nexport const baseUrl = process.env.BASE_URL === '' ? '.' : process.env.BASE_URL;\n\nexport async function getAsset(\n\tasset: string,\n\thq: boolean = true\n): Promise<HTMLImageElement | ErrorAsset> {\n\tif (customAssets[asset]) {\n\t\treturn customAssets[asset];\n\t}\n\n\tconst url = `${baseUrl}/assets/${asset}${hq ? '' : '.lq'}${\n\t\t(await isWebPSupported()) ? '.webp' : '.png'\n\t}`.replace(/\\/+/, '/');\n\treturn getAssetByUrl(url);\n}\n\nexport function registerAsset(asset: string, file: File): string {\n\tconst url = URL.createObjectURL(file);\n\tcustomAssets[asset] = new Promise((resolve, reject) => {\n\t\tconst img = new Image();\n\t\timg.addEventListener('load', () => {\n\t\t\tresolve(img);\n\t\t});\n\t\timg.addEventListener('error', error => {\n\t\t\tEventBus.fire(new CustomAssetFailureEvent(error));\n\t\t\treject(`Failed to load \"${url}\"`);\n\t\t});\n\t\timg.crossOrigin = 'Anonymous';\n\t\timg.src = url;\n\t\timg.style.display = 'none';\n\t\tdocument.body.appendChild(img);\n\t});\n\treturn url;\n}\n\nexport function registerAssetWithURL(\n\tasset: string,\n\turl: string\n): Promise<HTMLImageElement> {\n\treturn (customAssets[asset] = new Promise((resolve, reject) => {\n\t\tconst img = new Image();\n\t\timg.addEventListener('load', () => {\n\t\t\tresolve(img);\n\t\t});\n\t\timg.addEventListener('error', error => {\n\t\t\tEventBus.fire(new CustomAssetFailureEvent(error));\n\t\t\treject(`Failed to load \"${url}\"`);\n\t\t});\n\t\timg.crossOrigin = 'Anonymous';\n\t\timg.src = url;\n\t\timg.style.display = 'none';\n\t\tdocument.body.appendChild(img);\n\t}));\n}\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","export function exhaust(a: never): never {\n\tthrow new Error(`Unexpected value \"${a}\"`);\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toggle.vue?vue&type=style&index=0&id=7bd0fd86&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toggle.vue?vue&type=style&index=0&id=7bd0fd86&lang=scss&scoped=true&\"","import { RenderAbortedException } from './renderAbortedException';\nimport { Renderer } from './renderer';\nimport { ErrorAsset } from '@/models/error-asset';\n\nconst opacityFactor = 100;\n\nexport class RenderContext {\n\tprivate aborted: boolean = false;\n\n\tpublic constructor(\n\t\tpublic fsCtx: CanvasRenderingContext2D,\n\t\tpublic readonly hq: boolean,\n\t\tpublic readonly preview: boolean\n\t) {}\n\n\tpublic drawText(\n\t\tparams: { text: string; align?: CanvasTextAlign; font?: string } & IRPos &\n\t\t\tIOOutline &\n\t\t\tIOFill\n\t) {\n\t\tif (this.aborted) throw new RenderAbortedException();\n\t\tthis.fsCtx.save();\n\n\t\tconst { font, align, x = 0, y = 0, text = '' } = {\n\t\t\t...{\n\t\t\t\tfont: '20px aller',\n\t\t\t\talign: 'left' as CanvasTextAlign,\n\t\t\t},\n\t\t\t...params,\n\t\t};\n\n\t\tthis.fsCtx.lineJoin = 'round';\n\t\tthis.fsCtx.textAlign = align;\n\t\tthis.fsCtx.font = font;\n\n\t\tif (params.outline) {\n\t\t\tthis.fsCtx.strokeStyle = params.outline.style;\n\t\t\tthis.fsCtx.lineWidth = params.outline.width;\n\t\t\tthis.fsCtx.strokeText(text, x, y);\n\t\t}\n\n\t\tif (params.fill) {\n\t\t\tthis.fsCtx.fillStyle = params.fill.style;\n\t\t\tthis.fsCtx.fillText(text, x, y);\n\t\t}\n\n\t\tthis.fsCtx.restore();\n\t}\n\n\tpublic measureText(\n\t\tparams: {\n\t\t\ttext: string;\n\t\t\talign?: CanvasTextAlign;\n\t\t\tfont?: string;\n\t\t} & IOOutline &\n\t\t\tIOFill\n\t): TextMetrics {\n\t\tif (this.aborted) throw new RenderAbortedException();\n\t\tthis.fsCtx.save();\n\n\t\tconst { font, align, text = '' } = {\n\t\t\t...{\n\t\t\t\tfont: '20px aller',\n\t\t\t\talign: 'left' as CanvasTextAlign,\n\t\t\t},\n\t\t\t...params,\n\t\t};\n\n\t\tthis.fsCtx.lineJoin = 'round';\n\t\tthis.fsCtx.textAlign = align;\n\t\tthis.fsCtx.font = font;\n\n\t\tif (params.outline) {\n\t\t\tthis.fsCtx.strokeStyle = params.outline.style;\n\t\t\tthis.fsCtx.lineWidth = params.outline.width;\n\t\t}\n\n\t\tif (params.fill) {\n\t\t\tthis.fsCtx.fillStyle = params.fill.style;\n\t\t}\n\t\tconst ret = this.fsCtx.measureText(text);\n\t\tthis.fsCtx.restore();\n\t\treturn ret;\n\t}\n\n\tpublic drawImage(\n\t\tparams: {\n\t\t\timage: HTMLImageElement | ErrorAsset | Renderer;\n\t\t\tflip?: boolean;\n\t\t\tcomposite?: CanvasRenderingContext2D['globalCompositeOperation'];\n\t\t} & IRPos &\n\t\t\tIOSize &\n\t\t\tIOShadow &\n\t\t\tIOOpacity\n\t): void {\n\t\tif (this.aborted) throw new RenderAbortedException();\n\t\tif (params.image instanceof ErrorAsset) return;\n\t\tconst { image, flip, x, y, w, h, opacity } = {\n\t\t\tflip: false,\n\t\t\tw: params.image.width,\n\t\t\th: params.image.height,\n\t\t\topacity: 100,\n\t\t\t...params,\n\t\t};\n\n\t\tthis.fsCtx.save();\n\n\t\tif (opacity < opacityFactor) {\n\t\t\tthis.fsCtx.globalAlpha = opacity / opacityFactor;\n\t\t}\n\n\t\tif (params.shadow) {\n\t\t\tconst shadow = params.shadow;\n\t\t\tif (shadow.color) {\n\t\t\t\tthis.fsCtx.shadowColor = shadow.color;\n\t\t\t}\n\t\t\tif (shadow.blur) {\n\t\t\t\tthis.fsCtx.shadowBlur = shadow.blur;\n\t\t\t}\n\t\t\tif (shadow.offsetX) {\n\t\t\t\tthis.fsCtx.shadowOffsetX = shadow.offsetX;\n\t\t\t}\n\t\t\tif (shadow.offsetY) {\n\t\t\t\tthis.fsCtx.shadowOffsetY = shadow.offsetY;\n\t\t\t}\n\t\t}\n\n\t\tthis.fsCtx.translate(x + w / 2, y + h / 2);\n\t\tthis.fsCtx.scale(flip ? -1 : 1, 1);\n\n\t\tif (params.composite) {\n\t\t\tthis.fsCtx.globalCompositeOperation = params.composite;\n\t\t}\n\n\t\tif (image instanceof Renderer) {\n\t\t\timage.paintOnto(this.fsCtx, -w / 2, -h / 2, w, h);\n\t\t} else {\n\t\t\tthis.fsCtx.drawImage(image as HTMLImageElement, -w / 2, -h / 2, w, h);\n\t\t}\n\n\t\tthis.fsCtx.restore();\n\t}\n\n\tpublic drawRect({\n\t\tx,\n\t\ty,\n\t\tw,\n\t\th,\n\t\toutline,\n\t\tfill,\n\t\tcomposition,\n\t}: IRPos & IRSize & IOOutline & IOFill & IOComposition) {\n\t\tif (this.aborted) throw new RenderAbortedException();\n\t\tthis.fsCtx.save();\n\t\tthis.fsCtx.beginPath();\n\t\tthis.fsCtx.rect(x, y, w, h);\n\n\t\tif (composition) {\n\t\t\tthis.fsCtx.globalCompositeOperation = composition;\n\t\t}\n\n\t\tif (fill) {\n\t\t\tthis.fsCtx.fillStyle = fill.style;\n\t\t\tthis.fsCtx.fill();\n\t\t}\n\t\tif (outline) {\n\t\t\tthis.fsCtx.strokeStyle = outline.style;\n\t\t\tthis.fsCtx.lineWidth = outline.width;\n\t\t\tthis.fsCtx.stroke();\n\t\t}\n\t\tthis.fsCtx.restore();\n\t}\n\n\tpublic drawPath({\n\t\toutline,\n\t\tfill,\n\t\tpath,\n\t}: { path: (ctx: CanvasPath) => void } & IOOutline & IOFill) {\n\t\tif (this.aborted) throw new RenderAbortedException();\n\t\tthis.fsCtx.save();\n\t\tthis.fsCtx.beginPath();\n\t\tpath(this.fsCtx);\n\n\t\tif (fill) {\n\t\t\tthis.fsCtx.fillStyle = fill.style;\n\t\t\tthis.fsCtx.fill();\n\t\t}\n\t\tif (outline) {\n\t\t\tthis.fsCtx.strokeStyle = outline.style;\n\t\t\tthis.fsCtx.lineWidth = outline.width;\n\t\t\tthis.fsCtx.stroke();\n\t\t}\n\t\tthis.fsCtx.restore();\n\t}\n\n\tpublic patternFrom(\n\t\timage: HTMLImageElement | Renderer,\n\t\trepetition: 'repeat' | 'repeat-x' | 'repeat-y' | 'no-repeat' = 'repeat'\n\t): CanvasPattern {\n\t\tif (image instanceof Renderer) {\n\t\t\timage = (image as any).previewCanvas;\n\t\t}\n\t\treturn this.fsCtx.createPattern(\n\t\t\t(image as any) as CanvasImageSource,\n\t\t\trepetition\n\t\t)!;\n\t}\n\n\tpublic customTransform(\n\t\ttransform: (transformContext: CanvasRenderingContext2D) => void,\n\t\trender: (rx: RenderContext) => void\n\t) {\n\t\tthis.fsCtx.save();\n\t\ttransform(this.fsCtx);\n\t\trender(this);\n\t\tthis.fsCtx.restore();\n\t}\n\n\tpublic linearGradient(\n\t\tx0: number,\n\t\ty0: number,\n\t\tx1: number,\n\t\ty1: number\n\t): CanvasGradient {\n\t\treturn this.fsCtx.createLinearGradient(x0, y0, x1, y1);\n\t}\n\n\tpublic abort(): void {\n\t\tthis.aborted = true;\n\t}\n}\n\nconst optSize = { w: 0, h: 0 };\nconst optShadow = {\n\tblur: 0,\n\tcolor: 'none',\n\toffsetX: 0,\n\toffsetY: 0,\n};\n\nexport interface IShadow {\n\tblur?: number;\n\tcolor?: string;\n\toffsetX?: number;\n\toffsetY?: number;\n}\n\nexport interface IOutline {\n\tstyle: string;\n\twidth: number;\n}\n\nexport interface IFill {\n\tstyle: string | CanvasGradient | CanvasPattern;\n}\n\ninterface IOShadow {\n\tshadow?: IShadow;\n}\n\ninterface IOComposition {\n\tcomposition?: CanvasRenderingContext2D['globalCompositeOperation'];\n}\n\ninterface IRPos {\n\tx: number;\n\ty: number;\n}\n\ninterface IRSize {\n\tw: number;\n\th: number;\n}\n\ninterface IOSize {\n\tw?: number;\n\th?: number;\n}\n\ninterface IOOutline {\n\toutline?: IOutline;\n}\ninterface IOOpacity {\n\topacity?: number;\n}\n\ninterface IOFill {\n\tfill?: IFill;\n}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./textbox.vue?vue&type=style&index=0&id=60c643b0&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./textbox.vue?vue&type=style&index=0&id=60c643b0&lang=scss&scoped=true&\"","export class RenderAbortedException {}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sprite.vue?vue&type=style&index=0&id=0b7511a2&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sprite.vue?vue&type=style&index=0&id=0b7511a2&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=style&index=0&id=500b662e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=style&index=0&id=500b662e&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./poem.vue?vue&type=style&index=0&id=2ac7befd&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./poem.vue?vue&type=style&index=0&id=2ac7befd&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layers.vue?vue&type=style&index=0&id=34f3a848&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layers.vue?vue&type=style&index=0&id=34f3a848&lang=scss&scoped=true&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=style&index=0&id=645ce448&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=style&index=0&id=645ce448&lang=scss&scoped=true&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./slider.vue?vue&type=style&index=0&id=d330115e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./slider.vue?vue&type=style&index=0&id=d330115e&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=style&index=0&id=6fcc72ae&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=style&index=0&id=6fcc72ae&lang=scss&scoped=true&\"","export class ErrorAsset {}\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./positionAndSize.vue?vue&type=style&index=0&id=734fec1a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./positionAndSize.vue?vue&type=style&index=0&id=734fec1a&lang=scss&scoped=true&\"","import { Component, Vue } from 'vue-property-decorator';\n\nconst firefoxDeltaFactor = 25;\n\n@Component({})\nexport class VerticalScrollRedirect extends Vue {\n\tpublic verticalScrollRedirect(e: WheelEvent) {\n\t\tif (e.type !== 'wheel') return;\n\t\tif (!e.currentTarget) return;\n\t\tconst currentTarget = e.currentTarget as HTMLElement;\n\t\tlet target = e.target as HTMLElement;\n\n\t\twhile (target !== currentTarget && target) {\n\t\t\tif (target.scrollHeight > target.clientHeight) {\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\ttarget = target.parentElement!;\n\t\t}\n\n\t\tconst ev = e as WheelEvent;\n\t\tif (ev.deltaY === 0) return;\n\t\tif ((ev as any).mozInputSource) {\n\t\t\t// Firefox sends wierdly low delta values :/\n\t\t\tcurrentTarget.scrollLeft += ev.deltaY * firefoxDeltaFactor;\n\t\t} else {\n\t\t\tcurrentTarget.scrollLeft += ev.deltaY;\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./button.vue?vue&type=style&index=0&id=2551c94f&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./button.vue?vue&type=style&index=0&id=2551c94f&lang=scss&scoped=true&\"","import { ICommand } from '@/eventbus/command';\nimport {\n\tIObjectsState,\n\tICreateObjectMutation,\n\tIObject,\n\tISetPositionAction,\n\tISetObjectPositionMutation,\n\tIRemoveObjectAction,\n} from '@/store/objects';\nimport { MutationTree, ActionTree, Store, Commit, ActionContext } from 'vuex';\nimport { characterPositions } from '@/constants/base';\nimport { arraySeeker } from '@/models/seekers';\nimport { IHistoryOptions } from '@/plugins/vuex-history';\nimport {\n\tCharacter,\n\tPose,\n\tHeadCollection,\n\tContentPack,\n} from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\nimport { IAsset } from '../content';\nimport { IRootState } from '..';\nimport { DeepReadonly } from '@/util/readonly';\n\nexport interface ICharacter extends IObject {\n\ttype: 'character';\n\tcharacterType: string;\n\tfreeMove: boolean;\n\tclose: boolean;\n\tstyleGroupId: number;\n\tstyleId: number;\n\tposeId: number;\n\tposePositions: {\n\t\t[id: string]: number;\n\t};\n}\n\nexport const CloseUpYOffset = -74;\nexport const BaseCharacterYPos = -26;\n\nexport const characterMutations: MutationTree<IObjectsState> = {\n\tsetPose(state, command: ISetPoseMutation) {\n\t\tconst obj = state.objects[command.id] as ICharacter;\n\t\tobj.poseId = command.poseId;\n\t\t++obj.version;\n\t},\n\tsetCharStyleGroup(state, { id, styleGroupId }: ISetCharStyleGroupMutation) {\n\t\tconst obj = state.objects[id] as ICharacter;\n\t\tobj.styleGroupId = styleGroupId;\n\t\t++obj.version;\n\t},\n\tsetCharStyle(state, { id, styleId }: ISetCharStyleMutation) {\n\t\tconst obj = state.objects[id] as ICharacter;\n\t\tobj.styleId = styleId;\n\t\t++obj.version;\n\t},\n\tsetPosePosition(state, command: ISetPosePositionMutation) {\n\t\tconst obj = state.objects[command.id] as ICharacter;\n\t\tobj.posePositions = {\n\t\t\t...obj.posePositions,\n\t\t\t...command.posePositions,\n\t\t};\n\t\t++obj.version;\n\t},\n\tsetClose(state, command: ISetCloseMutation) {\n\t\tconst obj = state.objects[command.id] as ICharacter;\n\t\tobj.close = command.close;\n\t\t++obj.version;\n\t},\n\tsetFreeMove(state, command: ISetFreeMoveMutation) {\n\t\tconst obj = state.objects[command.id] as ICharacter;\n\t\tobj.freeMove = command.freeMove;\n\t\tif (!obj.freeMove) {\n\t\t\tobj.x = characterPositions[closestCharacterSlot(obj.x)];\n\t\t\tobj.y = BaseCharacterYPos;\n\t\t}\n\t},\n};\n\nexport function getData(\n\tstore: Store<DeepReadonly<IRootState>>,\n\tstate: DeepReadonly<ICharacter>\n): DeepReadonly<Character<IAsset>> {\n\tconst characters = store.getters['content/getCharacters'] as Map<\n\t\tCharacter<IAsset>['id'],\n\t\tCharacter<IAsset>\n\t>;\n\treturn characters.get(state.characterType)!;\n}\n\nexport function getDataG(\n\trootGetters: any,\n\tstate: Readonly<ICharacter>\n): Readonly<Character<IAsset>> {\n\tconst characters = rootGetters['content/getCharacters'] as Map<\n\t\tCharacter<IAsset>['id'],\n\t\tCharacter<IAsset>\n\t>;\n\treturn characters.get(state.characterType)!;\n}\n\nexport function getPose(\n\tdata: DeepReadonly<Character<IAsset>>,\n\tstate: DeepReadonly<ICharacter>\n): DeepReadonly<Pose<IAsset>> {\n\treturn data.styleGroups[state.styleGroupId].styles[state.styleId].poses[\n\t\tstate.poseId\n\t];\n}\n\nexport function getParts(\n\tdata: DeepReadonly<Character<IAsset>>,\n\tstate: DeepReadonly<ICharacter>\n): DeepReadonly<string[]> {\n\tconst pose = getPose(data, state);\n\tconst positionKeys = [\n\t\t...Object.keys(pose.positions).filter(\n\t\t\tpositionKey => pose.positions[positionKey].length > 1\n\t\t),\n\t];\n\tif (pose.compatibleHeads.length > 0) positionKeys.unshift('head');\n\treturn positionKeys;\n}\n\nexport function getHeads(\n\tdata: DeepReadonly<Character<IAsset>>,\n\tstate: DeepReadonly<ICharacter>,\n\theadTypeId: number = state.posePositions.headType || 0\n): DeepReadonly<HeadCollection<IAsset>> | null {\n\tconst compatibleHeads = getPose(data, state).compatibleHeads;\n\tif (!compatibleHeads || compatibleHeads.length === 0) {\n\t\treturn null;\n\t}\n\tconst heads = data.heads[compatibleHeads[headTypeId]];\n\treturn heads;\n}\n\nexport function closestCharacterSlot(pos: number): number {\n\tconst sorted = characterPositions\n\t\t.map((x, idx) => ({ pos: Math.abs(pos - x), idx }))\n\t\t.sort((a, b) => a.pos - b.pos);\n\treturn sorted[0].idx;\n}\n\nlet lastSpriteId = 0;\n\nexport const characterActions: ActionTree<IObjectsState, IRootState> = {\n\tcreateCharacters({ rootState, commit }, command: ICreateCharacterAction) {\n\t\tcommit('create', {\n\t\t\tobject: {\n\t\t\t\tflip: false,\n\t\t\t\tid: 'characters_' + ++lastSpriteId,\n\t\t\t\tpanelId: rootState.panels.currentPanel,\n\t\t\t\tonTop: false,\n\t\t\t\topacity: 100,\n\t\t\t\ttype: 'character',\n\t\t\t\tx: 640,\n\t\t\t\ty: BaseCharacterYPos,\n\t\t\t\tpreserveRatio: true,\n\t\t\t\tratio: 1,\n\t\t\t\theight: 768,\n\t\t\t\twidth: 768,\n\t\t\t\tcharacterType: command.characterType,\n\t\t\t\tclose: false,\n\t\t\t\tfreeMove: false,\n\t\t\t\tversion: 0,\n\t\t\t\tposeId: 0,\n\t\t\t\tstyleId: 0,\n\t\t\t\tstyleGroupId: 0,\n\t\t\t\tposePositions: {},\n\t\t\t} as ICharacter,\n\t\t} as ICreateObjectMutation);\n\t},\n\n\tseekPart(\n\t\t{ state, commit, dispatch, rootGetters },\n\t\t{ delta, id, part }: ISeekPosePartAction\n\t) {\n\t\tif (part === 'head') {\n\t\t\tdispatch('seekHead', { id, delta } as ISeekHeadAction);\n\t\t\treturn;\n\t\t}\n\t\tconst obj = state.objects[id] as Readonly<ICharacter>;\n\t\tconst pose = getPose(getDataG(rootGetters, obj), obj);\n\t\tif (!pose.positions[part]) return;\n\t\tcommit('setPosePosition', {\n\t\t\tid,\n\t\t\tposePositions: {\n\t\t\t\t[part]: arraySeeker(\n\t\t\t\t\tpose.positions[part],\n\t\t\t\t\tobj.posePositions[part] || 0,\n\t\t\t\t\tdelta\n\t\t\t\t),\n\t\t\t},\n\t\t} as ISetPosePositionMutation);\n\t},\n\n\tseekPose({ state, commit, rootGetters }, { id, delta }: ISeekPoseAction) {\n\t\tconst obj = state.objects[id] as Readonly<ICharacter>;\n\t\tconst data = getDataG(rootGetters, obj);\n\t\tconst poses = data.styleGroups[obj.styleGroupId].styles[obj.styleId].poses;\n\t\tmutatePoseAndPositions(commit, obj, data, change => {\n\t\t\tchange.poseId = arraySeeker(poses, change.poseId, delta);\n\t\t});\n\t},\n\n\tseekStyle({ state, commit, rootGetters }, { id, delta }: ISeekStyleAction) {\n\t\tconst obj = state.objects[id] as Readonly<ICharacter>;\n\t\tconst data = getDataG(rootGetters, obj);\n\t\tconst linearStyles = data.styleGroups\n\t\t\t.flatMap((styleGroup, styleGroupIdx) => {\n\t\t\t\treturn styleGroup.styles.map((style, styleIdx) => {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tstyleGroupIdx,\n\t\t\t\t\t\tstyleIdx,\n\t\t\t\t\t\tstyleGroupJson: JSON.stringify(style.components),\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t})\n\t\t\t.sort((styleA, styleB) =>\n\t\t\t\tstyleA.styleGroupJson.localeCompare(styleB.styleGroupJson)\n\t\t\t);\n\t\tconst linearIdx = linearStyles.findIndex(\n\t\t\tstyle =>\n\t\t\t\tstyle.styleGroupIdx === obj.styleGroupId &&\n\t\t\t\tstyle.styleIdx === obj.styleId\n\t\t);\n\t\tmutatePoseAndPositions(commit, obj, data, change => {\n\t\t\tconst nextIdx = arraySeeker(linearStyles, linearIdx, delta);\n\t\t\tconst style = linearStyles[nextIdx];\n\t\t\tchange.styleGroupId = style.styleGroupIdx;\n\t\t\tchange.styleId = style.styleIdx;\n\t\t});\n\t},\n\n\tseekHead({ state, commit, rootGetters }, { id, delta }: ISeekHeadAction) {\n\t\tconst obj = state.objects[id] as Readonly<ICharacter>;\n\t\tconst data = getDataG(rootGetters, obj);\n\t\tconst pose = getPose(data, obj);\n\t\tlet currentHeads = getHeads(data, obj);\n\t\tif (!currentHeads) return;\n\t\tlet head = (obj.posePositions.head || 0) + delta;\n\t\tlet headType = obj.posePositions.headType || 0;\n\t\tif (head < 0 || head >= currentHeads.variants.length) {\n\t\t\theadType = arraySeeker(\n\t\t\t\tpose.compatibleHeads.map(headKey => data.heads[headKey]),\n\t\t\t\theadType,\n\t\t\t\tdelta\n\t\t\t);\n\t\t\tcurrentHeads = getHeads(data, obj, headType)!;\n\t\t\thead = delta === 1 ? 0 : currentHeads.variants.length - 1;\n\t\t}\n\t\tcommit('setPosePosition', {\n\t\t\tid,\n\t\t\tposePositions: {\n\t\t\t\thead,\n\t\t\t\theadType,\n\t\t\t},\n\t\t} as ISetPosePositionMutation);\n\t},\n\n\tsetPart(\n\t\t{ state, commit, rootGetters },\n\t\t{ id, part, val }: ISetPartAction\n\t): void {\n\t\tconst obj = state.objects[id] as Readonly<ICharacter>;\n\t\tconst data = getDataG(rootGetters, obj);\n\t\tif (part === 'pose') {\n\t\t\tmutatePoseAndPositions(commit, obj, data, change => {\n\t\t\t\tchange.poseId = val;\n\t\t\t});\n\t\t} else if (part === 'style') {\n\t\t\tmutatePoseAndPositions(commit, obj, data, change => {\n\t\t\t\tchange.styleId = val;\n\t\t\t});\n\t\t} else {\n\t\t\tmutatePoseAndPositions(commit, obj, data, change => {\n\t\t\t\tchange.posePositions[part] = val;\n\t\t\t});\n\t\t}\n\t},\n\n\tsetCharStyle(\n\t\t{ state, commit, rootGetters },\n\t\t{ id, styleGroupId, styleId }: ISetStyleAction\n\t) {\n\t\tconst obj = state.objects[id] as Readonly<ICharacter>;\n\t\tconst data = getDataG(rootGetters, obj);\n\t\tmutatePoseAndPositions(commit, obj, data, change => {\n\t\t\tchange.styleGroupId = styleGroupId;\n\t\t\tchange.styleId = styleId;\n\t\t});\n\t},\n\n\tsetCharacterPosition(\n\t\t{ state, commit },\n\t\t{ id, x, y }: ISetPositionAction\n\t): void {\n\t\tconst obj = state.objects[id] as ICharacter;\n\t\tif (obj.freeMove) {\n\t\t\tcommit('setPosition', {\n\t\t\t\tid,\n\t\t\t\tx,\n\t\t\t\ty,\n\t\t\t} as ISetObjectPositionMutation);\n\t\t} else {\n\t\t\tcommit('setPosition', {\n\t\t\t\tid,\n\t\t\t\tx: characterPositions[closestCharacterSlot(x)],\n\t\t\t\ty: BaseCharacterYPos + (obj.close ? CloseUpYOffset : 0),\n\t\t\t} as ISetObjectPositionMutation);\n\t\t}\n\t},\n\n\tshiftCharacterSlot(\n\t\t{ state, commit },\n\t\t{ id, delta }: IShiftCharacterSlotAction\n\t): void {\n\t\tconst obj = state.objects[id] as ICharacter;\n\t\tconst currentSlotNr = closestCharacterSlot(obj.x);\n\t\tlet newSlotNr = currentSlotNr + delta;\n\t\tif (newSlotNr < 0) {\n\t\t\tnewSlotNr = 0;\n\t\t}\n\t\tif (newSlotNr >= characterPositions.length) {\n\t\t\tnewSlotNr = characterPositions.length - 1;\n\t\t}\n\t\tcommit('setPosition', {\n\t\t\tid,\n\t\t\tx: characterPositions[newSlotNr],\n\t\t\ty: obj.y,\n\t\t} as ISetObjectPositionMutation);\n\t},\n};\n\nexport async function fixContentPackRemovalFromCharacter(\n\tcontext: ActionContext<IObjectsState, IRootState>,\n\tid: string,\n\toldPack: ContentPack<IAsset>\n) {\n\tconst obj = context.state.objects[id] as ICharacter;\n\tconst oldCharData = oldPack.characters.find(\n\t\tchar => char.id === obj.characterType\n\t);\n\tif (!oldCharData) {\n\t\tconsole.error('Character data is missing. Dropping the character.');\n\t\tcontext.dispatch('removeObject', {\n\t\t\tid,\n\t\t} as IRemoveObjectAction);\n\t\treturn;\n\t}\n\tconst poseAndPositionChange = buildPoseAndPositionData(obj);\n\tconst oldStyleGroup = oldCharData.styleGroups[obj.styleGroupId];\n\tconst oldStyle = oldStyleGroup.styles[poseAndPositionChange.styleId];\n\tconst oldPose = oldStyle.poses[poseAndPositionChange.poseId];\n\n\tconst newCharData = context.rootState.content.current.characters.find(\n\t\tchr => chr.id === oldCharData.id\n\t);\n\tif (!newCharData) {\n\t\tconsole.error('Character data is missing. Dropping the character.');\n\t\tcontext.dispatch('removeObject', {\n\t\t\tid,\n\t\t} as IRemoveObjectAction);\n\t\treturn;\n\t}\n\tconst newStyleGroupIdx = newCharData.styleGroups.findIndex(\n\t\tstyleGroup => styleGroup.id === oldStyleGroup.id\n\t);\n\tposeAndPositionChange.styleGroupId =\n\t\tnewStyleGroupIdx === -1 ? 0 : newStyleGroupIdx;\n\n\tconst newStyleGroup =\n\t\tnewCharData.styleGroups[poseAndPositionChange.styleGroupId];\n\tconst styleProperies = JSON.stringify(oldStyle.components);\n\tconst newStyleIdx = newStyleGroup.styles.findIndex(\n\t\tstyle => JSON.stringify(style.components) === styleProperies\n\t);\n\tposeAndPositionChange.styleId = newStyleIdx === -1 ? 0 : newStyleIdx;\n\n\tconst newStyle = newStyleGroup.styles[poseAndPositionChange.styleId];\n\tconst newPoseIdx = newStyle.poses.findIndex(pose => pose.id === oldPose.id);\n\tposeAndPositionChange.poseId = newPoseIdx === -1 ? 0 : newPoseIdx;\n\n\t// Styles and poses have been restored. Proceding with pose parts\n\tconst newPose = newStyle.poses[poseAndPositionChange.poseId];\n\n\tconst newPosePositions: ICharacter['posePositions'] = {};\n\n\tfor (const key in newPose.positions) {\n\t\tif (!newPose.positions.hasOwnProperty(key)) continue;\n\t\tconst newPosition = newPose.positions[key];\n\n\t\tif (oldPose.positions[key]) {\n\t\t\tconst oldPositionIdx = poseAndPositionChange.posePositions[key];\n\t\t\tif (oldPositionIdx >= 0 && oldPositionIdx < newPosition.length) {\n\t\t\t\tnewPosePositions[key] = oldPositionIdx;\n\t\t\t} else {\n\t\t\t\tnewPosePositions[key] = 0;\n\t\t\t}\n\t\t} else {\n\t\t\tnewPosePositions[key] = 0;\n\t\t}\n\t}\n\n\tconst oldHeadGroup = oldPose.compatibleHeads[obj.posePositions.headType];\n\tconst newHeadGroupIdx = newPose.compatibleHeads.indexOf(oldHeadGroup);\n\n\tif (newHeadGroupIdx === -1) {\n\t\tposeAndPositionChange.posePositions.headType = 0;\n\t\tposeAndPositionChange.posePositions.head = 0;\n\t} else {\n\t\tif (newHeadGroupIdx !== obj.posePositions.headType) {\n\t\t\tposeAndPositionChange.posePositions.headType = newHeadGroupIdx;\n\t\t}\n\t\tconst oldHead = JSON.stringify(\n\t\t\toldCharData.heads[oldHeadGroup].variants[obj.posePositions.head]\n\t\t);\n\t\tconst newHeadIdx = newCharData.heads[oldHeadGroup].variants.findIndex(\n\t\t\tvariant => JSON.stringify(variant) === oldHead\n\t\t);\n\t\tif (newHeadIdx === -1) {\n\t\t\tposeAndPositionChange.posePositions.head = 0;\n\t\t} else {\n\t\t\tposeAndPositionChange.posePositions.head = newHeadIdx;\n\t\t}\n\t}\n\n\tcommitPoseAndPositionChanges(context.commit, obj, poseAndPositionChange);\n}\n\nexport const propertyOptions: IHistoryOptions = {\n\tmutations: {\n\t\tsetPosePosition: {\n\t\t\tcombinable: (oldMut, newMut) => oldMut.payload.id === newMut.payload.id,\n\t\t\tcombinator: (oldMut, newMut) => ({\n\t\t\t\ttype: newMut.type,\n\t\t\t\tpayload: {\n\t\t\t\t\tid: newMut.payload.id,\n\t\t\t\t\tposePositions: {\n\t\t\t\t\t\t...oldMut.payload.posePositions,\n\t\t\t\t\t\t...newMut.payload.posePositions,\n\t\t\t\t\t},\n\t\t\t\t} as ISetPosePositionMutation,\n\t\t\t}),\n\t\t},\n\t},\n};\n\nfunction buildPoseAndPositionData(\n\tcharacter: Readonly<ICharacter>\n): PoseAndPositionChange {\n\treturn {\n\t\tstyleGroupId: character.styleGroupId,\n\t\tstyleId: character.styleId,\n\t\tposeId: character.poseId,\n\t\tposePositions: { ...character.posePositions },\n\t};\n}\n\nfunction commitPoseAndPositionChanges(\n\tcommit: Commit,\n\tcharacter: Readonly<ICharacter>,\n\tposeAndPosition: PoseAndPositionChange\n) {\n\tif (poseAndPosition.styleGroupId !== character.styleGroupId) {\n\t\tcommit('setCharStyleGroup', {\n\t\t\tid: character.id,\n\t\t\tstyleGroupId: poseAndPosition.styleGroupId,\n\t\t} as ISetCharStyleGroupMutation);\n\t}\n\tif (poseAndPosition.styleId !== character.styleId) {\n\t\tconsole.log(\n\t\t\t`Setting style of ${character.id} to ${poseAndPosition.styleId}`\n\t\t);\n\t\tcommit('setCharStyle', {\n\t\t\tid: character.id,\n\t\t\tstyleId: poseAndPosition.styleId,\n\t\t} as ISetCharStyleMutation);\n\t}\n\tif (poseAndPosition.poseId !== character.poseId) {\n\t\tcommit('setPose', {\n\t\t\tid: character.id,\n\t\t\tposeId: poseAndPosition.poseId,\n\t\t} as ISetPoseMutation);\n\t}\n\tif (\n\t\tJSON.stringify(poseAndPosition.posePositions) !==\n\t\tJSON.stringify(character.posePositions)\n\t) {\n\t\tcommit('setPosePosition', {\n\t\t\tid: character.id,\n\t\t\tposePositions: poseAndPosition.posePositions,\n\t\t} as ISetPosePositionMutation);\n\t}\n}\n\nfunction mutatePoseAndPositions(\n\tcommit: Commit,\n\tcharacter: Readonly<ICharacter>,\n\tdata: Character<IAsset>,\n\tcallback: (change: PoseAndPositionChange) => void\n) {\n\tconst poseAndPosition = buildPoseAndPositionData(character);\n\tcallback(poseAndPosition);\n\n\tif (!data.styleGroups[poseAndPosition.styleGroupId]) {\n\t\tposeAndPosition.styleGroupId = 0;\n\t}\n\tconst styleGroup = data.styleGroups[poseAndPosition.styleGroupId];\n\n\tif (!styleGroup.styles[poseAndPosition.styleId]) {\n\t\tposeAndPosition.styleId = 0;\n\t}\n\tconst style = styleGroup.styles[poseAndPosition.styleId];\n\n\t// ensure pose integrity\n\tif (!style.poses[poseAndPosition.poseId]) {\n\t\tposeAndPosition.poseId = 0;\n\t}\n\tconst pose = style.poses[poseAndPosition.poseId];\n\n\tfor (const positionKey in pose.positions) {\n\t\tif (!pose.positions[positionKey]) continue;\n\t\tif (\n\t\t\t!pose.positions[positionKey][poseAndPosition.posePositions[positionKey]]\n\t\t) {\n\t\t\tposeAndPosition.posePositions[positionKey] = 0;\n\t\t}\n\t}\n\n\t// restore head group\n\tconst oldPose =\n\t\tdata.styleGroups[character.styleGroupId].styles[character.styleId].poses[\n\t\t\tcharacter.poseId\n\t\t];\n\tconst oldHeadCollection =\n\t\toldPose.compatibleHeads[character.posePositions.headType || 0];\n\tconst newHeadCollectionNr = pose.compatibleHeads.indexOf(oldHeadCollection);\n\tif (newHeadCollectionNr >= 0) {\n\t\tposeAndPosition.posePositions.headType = newHeadCollectionNr;\n\t} else {\n\t\tposeAndPosition.posePositions.headType = 0;\n\t\tposeAndPosition.posePositions.head = 0;\n\t}\n\n\tcommitPoseAndPositionChanges(commit, character, poseAndPosition);\n}\n\ninterface PoseAndPositionChange {\n\tstyleGroupId: ICharacter['styleGroupId'];\n\tstyleId: ICharacter['styleId'];\n\tposeId: ICharacter['poseId'];\n\tposePositions: ICharacter['posePositions'];\n}\n\nexport interface ISetPoseMutation extends ICommand {\n\treadonly poseId: number;\n}\n\nexport interface ISetCharStyleGroupMutation extends ICommand {\n\treadonly styleGroupId: number;\n}\n\nexport interface ISetCharStyleMutation extends ICommand {\n\treadonly styleId: number;\n}\n\nexport interface ISetPosePositionMutation extends ICommand {\n\treadonly posePositions: {\n\t\t[id: string]: number;\n\t};\n}\n\nexport interface ISetFreeMoveMutation extends ICommand {\n\treadonly freeMove: boolean;\n}\n\nexport interface ISetCloseMutation extends ICommand {\n\treadonly close: boolean;\n}\n\nexport interface ICreateCharacterAction {\n\treadonly characterType: string;\n}\n\nexport interface ISeekPoseAction extends ICommand {\n\treadonly delta: -1 | 1;\n}\n\nexport interface ISeekStyleAction extends ICommand {\n\treadonly delta: -1 | 1;\n}\n\nexport interface ISeekHeadAction extends ICommand {\n\treadonly delta: -1 | 1;\n}\n\nexport interface ISetPartAction extends ICommand {\n\treadonly part: string;\n\treadonly val: number;\n}\n\nexport interface ISetStyleAction extends ICommand {\n\treadonly styleGroupId: number;\n\treadonly styleId: number;\n}\n\nexport interface INsfwCheckAction extends ICommand {}\n\nexport interface ISeekPosePartAction extends ICommand {\n\treadonly part: string;\n\treadonly delta: -1 | 1;\n}\n\nexport interface ISetSpriteSizeMutation extends ICommand {\n\treadonly width: number;\n\treadonly height: number;\n}\n\nexport interface ISetSpriteRatioMutation extends ICommand {\n\treadonly preserveRatio: boolean;\n\treadonly ratio: number;\n}\n\nexport interface ISetSpriteWidthAction extends ICommand {\n\treadonly width: number;\n}\n\nexport interface ISetSpriteHeightAction extends ICommand {\n\treadonly height: number;\n}\n\nexport interface ISetSpriteRatioAction extends ICommand {\n\treadonly preserveRatio: boolean;\n}\n\nexport interface ICreateSpriteAction extends ICommand {\n\treadonly assetName: string;\n}\n\nexport interface IShiftCharacterSlotAction extends ICommand {\n\treadonly delta: -1 | 1;\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('input',{ref:\"checkbox\",attrs:{\"id\":_vm._uid,\"type\":\"checkbox\"},domProps:{\"checked\":_vm.value},on:{\"change\":_vm.onChange}}),_c('label',{staticClass:\"switch\",attrs:{\"for\":_vm._uid}}),_c('label',{attrs:{\"for\":_vm._uid}},[_vm._v(_vm._s(_vm.label))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\r\nimport { Component, Vue, Prop } from 'vue-property-decorator';\r\n\r\n@Component({\r\n\tcomponents: {},\r\n})\r\nexport default class Toggle extends Vue {\r\n\t@Prop({ type: String }) private label!: string | undefined;\r\n\t@Prop({ type: Boolean, default: false }) private value!: boolean;\r\n\r\n\tprivate onChange(event: Event) {\r\n\t\tthis.$emit('input', !!(this.$refs.checkbox as HTMLInputElement).checked);\r\n\t}\r\n\r\n\tprivate get checkbox(): HTMLInputElement {\r\n\t\treturn this.$refs.checkbox as HTMLInputElement;\r\n\t}\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toggle.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toggle.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./toggle.vue?vue&type=template&id=7bd0fd86&scoped=true&\"\nimport script from \"./toggle.vue?vue&type=script&lang=ts&\"\nexport * from \"./toggle.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./toggle.vue?vue&type=style&index=0&id=7bd0fd86&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7bd0fd86\",\n  null\n  \n)\n\nexport default component.exports","import { DeepReadonly } from '@/util/readonly';\n\nexport function arraySeeker(\n\tarray: DeepReadonly<any[]>,\n\tpos: number,\n\tdelta: number\n) {\n\tlet val = pos + delta;\n\tconst length = array.length;\n\n\tif (val < 0) {\n\t\tval += length;\n\t}\n\tif (val >= length) {\n\t\tval -= length;\n\t}\n\treturn val;\n}\n\nexport function nsfwArraySeeker(\n\tarray: Array<{ nsfw?: boolean }>,\n\tpos: number,\n\tdelta: number,\n\tnsfw: boolean\n) {\n\tlet val = pos;\n\tconst length = array.length;\n\tdo {\n\t\tval += delta;\n\t\tif (val < 0) {\n\t\t\tval += length;\n\t\t}\n\t\tif (val >= length) {\n\t\t\tval -= length;\n\t\t}\n\t} while (array[val].nsfw && !nsfw);\n\treturn val;\n}\n","export default {\n\t/**\n\t *\n\t * @param {Vue} Vue\n\t * @param {{}} options\n\t */\n\tinstall(Vue, options = {}) {\n\t\tif (!Vue._installedPlugins.find(plugin => plugin.Store)) {\n\t\t\tthrow new Error(\n\t\t\t\t'VuexUndoRedo plugin must be installed after the Vuex plugin.'\n\t\t\t);\n\t\t}\n\t\tif (!options.resetStateMutation) options.resetStateMutation = 'emptyState';\n\t\tif (!options.mutations) options.mutations = {};\n\n\t\tconst history = new Vue({\n\t\t\tdata() {\n\t\t\t\treturn {\n\t\t\t\t\tdone: [],\n\t\t\t\t\tundone: [],\n\t\t\t\t\tnewMutation: true,\n\t\t\t\t\tignoreMutations: options.ignoreMutations || [],\n\t\t\t\t\tcurrentTransaction: null,\n\t\t\t\t\ttransactionQueue: [],\n\t\t\t\t\tinitialized: false,\n\t\t\t\t};\n\t\t\t},\n\n\t\t\tcreated() {\n\t\t\t\twindow.historyStuff = this;\n\t\t\t},\n\n\t\t\tmethods: {\n\t\t\t\tinitialize(store) {\n\t\t\t\t\tif (!this.$store) this.$store = store;\n\t\t\t\t\tif (!this.$store) return;\n\t\t\t\t\tif (this.initialized) return;\n\t\t\t\t\tthis.initialized = true;\n\t\t\t\t\tthis.$store.subscribe(mutation => {\n\t\t\t\t\t\tconst exec = () => {\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tmutation.type === options.resetStateMutation ||\n\t\t\t\t\t\t\t\tgetMutationProperties(mutation.type).ignore(mutation)\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tthis.currentTransaction.push(mutation);\n\t\t\t\t\t\t\tif (this.newMutation) {\n\t\t\t\t\t\t\t\tthis.undone = [];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (this.currentTransaction) {\n\t\t\t\t\t\t\texec();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// If a mutation triggers outside of any transaction, it gets it's own transaction\n\t\t\t\t\t\t\tthis.transaction(() => {\n\t\t\t\t\t\t\t\texec();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t\tredo() {\n\t\t\t\t\tif (this.undone.length <= 0) return;\n\t\t\t\t\tlet commit = this.undone.pop();\n\t\t\t\t\tthis.newMutation = false;\n\t\t\t\t\treplayTransaction(this, commit);\n\t\t\t\t\tthis.newMutation = true;\n\t\t\t\t},\n\t\t\t\tasync undo() {\n\t\t\t\t\tif (this.done.length <= 0) return;\n\t\t\t\t\tthis.undone.push(this.done.pop());\n\t\t\t\t\tthis.newMutation = false;\n\t\t\t\t\tawait replayAll(this);\n\t\t\t\t\tthis.newMutation = true;\n\t\t\t\t},\n\t\t\t\t/**\n\t\t\t\t * @param {transactionCallback} callback\n\t\t\t\t */\n\t\t\t\ttransaction(callback) {\n\t\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\t\tconst exec = async () => {\n\t\t\t\t\t\t\tthis.currentTransaction = [];\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tawait callback();\n\t\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\t\tconsole.log('Error during transaction!: ', e);\n\t\t\t\t\t\t\t\t// reject(e);\n\t\t\t\t\t\t\t\t//this.currentTransaction = [];\n\t\t\t\t\t\t\t\t// The transaction that just failed is not in the undo history yet.\n\t\t\t\t\t\t\t\t// So replaying that is equivalent to undoing the transaction.\n\t\t\t\t\t\t\t\t//replayAll(this);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tconst lastUndo = this.done[this.done.length - 1];\n\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\tthis.currentTransaction.length === 1 &&\n\t\t\t\t\t\t\t\tlastUndo &&\n\t\t\t\t\t\t\t\tlastUndo.length === 1\n\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\tconst options = getMutationProperties(\n\t\t\t\t\t\t\t\t\tthis.currentTransaction[0].type\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\toptions.combinable(lastUndo[0], this.currentTransaction[0])\n\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\tconst combination = options.combinator(\n\t\t\t\t\t\t\t\t\t\tlastUndo[0],\n\t\t\t\t\t\t\t\t\t\tthis.currentTransaction[0]\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\tthis.done.pop();\n\t\t\t\t\t\t\t\t\tif (combination) {\n\t\t\t\t\t\t\t\t\t\tthis.currentTransaction = [combination];\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t// Returning a non-truthy value in the combinator simply eliminates both transactions.\n\t\t\t\t\t\t\t\t\t\t// So if the user manually undoes an action, you can just pretend it never happened.\n\t\t\t\t\t\t\t\t\t\tthis.currentTransaction = [];\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (this.currentTransaction.length > 0) {\n\t\t\t\t\t\t\t\tthis.done.push(this.currentTransaction);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.currentTransaction = null;\n\t\t\t\t\t\t\tif (this.transactionQueue.length > 0) {\n\t\t\t\t\t\t\t\tthis.transactionQueue.pop()();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (this.currentTransaction) {\n\t\t\t\t\t\t\tthis.transactionQueue.push(exec);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\texec();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\tVue.mixin({\n\t\t\tcomputed: {\n\t\t\t\tvuexHistory() {\n\t\t\t\t\treturn history;\n\t\t\t\t},\n\t\t\t},\n\n\t\t\tcreated() {\n\t\t\t\thistory.initialize(this.$store);\n\t\t\t},\n\t\t});\n\n\t\t/**\n\t\t * @param {Vue} vm\n\t\t * @param {*} mutation\n\t\t */\n\t\tasync function replayAll(vm) {\n\t\t\tconst oldTransactions = vm.done.slice(0);\n\t\t\tvm.done = [];\n\t\t\tvm.$store.commit(options.resetStateMutation);\n\t\t\tfor (let i = 0; i < oldTransactions.length; ++i) {\n\t\t\t\tawait replayTransaction(vm, oldTransactions[i]);\n\t\t\t}\n\t\t}\n\n\t\tasync function replayTransaction(vm, transaction) {\n\t\t\treturn await vm.transaction(() => {\n\t\t\t\ttransaction.forEach(mutation => {\n\t\t\t\t\treplayMutation(vm, mutation);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t/**\n\t\t * @param {Vue} vm\n\t\t * @param {*} mutation\n\t\t */\n\t\tfunction replayMutation(vm, mutation) {\n\t\t\tswitch (typeof mutation.payload) {\n\t\t\t\tcase 'object':\n\t\t\t\t\tlet baseObj = {};\n\t\t\t\t\tif (mutation.payload instanceof Array) {\n\t\t\t\t\t\tbaseObj = [];\n\t\t\t\t\t}\n\t\t\t\t\tvm.$store.commit(\n\t\t\t\t\t\t`${mutation.type}`,\n\t\t\t\t\t\tObject.assign(baseObj, mutation.payload)\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tvm.$store.commit(`${mutation.type}`, mutation.payload);\n\t\t\t}\n\t\t}\n\n\t\tconst mutationProperiesCache = {};\n\n\t\t/**\n\t\t *\n\t\t * @param {IHistoryOptions} options\n\t\t * @param {*} name\n\t\t */\n\t\tfunction getMutationProperties(name) {\n\t\t\tif (!mutationProperiesCache[name]) {\n\t\t\t\tconst parts = name.split('/');\n\t\t\t\tconst mutationProperties = {\n\t\t\t\t\tignore: mutation => false,\n\t\t\t\t\tcombinable: (oldMutation, newMutation) => false,\n\t\t\t\t\tcombinator: (oldMutation, newMutation) => newMutation,\n\t\t\t\t};\n\t\t\t\tlet currentWildcard = '';\n\t\t\t\tfor (const part of parts) {\n\t\t\t\t\tif (options.mutations[currentWildcard + '*']) {\n\t\t\t\t\t\tObject.assign(\n\t\t\t\t\t\t\tmutationProperties,\n\t\t\t\t\t\t\toptions.mutations[currentWildcard + '*']\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tcurrentWildcard += part + '/';\n\t\t\t\t}\n\t\t\t\tif (options.mutations[name]) {\n\t\t\t\t\tObject.assign(mutationProperties, options.mutations[name]);\n\t\t\t\t}\n\t\t\t\tmutationProperiesCache[name] = mutationProperties;\n\t\t\t}\n\t\t\treturn mutationProperiesCache[name];\n\t\t}\n\t},\n};\n\n/**\n * @callback transactionCallback\n * @async\n */\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{attrs:{\"id\":\"container\"}},[_c('render',{ref:\"render\",attrs:{\"canvasWidth\":_vm.canvasWidth,\"canvasHeight\":_vm.canvasHeight}})],1),_c('message-console'),_c('tool-box',{on:{\"show-prev-render\":_vm.drawLastDownload,\"download\":function($event){return _vm.$refs.render.download()},\"show-dialog\":_vm.showDialog,\"show-expression-dialog\":_vm.showExpressionDialog}}),_c('keep-alive',[(_vm.dialogVisable)?_c('modal-dialog',{ref:\"dialog\",on:{\"leave\":function($event){_vm.dialogVisable = false}}},[_c('single-box',{ref:\"packDialog\",on:{\"leave\":function($event){_vm.dialogVisable = false}}})],1):_vm._e()],1),(_vm.expressionBuilderVisible)?_c('modal-dialog',{ref:\"dialog\",on:{\"leave\":function($event){_vm.expressionBuilderVisible = false}}},[_c('expression-builder',{attrs:{\"character\":_vm.expressionBuilderCharacter,\"initHeadGroup\":_vm.expressionBuilderHeadGroup},on:{\"leave\":function($event){_vm.expressionBuilderVisible = false}}})],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ vertical: _vm.vertical },attrs:{\"id\":\"panels\"}},[_c('div',{attrs:{\"id\":\"toolbar\"}},[_c('button',{class:{ active: _vm.panel === 'add' },attrs:{\"title\":\"Add new objects to the scene\"},on:{\"click\":function($event){return _vm.setPanel('add')}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"add_box\")])]),_c('button',{class:{ active: _vm.panel === 'backgrounds' },attrs:{\"title\":\"Change the current background\"},on:{\"click\":function($event){return _vm.setPanel('backgrounds')}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"panorama\")])]),_c('button',{class:{ active: _vm.panel === 'panels' },attrs:{\"title\":\"Panels\"},on:{\"click\":function($event){return _vm.setPanel('panels')}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"view_module\")])]),_c('button',{class:{ active: _vm.panel === 'settings' },attrs:{\"title\":\"Settings\"},on:{\"click\":function($event){return _vm.setPanel('settings')}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"settings_applications\")])])]),(_vm.panel === 'settings')?_c('settings-panel'):(_vm.panel === 'packs')?_c('content-packs-panel'):(_vm.panel === 'backgrounds')?_c('backgrounds-panel',{on:{\"show-dialog\":function($event){return _vm.$emit('show-dialog', $event)}}}):(_vm.panel === 'help_credits')?_c('credits-panel'):(_vm.panel === 'character')?_c('character-panel',{on:{\"show-dialog\":function($event){return _vm.$emit('show-dialog', $event)},\"show-expression-dialog\":function($event){return _vm.$emit('show-expression-dialog', $event)}}}):(_vm.panel === 'sprite')?_c('sprite-panel'):(_vm.panel === 'textBox')?_c('text-box-panel'):(_vm.panel === 'choice')?_c('choice-panel'):(_vm.panel === 'panels')?_c('panels-panel'):(_vm.panel === 'notification')?_c('notification-panel'):(_vm.panel === 'poem')?_c('poem-panel'):_c('add-panel',{on:{\"show-dialog\":function($event){return _vm.$emit('show-dialog', $event)}}}),_c('div',{attrs:{\"id\":\"toolbar-end\"}},[_c('button',{class:{ active: _vm.panel === 'help_credits' },attrs:{\"title\":\"Help & Credits\"},on:{\"click\":function($event){return _vm.setPanel('help_credits')}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"help\")])]),_c('button',{class:{ active: _vm.panel === 'packs' },attrs:{\"title\":\"Content packs\"},on:{\"click\":function($event){return _vm.$emit('show-dialog')}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"extension\")])]),_c('button',{attrs:{\"title\":\"Show last downloaded panel\",\"disabled\":!_vm.hasPrevRender},on:{\"click\":function($event){return _vm.$emit('show-prev-render')}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"flip_to_back\")])]),_c('button',{attrs:{\"title\":\"Take a screenshot of the current scene\"},on:{\"click\":function($event){return _vm.$emit('download')}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"photo_camera\")])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\"},[_c('h1',[_vm._v(\"Settings\")]),(_vm.lqAllowed)?_c('toggle',{attrs:{\"label\":\"Low quality preview?\",\"title\":\"Reduces the quality of the preview images to speed up the user experience and consume less data. Does not effect final render.\"},model:{value:(_vm.lqRendering),callback:function ($$v) {_vm.lqRendering=$$v},expression:\"lqRendering\"}}):_vm._e(),_c('toggle',{attrs:{\"label\":\"NSFW Mode?\"},model:{value:(_vm.nsfw),callback:function ($$v) {_vm.nsfw=$$v},expression:\"nsfw\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { Component, Watch, Mixins } from 'vue-property-decorator';\nimport { State } from 'vuex-class-decorator';\nimport { VerticalScrollRedirect } from '@/components/vertical-scroll-redirect';\n\n@Component({})\nexport class PanelMixin extends Mixins(VerticalScrollRedirect) {\n\t@State('vertical', { namespace: 'ui' }) private readonly vertical!: boolean;\n\n\tpublic mounted() {\n\t\tthis.updateVertical();\n\t\tthis.$el.addEventListener(\n\t\t\t'wheel',\n\t\t\te => {\n\t\t\t\tif (!this.vertical) this.verticalScrollRedirect(e as WheelEvent);\n\t\t\t},\n\t\t\t{\n\t\t\t\tpassive: true,\n\t\t\t}\n\t\t);\n\t}\n\n\t@Watch('vertical')\n\tprivate updateVertical() {\n\t\tif (!this.$el) return;\n\t\tif (this.vertical) {\n\t\t\tthis.$el.classList.add('vertical');\n\t\t} else {\n\t\t\tthis.$el.classList.remove('vertical');\n\t\t}\n\t}\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch, Mixins } from 'vue-property-decorator';\nimport { TextBox } from '@/renderables/textbox';\nimport Toggle from '@/components/toggle.vue';\nimport { State } from 'vuex-class-decorator';\nimport { PanelMixin } from './panelMixin';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport { IRemovePacksAction, IRootState } from '@/store';\nimport { Store } from 'vuex';\nimport environment from '@/environments/environment';\n\nconst nsfwPacks = {\n\t'dddg.buildin.backgrounds.nsfw': `${process.env.BASE_URL}packs/buildin.base.backgrounds.nsfw.json`,\n\t'dddg.buildin.sayori.nsfw': `${process.env.BASE_URL}packs/buildin.base.sayori.nsfw.json`,\n\t'dddg.buildin.base.natsuki.nsfw': `${process.env.BASE_URL}packs/buildin.base.natsuki.nsfw.json`,\n\t'dddg.buildin.yuri.nsfw': `${process.env.BASE_URL}packs/buildin.base.yuri.nsfw.json`,\n};\n\nconst names = new Set(Object.keys(nsfwPacks));\nconst paths = Object.values(nsfwPacks);\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t},\n})\nexport default class SettingsPanel extends Mixins(PanelMixin) {\n\tpublic $store!: Store<IRootState>;\n\n\tprivate vuexHistory!: IHistorySupport;\n\n\tprivate get lqRendering(): boolean {\n\t\treturn this.$store.state.ui.lqRendering;\n\t}\n\tprivate set lqRendering(lqRendering: boolean) {\n\t\tthis.vuexHistory.transaction(async () => {\n\t\t\tawait this.$store.commit('ui/setLqRendering', lqRendering);\n\t\t});\n\t}\n\n\tprivate get lqAllowed(): boolean {\n\t\treturn environment.allowLQ;\n\t}\n\n\tprivate get nsfw(): boolean {\n\t\treturn !!this.$store.state.content.contentPacks\n\t\t\t.map(pack => pack.packId)\n\t\t\t.filter(packId => !!packId)\n\t\t\t.find(packId => names.has(packId!));\n\t}\n\n\tprivate set nsfw(value: boolean) {\n\t\tthis.vuexHistory.transaction(async () => {\n\t\t\tif (value) {\n\t\t\t\tawait this.$store.dispatch('content/loadContentPacks', paths);\n\t\t\t} else {\n\t\t\t\tawait this.$store.dispatch('removePacks', {\n\t\t\t\t\tpacks: names,\n\t\t\t\t} as IRemovePacksAction);\n\t\t\t}\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./settings.vue?vue&type=template&id=500b662e&scoped=true&\"\nimport script from \"./settings.vue?vue&type=script&lang=ts&\"\nexport * from \"./settings.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./settings.vue?vue&type=style&index=0&id=500b662e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"500b662e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isWebPSupported !== undefined)?_c('div',{staticClass:\"panel\",on:{\"dragenter\":_vm.showDropTarget,\"mouseleave\":_vm.hideDropTarget}},[_c('drop-target',{ref:\"spriteDt\",staticClass:\"drop-target\",on:{\"drop\":_vm.addCustomSpriteFile}},[_vm._v(\"Drop here to add as a new sprite\")]),_c('h1',[_vm._v(\"Add\")]),_c('div',{class:{ 'group-selector': true, vertical: _vm.vertical }},[_c('button',{class:{ active: _vm.group === 'characters' },on:{\"click\":function($event){_vm.group = 'characters'}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"emoji_people\")]),_vm._v(\" Characters \")]),_c('button',{class:{ active: _vm.group === 'sprites' },on:{\"click\":function($event){_vm.group = 'sprites'}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"change_history\")]),_vm._v(\" Sprites \")]),_c('button',{class:{ active: _vm.group === 'ui' },on:{\"click\":function($event){_vm.group = 'ui'}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"view_quilt\")]),_vm._v(\" UI \")])]),_c('div',{class:{ 'item-grid': true, vertical: _vm.vertical }},[(_vm.group === 'characters')?[_vm._l((_vm.characters),function(character){return _c('div',{key:character.id,staticClass:\"character\",attrs:{\"title\":character.label},on:{\"click\":function($event){_vm.onChosen(character.id.toLowerCase())}}},[_c('img',{attrs:{\"src\":_vm.assetPath(character),\"alt\":character.label}})])}),_c('div',{staticClass:\"btn custom-sprite\",on:{\"click\":function($event){return _vm.$emit('show-dialog', 'type: Characters')}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"extension\")]),_vm._v(\" Search in content packs \")])]:_vm._e(),(_vm.group === 'sprites')?[_vm._l((_vm.sprites),function(sprite){return _c('div',{key:sprite.label,staticClass:\"sprite\",style:({ background: _vm.assetSpriteBackground(sprite) }),attrs:{\"title\":sprite.label},on:{\"click\":function($event){return _vm.addSpriteToScene(sprite)}}},[_vm._v(\" \"+_vm._s(sprite.label)+\" \")])}),_c('button',{staticClass:\"btn custom-sprite\",on:{\"click\":function($event){return _vm.$refs.spriteUpload.click()}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"publish\")]),_vm._v(\" Upload new sprite \"),_c('input',{ref:\"spriteUpload\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.onSpriteFileUpload}})]),_c('button',{on:{\"click\":_vm.uploadFromURL}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"insert_link\")]),_vm._v(\" New sprite from URL \")]),_c('button',{on:{\"click\":function($event){return _vm.$emit('show-dialog', 'type: Sprites')}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"extension\")]),_vm._v(\" Search in content packs \")])]:_vm._e(),(_vm.group === 'ui')?[_c('button',{on:{\"click\":_vm.addTextBox}},[_vm._v(\"Textbox\")]),_c('button',{on:{\"click\":_vm.addPoem}},[_vm._v(\"Poem\")]),_c('button',{on:{\"click\":_vm.addDialog}},[_vm._v(\"Notification\")]),_c('button',{on:{\"click\":_vm.addChoice}},[_vm._v(\"Choice\")]),_c('button',{on:{\"click\":_vm.addConsole}},[_vm._v(\"Console\")])]:_vm._e()],2)],1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Mixins } from 'vue-property-decorator';\nimport {\n\tisWebPSupported,\n\tregisterAsset,\n\tregisterAssetWithURL,\n} from '@/asset-manager';\nimport { ICreateCharacterAction } from '@/store/objectTypes/characters';\nimport { ICreateTextBoxAction } from '@/store/objectTypes/textbox';\nimport { IAsset, ReplaceContentPackAction } from '@/store/content';\nimport {\n\tCharacter,\n\tContentPack,\n\tSprite,\n} from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport { PanelMixin } from './panelMixin';\nimport { State } from 'vuex-class-decorator';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport DropTarget from '../drop-target.vue';\nimport { ICreateSpriteAction } from '@/store/objectTypes/sprite';\nimport { ICreateChoicesAction } from '../../../store/objectTypes/choices';\nimport { ICreateNotificationAction } from '../../../store/objectTypes/notification';\nimport { ICreatePoemAction } from '../../../store/objectTypes/poem';\nimport environment from '@/environments/environment';\n\nconst uploadedSpritesPack: ContentPack<string> = {\n\tpackId: 'dddg.buildin.uploadedSprites',\n\tpackCredits: [''],\n\tdependencies: [],\n\tcharacters: [],\n\tfonts: [],\n\tsprites: [],\n\tpoemStyles: [],\n\tpoemBackgrounds: [],\n\tbackgrounds: [],\n\tcolors: [],\n};\n\n@Component({\n\tcomponents: { DropTarget },\n})\nexport default class AddPanel extends Mixins(PanelMixin) {\n\tpublic $store!: Store<IRootState>;\n\tprivate isWebPSupported: boolean | null = null;\n\tprivate customAssetCount = 0;\n\tprivate group: 'characters' | 'sprites' | 'ui' = 'characters';\n\n\tprivate vuexHistory!: IHistorySupport;\n\n\tprivate async created() {\n\t\tthis.isWebPSupported = await isWebPSupported();\n\t}\n\n\tprivate get characters(): Array<Character<IAsset>> {\n\t\treturn this.$store.state.content.current.characters;\n\t}\n\n\tprivate get sprites(): Array<Sprite<IAsset>> {\n\t\treturn this.$store.state.content.current.sprites;\n\t}\n\n\tprivate assetSpriteBackground(sprite: Sprite<IAsset>) {\n\t\treturn sprite.variants[0].map(variant => `url('${variant.lq}')`).join(',');\n\t}\n\n\tprivate assetPath(character: Character<IAsset>) {\n\t\treturn character.chibi\n\t\t\t? environment.allowLQ\n\t\t\t\t? character.chibi.lq\n\t\t\t\t: character.chibi.hq\n\t\t\t: '';\n\t}\n\n\tprivate showDropTarget(e: DragEvent) {\n\t\tif (!e.dataTransfer) return;\n\t\te.dataTransfer.effectAllowed = 'none';\n\t\tif (\n\t\t\t!Array.from(e.dataTransfer.items).find(item =>\n\t\t\t\titem.type.match(/^image.*$/)\n\t\t\t)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\te.dataTransfer.effectAllowed = 'link';\n\t\tif (this.group === 'sprites') {\n\t\t\t(this.$refs.spriteDt as DropTarget).show();\n\t\t}\n\t}\n\n\tprivate hideDropTarget() {\n\t\tif (this.group === 'sprites') {\n\t\t\t(this.$refs.spriteDt as DropTarget).hide();\n\t\t}\n\t}\n\n\tprivate onSpriteFileUpload(e: Event) {\n\t\tconst uploadInput = this.$refs.spriteUpload as HTMLInputElement;\n\t\tif (!uploadInput.files) return;\n\t\tfor (const file of uploadInput.files) {\n\t\t\tthis.addCustomSpriteFile(file);\n\t\t}\n\t}\n\n\tprivate async uploadFromURL() {\n\t\tconst url = prompt('Enter the URL of the image');\n\t\tif (!url) return;\n\t\tconst lastSegment = url.split('/').slice(-1)[0];\n\t\tthis.addNewCustomSprite(lastSegment, url);\n\t}\n\n\tprivate async addSpriteToScene(sprite: Sprite<IAsset>) {\n\t\tthis.vuexHistory.transaction(async () => {\n\t\t\tawait this.$store.dispatch('objects/createSprite', {\n\t\t\t\tassets: sprite.variants[0],\n\t\t\t} as ICreateSpriteAction);\n\t\t});\n\t}\n\n\tprivate addTextBox() {\n\t\tthis.vuexHistory.transaction(async () => {\n\t\t\tthis.$store.dispatch('objects/createTextBox', {} as ICreateTextBoxAction);\n\t\t});\n\t}\n\n\tprivate addChoice() {\n\t\tthis.vuexHistory.transaction(async () => {\n\t\t\tthis.$store.dispatch('objects/createChoice', {} as ICreateChoicesAction);\n\t\t});\n\t}\n\n\tprivate addDialog() {\n\t\tthis.vuexHistory.transaction(async () => {\n\t\t\tthis.$store.dispatch(\n\t\t\t\t'objects/createNotification',\n\t\t\t\t{} as ICreateNotificationAction\n\t\t\t);\n\t\t});\n\t}\n\n\tprivate addPoem() {\n\t\tthis.vuexHistory.transaction(async () => {\n\t\t\tthis.$store.dispatch('objects/createPoem', {} as ICreatePoemAction);\n\t\t});\n\t}\n\n\tprivate addConsole() {\n\t\tthis.vuexHistory.transaction(async () => {\n\t\t\tthis.$store.dispatch('objects/createConsole', {} as ICreatePoemAction);\n\t\t});\n\t}\n\n\tprivate onChosen(id: string) {\n\t\tthis.vuexHistory.transaction(async () => {\n\t\t\tthis.$store.dispatch('objects/createCharacters', {\n\t\t\t\tcharacterType: id,\n\t\t\t} as ICreateCharacterAction);\n\t\t});\n\t}\n\n\tprivate addCustomSpriteFile(file: File) {\n\t\tconst url = URL.createObjectURL(file);\n\t\tthis.addNewCustomSprite(file.name, url);\n\t}\n\n\tprivate addNewCustomSprite(label: string, url: string) {\n\t\tuploadedSpritesPack.sprites.push({\n\t\t\tid: url,\n\t\t\tlabel,\n\t\t\tvariants: [[url]],\n\t\t});\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('content/replaceContentPack', {\n\t\t\t\tcontentPack: uploadedSpritesPack,\n\t\t\t\tprocessed: false,\n\t\t\t} as ReplaceContentPackAction);\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./add.vue?vue&type=template&id=6fcc72ae&scoped=true&\"\nimport script from \"./add.vue?vue&type=script&lang=ts&\"\nexport * from \"./add.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./add.vue?vue&type=style&index=0&id=6fcc72ae&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6fcc72ae\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\"},[_c('h1',[_vm._v(_vm._s(_vm.label))]),(_vm.panelForParts)?_c('parts',{attrs:{\"character\":_vm.character,\"part\":_vm.panelForParts},on:{\"leave\":function($event){_vm.panelForParts = null},\"show-dialog\":function($event){return _vm.$emit('show-dialog', $event)},\"show-expression-dialog\":function($event){return _vm.$emit('show-expression-dialog', $event)}}}):[(_vm.hasMultiplePoses || _vm.parts.length > 0)?_c('fieldset',[_c('legend',[_vm._v(\"Pose:\")]),_c('table',[_c('tbody',[(_vm.hasMultipleStyles)?_c('tr',[_c('td',{staticClass:\"arrow-col\"},[_c('button',{on:{\"click\":function($event){return _vm.seekStyle(-1)}}},[_vm._v(\"<\")])]),_c('td',[_c('button',{staticClass:\"middle-button\",on:{\"click\":function($event){_vm.panelForParts = 'style'}}},[_vm._v(\" Style \")])]),_c('td',{staticClass:\"arrow-col\"},[_c('button',{on:{\"click\":function($event){return _vm.seekStyle(1)}}},[_vm._v(\">\")])])]):_vm._e(),(_vm.hasMultiplePoses)?_c('tr',[_c('td',{staticClass:\"arrow-col\"},[_c('button',{on:{\"click\":function($event){return _vm.seekPose(-1)}}},[_vm._v(\"<\")])]),_c('td',[_c('button',{staticClass:\"middle-button\",on:{\"click\":function($event){_vm.panelForParts = 'pose'}}},[_vm._v(\" Pose \")])]),_c('td',{staticClass:\"arrow-col\"},[_c('button',{on:{\"click\":function($event){return _vm.seekPose(1)}}},[_vm._v(\">\")])])]):_vm._e(),_vm._l((_vm.parts),function(part){return _c('tr',{key:part},[_c('td',{staticClass:\"arrow-col\"},[_c('button',{on:{\"click\":function($event){return _vm.seekPart(part, -1)}}},[_vm._v(\"<\")])]),_c('td',[_c('button',{staticClass:\"middle-button\",on:{\"click\":function($event){_vm.panelForParts = part}}},[_vm._v(\" \"+_vm._s(_vm.captialize(part))+\" \")])]),_c('td',{staticClass:\"arrow-col\"},[_c('button',{on:{\"click\":function($event){return _vm.seekPart(part, 1)}}},[_vm._v(\">\")])])])})],2)])]):_vm._e(),_c('position-and-size',{attrs:{\"obj\":_vm.character}}),_c('layers',{attrs:{\"obj\":_vm.character}}),_c('opacity',{attrs:{\"obj\":_vm.character}}),_c('toggle',{attrs:{\"label\":\"Close up?\"},model:{value:(_vm.closeUp),callback:function ($$v) {_vm.closeUp=$$v},expression:\"closeUp\"}}),_c('toggle',{attrs:{\"label\":\"Flip?\"},model:{value:(_vm.flip),callback:function ($$v) {_vm.flip=$$v},expression:\"flip\"}}),_c('delete',{attrs:{\"obj\":_vm.character}})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('fieldset',[_c('legend',[_vm._v(\"Position\"+_vm._s(_vm.allowSize ? '/Size' : '')+\":\")]),_c('table',[_c('tr',[_c('td',{attrs:{\"colspan\":\"2\"}},[(_vm.allowStepMove)?_c('toggle',{attrs:{\"label\":\"Move freely?\"},model:{value:(_vm.freeMove),callback:function ($$v) {_vm.freeMove=$$v},expression:\"freeMove\"}}):_vm._e()],1)]),(_vm.allowStepMove && !_vm.freeMove)?_c('tr',[_c('td',{attrs:{\"colspan\":\"2\"}},[_c('table',[_c('tr',[_c('td',{staticClass:\"arrow-col\"},[_c('button',{attrs:{\"disabled\":_vm.isFirstPos},on:{\"click\":function($event){--_vm.pos}}},[_vm._v(\"<\")])]),_c('td',[_c('select',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.pos),expression:\"pos\",modifiers:{\"number\":true}}],attrs:{\"id\":\"current_talking\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return _vm._n(val)}); _vm.pos=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.positionNames),function(val,key){return _c('option',{key:key,domProps:{\"value\":key}},[_vm._v(_vm._s(val))])}),0)]),_c('td',{staticClass:\"arrow-col\"},[_c('button',{attrs:{\"disabled\":_vm.isLastPos},on:{\"click\":function($event){++_vm.pos}}},[_vm._v(\">\")])])])])])]):[_c('tr',[_vm._m(0),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.x),expression:\"x\",modifiers:{\"number\":true}}],attrs:{\"id\":\"sprite_x\",\"type\":\"number\"},domProps:{\"value\":(_vm.x)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.x=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})])]),_c('tr',[_vm._m(1),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.y),expression:\"y\",modifiers:{\"number\":true}}],attrs:{\"id\":\"sprite_y\",\"type\":\"number\"},domProps:{\"value\":(_vm.y)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.y=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})])])],(_vm.allowSize)?[_c('tr',[_vm._m(2),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.width),expression:\"width\",modifiers:{\"number\":true}}],attrs:{\"id\":\"sprite_w\",\"min\":\"0\",\"type\":\"number\"},domProps:{\"value\":(_vm.width)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.width=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})])]),_c('tr',[_vm._m(3),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.height),expression:\"height\",modifiers:{\"number\":true}}],attrs:{\"id\":\"sprite_h\",\"min\":\"0\",\"type\":\"number\"},domProps:{\"value\":(_vm.height)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.height=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})])]),_c('tr',[_c('td',{attrs:{\"colspan\":\"2\"}},[_c('toggle',{attrs:{\"label\":\"Lock ratio?\"},model:{value:(_vm.preserveRatio),callback:function ($$v) {_vm.preserveRatio=$$v},expression:\"preserveRatio\"}})],1)])]:_vm._e()],2)])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('td',[_c('label',{attrs:{\"for\":\"sprite_x\"}},[_vm._v(\"X:\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('td',[_c('label',{attrs:{\"for\":\"sprite_y\"}},[_vm._v(\"Y:\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('td',[_c('label',{attrs:{\"for\":\"sprite_w\"}},[_vm._v(\"Width:\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('td',[_c('label',{attrs:{\"for\":\"sprite_h\"}},[_vm._v(\"Height:\")])])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport Toggle from '@/components/toggle.vue';\nimport { IRenderable } from '@/renderables/renderable';\nimport { positions, characterPositions } from '@/constants/base';\nimport {\n\tclosestCharacterSlot,\n\tISetFreeMoveMutation,\n\tICharacter,\n} from '@/store/objectTypes/characters';\nimport { State } from 'vuex-class-decorator';\nimport {\n\tISetPositionAction,\n\tISetObjectPositionMutation,\n\tIObject,\n\tISetHeightAction,\n\tISetWidthAction,\n\tISetRatioAction,\n} from '@/store/objects';\nimport { ISprite } from '@/store/objectTypes/sprite';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport { ITextBox } from '@/store/objectTypes/textbox';\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t},\n})\nexport default class PositionAndSize extends Vue {\n\t@Prop({ required: true })\n\tprivate readonly obj!: IObject;\n\n\tprivate vuexHistory!: IHistorySupport;\n\n\tprivate get allowSize() {\n\t\tconst obj = this.obj;\n\t\tif (\n\t\t\tthis.obj.type === 'textBox' &&\n\t\t\t(this.obj as ITextBox).style !== 'custom'\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this.obj.type === 'character' && !(this.obj as ICharacter).freeMove) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tprivate get allowStepMove() {\n\t\treturn 'freeMove' in this.obj;\n\t}\n\n\tprivate get freeMove() {\n\t\treturn (this.obj as ICharacter).freeMove;\n\t}\n\n\tprivate set freeMove(val: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setFreeMove', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\tfreeMove: val,\n\t\t\t} as ISetFreeMoveMutation);\n\t\t});\n\t}\n\n\tprivate get positionNames(): string[] {\n\t\treturn positions;\n\t}\n\n\tprivate get pos(): number {\n\t\treturn closestCharacterSlot(this.obj.x);\n\t}\n\n\tprivate set pos(value: number) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/setPosition', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\tx: characterPositions[value],\n\t\t\t\ty: this.obj.y,\n\t\t\t} as ISetPositionAction);\n\t\t});\n\t}\n\n\tprivate get isFirstPos(): boolean {\n\t\treturn this.pos === 0;\n\t}\n\n\tprivate get isLastPos(): boolean {\n\t\treturn this.pos === positions.length - 1;\n\t}\n\n\tprivate get x(): number {\n\t\treturn this.obj.x;\n\t}\n\n\tprivate set x(val: number) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/setPosition', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\tx: val,\n\t\t\t\ty: this.y,\n\t\t\t} as ISetObjectPositionMutation);\n\t\t});\n\t}\n\n\tprivate get y(): number {\n\t\treturn this.obj.y;\n\t}\n\n\tprivate set y(val: number) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/setPosition', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\tx: this.x,\n\t\t\t\ty: val,\n\t\t\t} as ISetObjectPositionMutation);\n\t\t});\n\t}\n\n\tprivate get height(): number {\n\t\treturn (this.obj as ISprite).height;\n\t}\n\n\tprivate set height(val: number) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/setHeight', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\theight: val,\n\t\t\t} as ISetHeightAction);\n\t\t});\n\t}\n\n\tprivate get width(): number {\n\t\treturn (this.obj as ISprite).width;\n\t}\n\n\tprivate set width(val: number) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/setWidth', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\twidth: val,\n\t\t\t} as ISetWidthAction);\n\t\t});\n\t}\n\n\tprivate get preserveRatio(): boolean {\n\t\treturn (this.obj as ISprite).preserveRatio;\n\t}\n\n\tprivate set preserveRatio(val: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/setPreserveRatio', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\tpreserveRatio: val,\n\t\t\t} as ISetRatioAction);\n\t\t});\n\t}\n}\n\nexport interface MoveObject {\n\tobject: IRenderable;\n\tmove: 'Forward' | 'Backward' | 'Back' | 'Front' | 'Delete';\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./positionAndSize.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./positionAndSize.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./positionAndSize.vue?vue&type=template&id=734fec1a&scoped=true&\"\nimport script from \"./positionAndSize.vue?vue&type=script&lang=ts&\"\nexport * from \"./positionAndSize.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./positionAndSize.vue?vue&type=style&index=0&id=734fec1a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"734fec1a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('fieldset',{attrs:{\"id\":\"layerfs\"}},[_c('legend',[_vm._v(\"Layer:\")]),_c('table',[_c('tbody',[_c('tr',[_c('td',[_c('button',{attrs:{\"title\":\"Move to back\"},on:{\"click\":function($event){return _vm.shiftLayer(-Infinity)}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"vertical_align_bottom\")])])]),_c('td',[_c('button',{attrs:{\"title\":\"Move backwards\"},on:{\"click\":function($event){return _vm.shiftLayer(-1)}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"arrow_downward\")])])]),_c('td',[_c('button',{attrs:{\"title\":\"Move forwards\"},on:{\"click\":function($event){return _vm.shiftLayer(1)}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"arrow_upward\")])])]),_c('td',[_c('button',{attrs:{\"title\":\"Move to front\"},on:{\"click\":function($event){return _vm.shiftLayer(Infinity)}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"vertical_align_top\")])])])])])]),_c('toggle',{attrs:{\"value\":_vm.obj.onTop,\"label\":\"In front?\"},on:{\"input\":_vm.setInFront}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport Toggle from '@/components/toggle.vue';\nimport { ICommand } from '@/eventbus/command';\nimport eventBus from '@/eventbus/event-bus';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport {\n\tIObjectSetOnTopAction,\n\tIObjectShiftLayerAction,\n\tIObject,\n} from '@/store/objects';\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t},\n})\nexport default class Layers extends Vue {\n\t@Prop({ required: true }) private obj!: IObject;\n\n\tprivate vuexHistory!: IHistorySupport;\n\n\tprivate shiftLayer(delta: number) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/shiftLayer', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\tdelta,\n\t\t\t} as IObjectShiftLayerAction);\n\t\t});\n\t}\n\n\tprivate setInFront(newValue: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/setOnTop', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\tonTop: newValue,\n\t\t\t} as IObjectSetOnTopAction);\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layers.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./layers.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./layers.vue?vue&type=template&id=34f3a848&scoped=true&\"\nimport script from \"./layers.vue?vue&type=script&lang=ts&\"\nexport * from \"./layers.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./layers.vue?vue&type=style&index=0&id=34f3a848&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"34f3a848\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('table',[_c('tr',[_vm._m(0),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.opacity),expression:\"opacity\",modifiers:{\"number\":true}}],attrs:{\"type\":\"number\",\"max\":\"100\",\"min\":\"0\",\"id\":\"characterOpacity\"},domProps:{\"value\":(_vm.opacity)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.opacity=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('td',[_c('label',{attrs:{\"for\":\"characterOpacity\"}},[_vm._v(\"Opacity:\")])])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport { ICommand } from '@/eventbus/command';\nimport eventBus from '@/eventbus/event-bus';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport { IObject, ISetObjectOpacityMutation } from '@/store/objects';\n\n@Component({})\nexport default class Opacity extends Vue {\n\t@Prop({ required: true }) private obj!: IObject;\n\n\tprivate vuexHistory!: IHistorySupport;\n\n\tprivate get opacity() {\n\t\treturn this.obj.opacity;\n\t}\n\n\tprivate set opacity(opacity: number) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setOpacity', {\n\t\t\t\tid: this.obj.id,\n\t\t\t\topacity,\n\t\t\t} as ISetObjectOpacityMutation);\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./opacity.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./opacity.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./opacity.vue?vue&type=template&id=28c7d1e4&scoped=true&\"\nimport script from \"./opacity.vue?vue&type=script&lang=ts&\"\nexport * from \"./opacity.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./opacity.vue?vue&type=style&index=0&id=28c7d1e4&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"28c7d1e4\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('button',{on:{\"click\":_vm.onClick}},[_vm._v(\"Delete\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport { IObject, IRemoveObjectAction } from '@/store/objects';\n\n@Component({})\nexport default class Delete extends Vue {\n\t@Prop({ required: true }) private obj!: IObject;\n\n\tprivate vuexHistory!: IHistorySupport;\n\n\tprivate onClick() {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/removeObject', {\n\t\t\t\tid: this.obj.id,\n\t\t\t} as IRemoveObjectAction);\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./delete.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./delete.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./delete.vue?vue&type=template&id=5b33f32e&\"\nimport script from \"./delete.vue?vue&type=script&lang=ts&\"\nexport * from \"./delete.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ partList: true, vertical: _vm.vertical }},[_c('button',{on:{\"click\":function($event){return _vm.$emit('leave')}}},[_vm._v(\"Back\")]),(_vm.part === 'head')?_c('button',{staticClass:\"icon-button\",on:{\"click\":function($event){return _vm.$emit('show-expression-dialog', { character: _vm.character.characterType })}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"extension\")]),_c('span',{staticClass:\"text-block\"},[_vm._v(\"Create new expressions\")])]):_vm._e(),(_vm.part === 'head')?_c('button',{staticClass:\"icon-button\",on:{\"click\":function($event){return _vm.$emit('show-dialog', 'type: Expressions character: ' + _vm.charData.label)}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"extension\")]),_c('span',{staticClass:\"text-block\"},[_vm._v(\"Search in content packs\")])]):(_vm.part === 'style')?_c('button',{staticClass:\"icon-button\",on:{\"click\":function($event){return _vm.$emit('show-dialog', 'type: Styles character: ' + _vm.charData.label)}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"extension\")]),_c('span',[_vm._v(\"Search in content packs\")])]):_c('button',{staticClass:\"icon-button\",on:{\"click\":function($event){return _vm.$emit('show-dialog', 'type: Poses character: ' + _vm.charData.label)}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"extension\")]),_c('span',[_vm._v(\"Search in content packs\")])]),_vm._l((_vm.parts),function(part,index){return _c('part-button',{key:index,attrs:{\"value\":index,\"part\":part},on:{\"click\":function($event){_vm.choose(index);\n\t\t\t_vm.$emit('leave');}}})}),_vm._l((_vm.styleComponents),function(styleComponent){return _c('fieldset',{key:styleComponent.name},[_c('legend',[_vm._v(_vm._s(styleComponent.label))]),_vm._l((styleComponent.buttons),function(button,id){return _c('part-button',{key:id,attrs:{\"size\":130,\"value\":id,\"part\":button},on:{\"click\":function($event){return _vm.choose_component(styleComponent.name, id)}}})})],2)})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ part: true, active: false /*background === value*/ },style:(_vm.style),on:{\"click\":function($event){return _vm.$emit('click')}}})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport { getAAsset, getAsset } from '@/asset-manager';\nimport environment from '@/environments/environment';\nimport { ErrorAsset } from '@/models/error-asset';\nimport { IAsset } from '@/store/content';\nimport { DeepReadonly } from '../../../../util/readonly';\n\nexport interface IPartButtonImage {\n\timages: IPartImage[];\n\tsize: DeepReadonly<[number, number]>;\n\toffset: DeepReadonly<[number, number]>;\n}\n\nexport interface IPartImage {\n\tasset: IAsset | string;\n\toffset: DeepReadonly<[number, number]>;\n}\n\nconst spriteSize = 960;\n\n@Component({\n\tcomponents: {},\n})\nexport default class PartButton extends Vue {\n\t@Prop({ required: true }) private readonly part!: IPartButtonImage;\n\t@Prop({ required: true }) private readonly value!: number;\n\t@Prop({ default: 150, type: Number })\n\tprivate readonly size!: number;\n\n\tprivate lookups: Array<HTMLImageElement | ErrorAsset | null> = [];\n\tprivate loaded = false;\n\n\tprivate async created() {\n\t\tthis.lookups = await Promise.all(\n\t\t\tthis.part.images.map((image) => {\n\t\t\t\tif (typeof image.asset === 'string') {\n\t\t\t\t\treturn getAsset(image.asset, false);\n\t\t\t\t} else {\n\t\t\t\t\treturn getAAsset(image.asset, false);\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n\n\tprivate get scaleX(): number {\n\t\treturn this.size / this.part.size[0];\n\t}\n\n\tprivate get scaleY(): number {\n\t\treturn this.size / this.part.size[1];\n\t}\n\n\tprivate get backgroundSize(): string {\n\t\treturn `${Math.floor(spriteSize * this.scaleX)}px ${Math.floor(\n\t\t\tspriteSize * this.scaleY\n\t\t)}px`;\n\t}\n\n\tprivate get backgroundPosition(): string {\n\t\treturn (\n\t\t\t`${Math.floor(this.part.offset[0] * -this.scaleX)}px ` +\n\t\t\t`${Math.floor(this.part.offset[1] * -this.scaleY)}px`\n\t\t);\n\t}\n\n\tprivate get style(): { [id: string]: string } {\n\t\tconst images = (this.lookups.filter(\n\t\t\t(lookup) => lookup instanceof HTMLImageElement\n\t\t) as HTMLImageElement[]).map(\n\t\t\t(lookup) => `url('${lookup.src.replace(\"'\", \"\\\\'\")}')`\n\t\t);\n\t\treturn {\n\t\t\tbackgroundImage: images.join(','),\n\t\t\theight: this.size + 'px',\n\t\t\twidth: this.size + 'px',\n\t\t\tbackgroundPosition: this.backgroundPosition,\n\t\t\tbackgroundSize: this.backgroundSize,\n\t\t};\n\t}\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./partButton.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./partButton.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./partButton.vue?vue&type=template&id=349a1f54&scoped=true&\"\nimport script from \"./partButton.vue?vue&type=script&lang=ts&\"\nexport * from \"./partButton.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./partButton.vue?vue&type=style&index=0&id=349a1f54&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"349a1f54\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\nimport {\n\tisWebPSupported,\n\tregisterAsset,\n\tregisterAssetWithURL,\n} from '@/asset-manager';\nimport environment from '@/environments/environment';\nimport PartButton, { IPartButtonImage, IPartImage } from './partButton.vue';\nimport {\n\tStyleComponent,\n\tPose,\n\tCharacter,\n} from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\nimport { IAsset } from '@/store/content';\nimport {\n\tgetPose,\n\tgetDataG,\n\tISeekPoseAction,\n\tISetPosePositionMutation,\n\tISetPartAction,\n\tgetData,\n\tICharacter,\n\tISetStyleAction,\n} from '@/store/objectTypes/characters';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport { State } from 'vuex-class-decorator';\nimport { DeepReadonly } from '../../../../util/readonly';\n\ninterface IPartStyleGroup {\n\tlabel: string;\n\tname: string;\n\tbuttons: { [id: string]: IPartButtonImage };\n}\n\n@Component({\n\tcomponents: {\n\t\tPartButton,\n\t},\n})\nexport default class PartsPanel extends Vue {\n\t@State('vertical', { namespace: 'ui' }) private readonly vertical!: boolean;\n\n\t@Prop({ required: true }) private character!: ICharacter;\n\t@Prop({ required: true, type: String }) private readonly part!:\n\t\t| string\n\t\t| 'pose'\n\t\t| 'style';\n\n\tprivate isWebPSupported: boolean | null = null;\n\n\tprivate vuexHistory!: IHistorySupport;\n\t/**\n\t * [styleComponentKey, styleComponentValue]\n\t */\n\tprivate stylePriorities: Array<[string, string]> = [];\n\n\tprivate get charData(): DeepReadonly<Character<IAsset>> {\n\t\treturn getData(this.$store, this.character);\n\t}\n\n\t@Watch('character')\n\tprivate updateStyleData(): void {\n\t\tconst baseStyle = this.charData.styleGroups[this.character.styleGroupId]\n\t\t\t.styles[this.character.styleId];\n\t\tthis.stylePriorities = Object.keys(baseStyle.components).map(key => [\n\t\t\tkey,\n\t\t\tbaseStyle.components[key],\n\t\t]);\n\t}\n\n\tprivate async created() {\n\t\tthis.updateStyleData();\n\t\tthis.isWebPSupported = await isWebPSupported();\n\t}\n\n\tprivate get styleComponents(): DeepReadonly<IPartStyleGroup[]> {\n\t\tif (this.part !== 'style') return [];\n\t\tconst styleComponents = this.charData.styleGroups[\n\t\t\tthis.character.styleGroupId\n\t\t];\n\t\treturn styleComponents.styleComponents.map(component => {\n\t\t\tconst buttons: IPartStyleGroup['buttons'] = {};\n\t\t\tfor (const key in component.variants) {\n\t\t\t\tif (!component.variants.hasOwnProperty(key)) continue;\n\t\t\t\tconst variant = component.variants[key];\n\t\t\t\tbuttons[key] = {\n\t\t\t\t\tsize: styleComponents.styles[0].poses[0].size,\n\t\t\t\t\toffset: [0, 0],\n\t\t\t\t\timages: [{ offset: [0, 0], asset: variant }],\n\t\t\t\t};\n\t\t\t}\n\t\t\treturn { label: component.label, name: component.id, buttons };\n\t\t});\n\t}\n\n\tprivate get parts(): { [id: number]: DeepReadonly<IPartButtonImage> } {\n\t\tconst ret: { [id: string]: DeepReadonly<IPartButtonImage> } = {};\n\t\tlet collection: DeepReadonly<IAsset[][]>;\n\t\tlet offset: DeepReadonly<IPartButtonImage['offset']>;\n\t\tlet size: DeepReadonly<IPartButtonImage['size']>;\n\t\tconst data = this.charData;\n\t\tconst currentPose = getPose(data, this.character);\n\t\tswitch (this.part) {\n\t\t\tcase 'head':\n\t\t\t\tfor (\n\t\t\t\t\tlet headKeyIdx = 0;\n\t\t\t\t\theadKeyIdx < currentPose.compatibleHeads.length;\n\t\t\t\t\t++headKeyIdx\n\t\t\t\t) {\n\t\t\t\t\tconst headKey = currentPose.compatibleHeads[headKeyIdx];\n\t\t\t\t\tconst heads = data.heads[headKey];\n\t\t\t\t\tfor (let headIdx = 0; headIdx < heads.variants.length; ++headIdx) {\n\t\t\t\t\t\tconst headImages = heads.variants[headIdx];\n\t\t\t\t\t\tret[`${headKeyIdx}_${headIdx}`] = {\n\t\t\t\t\t\t\tsize: heads.previewSize,\n\t\t\t\t\t\t\toffset: heads.previewOffset,\n\t\t\t\t\t\t\timages: headImages.map(\n\t\t\t\t\t\t\t\t(image): IPartImage => ({ asset: image, offset: [0, 0] })\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\tcase 'pose':\n\t\t\t\tconst currentStyle =\n\t\t\t\t\tdata.styleGroups[this.character.styleGroupId].styles[\n\t\t\t\t\t\tthis.character.styleId\n\t\t\t\t\t];\n\t\t\t\tfor (let poseIdx = 0; poseIdx < currentStyle.poses.length; ++poseIdx) {\n\t\t\t\t\tconst pose = currentStyle.poses[poseIdx];\n\t\t\t\t\tret[poseIdx] = this.generatePosePreview(pose);\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\tcase 'style':\n\t\t\t\tfor (const styleGroup of data.styleGroups) {\n\t\t\t\t\tret[styleGroup.id] = this.generatePosePreview(\n\t\t\t\t\t\tstyleGroup.styles[0].poses[0]\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\treturn ret;\n\n\t\t\tdefault:\n\t\t\t\tcollection = currentPose.positions[this.part];\n\t\t\t\tsize = currentPose.previewSize;\n\t\t\t\toffset = currentPose.previewOffset;\n\t\t\t\tbreak;\n\t\t}\n\t\tfor (let partIdx = 0; partIdx < collection.length; ++partIdx) {\n\t\t\tconst part = collection[partIdx];\n\t\t\tret[partIdx] = {\n\t\t\t\timages: part.map((partImage: IAsset) => ({\n\t\t\t\t\toffset: [0, 0],\n\t\t\t\t\tasset: partImage,\n\t\t\t\t})),\n\t\t\t\tsize,\n\t\t\t\toffset,\n\t\t\t};\n\t\t}\n\t\treturn ret;\n\t}\n\n\tprivate generatePosePreview(\n\t\tpose: DeepReadonly<Pose<IAsset>>\n\t): DeepReadonly<IPartButtonImage> {\n\t\tconst data = this.charData;\n\t\tconst heads = data.heads[pose.compatibleHeads[0]];\n\t\tconst head = heads ? heads.variants[0] : null;\n\t\tlet images: IAsset[] = [];\n\n\t\tfor (const command of pose.renderCommands) {\n\t\t\tswitch (command.type) {\n\t\t\t\tcase 'pose-part':\n\t\t\t\t\tconst part = pose.positions[command.part];\n\t\t\t\t\tif (!part || part.length === 0) break;\n\t\t\t\t\timages = images.concat(part[0] as IAsset[]);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'head':\n\t\t\t\t\tif (head) images = images.concat(head);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'image':\n\t\t\t\t\timages = images.concat(command.images);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\timages: images.map(image => ({ asset: image, offset: [0, 0] })),\n\t\t\tsize: pose.previewSize,\n\t\t\toffset: pose.previewOffset,\n\t\t};\n\t}\n\n\tprivate updatePose(styleGroupId?: number) {\n\t\tif (styleGroupId === undefined) styleGroupId = this.character.styleGroupId;\n\n\t\tconst data = this.charData;\n\t\tconst styleGroups = data.styleGroups[styleGroupId];\n\t\tlet selection = styleGroups.styles;\n\t\tfor (const priority of this.stylePriorities) {\n\t\t\tconst subSelect = selection.filter(style => {\n\t\t\t\treturn style.components[priority[0]] === priority[1];\n\t\t\t});\n\t\t\tif (subSelect.length > 0) selection = subSelect;\n\t\t}\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/setCharStyle', {\n\t\t\t\tid: this.character.id,\n\t\t\t\tstyleGroupId,\n\t\t\t\tstyleId: styleGroups.styles.indexOf(selection[0]),\n\t\t\t} as ISetStyleAction);\n\t\t});\n\t}\n\n\tprivate choose(index: string) {\n\t\tif (this.part === 'style') {\n\t\t\tthis.updatePose(\n\t\t\t\tthis.charData.styleGroups.findIndex(group => group.id === index)\n\t\t\t);\n\t\t} else if (this.part === 'head') {\n\t\t\tconst [headTypeIdx, headIdx] = index\n\t\t\t\t.split('_', 2)\n\t\t\t\t.map(part => parseInt(part, 10));\n\t\t\tthis.$store.commit('objects/setPosePosition', {\n\t\t\t\tid: this.character.id,\n\t\t\t\tposePositions: {\n\t\t\t\t\theadType: headTypeIdx,\n\t\t\t\t\thead: headIdx,\n\t\t\t\t},\n\t\t\t} as ISetPosePositionMutation);\n\t\t} else {\n\t\t\tthis.setPart(this.part, parseInt(index, 10));\n\t\t}\n\t}\n\n\tprivate choose_component(component: string, id: string) {\n\t\tconst prioIdx = this.stylePriorities.findIndex(\n\t\t\tstylePriority => stylePriority[0] === component\n\t\t);\n\t\tthis.stylePriorities.splice(prioIdx, 1);\n\t\tthis.stylePriorities.unshift([component, id]);\n\t\tthis.updatePose();\n\t}\n\n\tprivate setPart(part: ISetPartAction['part'], index: number): void {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/setPart', {\n\t\t\t\tid: this.character.id,\n\t\t\t\tpart,\n\t\t\t\tval: index,\n\t\t\t} as ISetPartAction);\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./parts.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./parts.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./parts.vue?vue&type=template&id=1212eb87&scoped=true&\"\nimport script from \"./parts.vue?vue&type=script&lang=ts&\"\nexport * from \"./parts.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./parts.vue?vue&type=style&index=0&id=1212eb87&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1212eb87\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Mixins, Watch } from 'vue-property-decorator';\nimport { State } from 'vuex-class-decorator';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport {\n\tgetData,\n\tgetParts,\n\tISeekPoseAction,\n\tISetCloseMutation,\n\tISeekPosePartAction,\n\tICharacter,\n\tISeekStyleAction,\n} from '@/store/objectTypes/characters';\nimport { ISetObjectFlipMutation } from '@/store/objects';\nimport Toggle from '@/components/toggle.vue';\nimport PositionAndSize from '@/components/toolbox/commonsFieldsets/positionAndSize.vue';\nimport Layers from '@/components/toolbox/commonsFieldsets/layers.vue';\nimport Opacity from '@/components/toolbox/commonsFieldsets/opacity.vue';\nimport Delete from '@/components/toolbox/commonsFieldsets/delete.vue';\nimport Parts from './character/parts.vue';\nimport { Character } from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\nimport { IAsset } from '@/store/content';\nimport { PanelMixin } from './panelMixin';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport { DeepReadonly } from '../../../util/readonly';\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t\tPositionAndSize,\n\t\tLayers,\n\t\tOpacity,\n\t\tDelete,\n\t\tParts,\n\t},\n})\nexport default class CharacterPanel extends Mixins(PanelMixin) {\n\tpublic $store!: Store<DeepReadonly<IRootState>>;\n\n\tprivate get selection(): string {\n\t\treturn this.$store.state.ui.selection!;\n\t}\n\n\tprivate get character(): DeepReadonly<ICharacter> {\n\t\tconst obj = this.$store.state.objects.objects[this.selection];\n\t\tif (obj.type !== 'character') return undefined!;\n\t\treturn obj as ICharacter;\n\t}\n\n\tprivate panelForParts: string | null = null;\n\n\tprivate vuexHistory!: IHistorySupport;\n\n\tprivate get charData(): DeepReadonly<Character<IAsset>> {\n\t\treturn getData(this.$store, this.character);\n\t}\n\n\tprivate get label(): string {\n\t\treturn this.charData.label || '';\n\t}\n\n\tprivate get parts(): DeepReadonly<string[]> {\n\t\treturn getParts(this.charData, this.character);\n\t}\n\n\tprivate get hasMultipleStyles(): boolean {\n\t\treturn (\n\t\t\tthis.charData.styleGroups[this.character.styleGroupId].styles.length >\n\t\t\t\t1 || this.charData.styleGroups.length > 1\n\t\t);\n\t}\n\n\tprivate get hasMultiplePoses(): boolean {\n\t\tconst styleGroup = this.charData.styleGroups[this.character.styleGroupId];\n\t\tconst style = styleGroup.styles[this.character.styleId];\n\t\treturn style.poses.length > 1;\n\t}\n\n\tprivate seekPose(delta: number): void {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/seekPose', {\n\t\t\t\tid: this.character.id,\n\t\t\t\tdelta,\n\t\t\t} as ISeekPoseAction);\n\t\t});\n\t}\n\n\tprivate seekStyle(delta: number): void {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/seekStyle', {\n\t\t\t\tid: this.character.id,\n\t\t\t\tdelta,\n\t\t\t} as ISeekStyleAction);\n\t\t});\n\t}\n\n\tprivate seekPart(part: string, delta: number): void {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/seekPart', {\n\t\t\t\tid: this.character.id,\n\t\t\t\tdelta,\n\t\t\t\tpart,\n\t\t\t} as ISeekPosePartAction);\n\t\t});\n\t}\n\n\tprivate captialize(str: string) {\n\t\treturn str.charAt(0).toUpperCase() + str.substring(1);\n\t}\n\n\tprivate get flip() {\n\t\treturn this.character.flip;\n\t}\n\n\tprivate set flip(newValue: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setFlip', {\n\t\t\t\tid: this.character.id,\n\t\t\t\tflip: newValue,\n\t\t\t} as ISetObjectFlipMutation);\n\t\t});\n\t}\n\n\tprivate get closeUp() {\n\t\treturn this.character.close;\n\t}\n\n\tprivate set closeUp(newValue: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setClose', {\n\t\t\t\tid: this.character.id,\n\t\t\t\tclose: newValue,\n\t\t\t} as ISetCloseMutation);\n\t\t});\n\t}\n\n\t@Watch('selection')\n\tprivate reset() {\n\t\tthis.panelForParts = null;\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./character.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./character.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./character.vue?vue&type=template&id=7b2622e6&scoped=true&\"\nimport script from \"./character.vue?vue&type=script&lang=ts&\"\nexport * from \"./character.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./character.vue?vue&type=style&index=0&id=7b2622e6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7b2622e6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\"},[_c('h1',[_vm._v(\"Custom Sprite\")]),_c('position-and-size',{attrs:{\"obj\":_vm.sprite}}),_c('layers',{attrs:{\"obj\":_vm.sprite}}),_c('opacity',{attrs:{\"obj\":_vm.sprite}}),_c('toggle',{attrs:{\"label\":\"Flip?\"},model:{value:(_vm.flip),callback:function ($$v) {_vm.flip=$$v},expression:\"flip\"}}),_c('delete',{attrs:{\"obj\":_vm.sprite}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Mixins } from 'vue-property-decorator';\nimport { isWebPSupported } from '@/asset-manager';\nimport { Character } from '@/renderables/character';\nimport Toggle from '@/components/toggle.vue';\nimport PositionAndSize from '@/components/toolbox/commonsFieldsets/positionAndSize.vue';\nimport Layers from '@/components/toolbox/commonsFieldsets/layers.vue';\nimport Opacity from '@/components/toolbox/commonsFieldsets/opacity.vue';\nimport Delete from '@/components/toolbox/commonsFieldsets/delete.vue';\nimport { IRenderable } from '@/renderables/renderable';\nimport { Sprite } from '@/renderables/sprite';\nimport { ISprite } from '@/store/objectTypes/sprite';\nimport { ICommand } from '@/eventbus/command';\nimport eventBus from '@/eventbus/event-bus';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport {\n\tIObjectSetOnTopAction,\n\tISetObjectFlipMutation,\n\tISetObjectPositionMutation,\n\tISetObjectOpacityMutation,\n\tIObjectShiftLayerAction,\n} from '@/store/objects';\nimport { PanelMixin } from './panelMixin';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t\tPositionAndSize,\n\t\tLayers,\n\t\tOpacity,\n\t\tDelete,\n\t},\n})\nexport default class SpritePanel extends Mixins(PanelMixin) {\n\tpublic $store!: Store<IRootState>;\n\n\tprivate vuexHistory!: IHistorySupport;\n\n\tprivate get sprite(): ISprite {\n\t\tconst obj = this.$store.state.objects.objects[\n\t\t\tthis.$store.state.ui.selection!\n\t\t];\n\t\tif (obj.type !== 'sprite') return undefined!;\n\t\treturn obj as ISprite;\n\t}\n\n\tprivate get flip() {\n\t\treturn this.sprite.flip;\n\t}\n\n\tprivate set flip(newValue: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setFlip', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\tflip: newValue,\n\t\t\t} as ISetObjectFlipMutation);\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sprite.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sprite.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./sprite.vue?vue&type=template&id=0b7511a2&scoped=true&\"\nimport script from \"./sprite.vue?vue&type=script&lang=ts&\"\nexport * from \"./sprite.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./sprite.vue?vue&type=style&index=0&id=0b7511a2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0b7511a2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\"},[_c('h1',[_vm._v(\"Textbox\")]),(_vm.colorSelect !== '')?_c('color',{attrs:{\"title\":_vm.colorName},on:{\"leave\":function($event){_vm.colorSelect = ''}},model:{value:(_vm.color),callback:function ($$v) {_vm.color=$$v},expression:\"color\"}}):(_vm.textEditor !== '')?_c('text-editor',{attrs:{\"title\":_vm.textEditorName},on:{\"leave\":function($event){_vm.textEditor = ''}},model:{value:(_vm.textEditorText),callback:function ($$v) {_vm.textEditorText=$$v},expression:\"textEditorText\"}}):[_c('table',{staticClass:\"upper-combos\"},[_c('tr',[_c('td',[_c('label',{attrs:{\"for\":\"text_style\"}},[_vm._v(\"Style:\")])]),_c('td',[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.textBoxStyle),expression:\"textBoxStyle\"}],attrs:{\"id\":\"text_style\"},on:{\"keydown\":function($event){$event.stopPropagation();},\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.textBoxStyle=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"normal\"}},[_vm._v(\"Normal\")]),_c('option',{attrs:{\"value\":\"corrupt\"}},[_vm._v(\"Corrupt\")]),_c('option',{attrs:{\"value\":\"custom\"}},[_vm._v(\"Custom\")]),_c('option',{attrs:{\"value\":\"none\"}},[_vm._v(\"None\")])])])]),_c('tr',[_c('td',[_c('label',{attrs:{\"for\":\"current_talking\"}},[_vm._v(\"Person talking:\")])]),_c('td',[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.talkingDefaults),expression:\"talkingDefaults\"}],attrs:{\"id\":\"current_talking\"},on:{\"keydown\":function($event){$event.stopPropagation();},\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.talkingDefaults=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"No-one\"}},[_vm._v(\"No-one\")]),_c('option',{attrs:{\"value\":\"Sayori\"}},[_vm._v(\"Sayori\")]),_c('option',{attrs:{\"value\":\"Yuri\"}},[_vm._v(\"Yuri\")]),_c('option',{attrs:{\"value\":\"Natsuki\"}},[_vm._v(\"Natsuki\")]),_c('option',{attrs:{\"value\":\"Monika\"}},[_vm._v(\"Monika\")]),_c('option',{attrs:{\"value\":\"FeMC\"}},[_vm._v(\"FeMC\")]),_c('option',{attrs:{\"value\":\"MC\"}},[_vm._v(\"MC\")]),_c('option',{attrs:{\"value\":\"Chad\"}},[_vm._v(\"Chad\")]),_c('option',{attrs:{\"value\":\"Amy\"}},[_vm._v(\"Amy\")]),_c('option',{attrs:{\"value\":\"Other\"}},[_vm._v(\"Other\")])])])]),_c('tr',[_c('td',[_c('label',{attrs:{\"for\":\"custom_name\"}},[_vm._v(\"Other name:\")])]),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.talkingOther),expression:\"talkingOther\"}],attrs:{\"id\":\"custom_name\"},domProps:{\"value\":(_vm.talkingOther)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.talkingOther=$event.target.value}}}),_c('button',{on:{\"click\":function($event){_vm.textEditor = 'name'}}},[_vm._v(\"...\")])])])]),_c('toggle',{attrs:{\"label\":\"Auto quoting?\"},model:{value:(_vm.autoQuoting),callback:function ($$v) {_vm.autoQuoting=$$v},expression:\"autoQuoting\"}}),_c('toggle',{attrs:{\"label\":\"Auto line wrap?\"},model:{value:(_vm.autoWrap),callback:function ($$v) {_vm.autoWrap=$$v},expression:\"autoWrap\"}}),_c('div',{attrs:{\"id\":\"dialog_text_wrapper\"}},[_c('label',{attrs:{\"for\":\"dialog_text\"}},[_vm._v(\"Dialog:\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.dialog),expression:\"dialog\"}],attrs:{\"id\":\"dialog_text\"},domProps:{\"value\":(_vm.dialog)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.dialog=$event.target.value}}}),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){_vm.textEditor = 'body'}}},[_vm._v(\"Formatting\")])]),_c('position-and-size',{attrs:{\"obj\":_vm.textbox}}),_c('button',{on:{\"click\":_vm.resetPosition}},[_vm._v(\"Reset position\")]),_c('button',{on:{\"click\":_vm.splitTextbox}},[_vm._v(\"Split textbox\")]),_c('layers',{attrs:{\"obj\":_vm.textbox}}),_c('opacity',{attrs:{\"obj\":_vm.textbox}}),_c('toggle',{attrs:{\"label\":\"Flip?\"},model:{value:(_vm.flip),callback:function ($$v) {_vm.flip=$$v},expression:\"flip\"}}),_c('fieldset',[_c('legend',[_vm._v(\"Customization:\")]),_c('toggle',{attrs:{\"label\":\"Controls visible?\"},model:{value:(_vm.showControls),callback:function ($$v) {_vm.showControls=$$v},expression:\"showControls\"}}),_c('toggle',{attrs:{\"label\":\"Able to skip?\"},model:{value:(_vm.allowSkipping),callback:function ($$v) {_vm.allowSkipping=$$v},expression:\"allowSkipping\"}}),_c('toggle',{attrs:{\"label\":\"Continue arrow?\"},model:{value:(_vm.showContinueArrow),callback:function ($$v) {_vm.showContinueArrow=$$v},expression:\"showContinueArrow\"}}),(_vm.textBoxStyle === 'custom')?_c('table',[_c('tr',[_c('td',[_c('label',{attrs:{\"for\":\"textbox_color\"}},[_vm._v(\"Color:\")])]),_c('td',[_c('button',{staticClass:\"color-button\",style:({ background: _vm.textbox.customColor }),attrs:{\"id\":\"textbox_color\"},on:{\"click\":function($event){_vm.colorSelect = 'base'}}})])]),_c('tr',[_c('td',[_c('label',{attrs:{\"for\":\"custom_namebox_width\"}},[_vm._v(\"Namebox width:\")])]),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.customNameboxWidth),expression:\"customNameboxWidth\",modifiers:{\"number\":true}}],staticStyle:{\"width\":\"48px\"},attrs:{\"id\":\"custom_namebox_width\",\"type\":\"number\"},domProps:{\"value\":(_vm.customNameboxWidth)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.customNameboxWidth=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})])]),_c('tr',[_c('td',{attrs:{\"colspan\":\"2\"}},[_c('toggle',{attrs:{\"id\":\"derive_custom_colors\",\"label\":\"Derive other colors\"},model:{value:(_vm.deriveCustomColors),callback:function ($$v) {_vm.deriveCustomColors=$$v},expression:\"deriveCustomColors\"}})],1)]),(!_vm.deriveCustomColors)?[_c('tr',[_c('td',[_c('label',{attrs:{\"for\":\"custom_controls_color\"}},[_vm._v(\"Controls Color:\")])]),_c('td',[_c('button',{staticClass:\"color-button\",style:({ background: _vm.textbox.customControlsColor }),attrs:{\"id\":\"custom_controls_color\"},on:{\"click\":function($event){_vm.colorSelect = 'controls'}}})])]),_c('tr',[_c('td',[_c('label',{attrs:{\"for\":\"custom_namebox_color\"}},[_vm._v(\"Namebox Color:\")])]),_c('td',[_c('button',{staticClass:\"color-button\",style:({ background: _vm.textbox.customNameboxColor }),attrs:{\"id\":\"custom_namebox_color\"},on:{\"click\":function($event){_vm.colorSelect = 'namebox'}}})])]),_c('tr',[_c('td',[_c('label',{attrs:{\"for\":\"custom_namebox_stroke\"}},[_vm._v(\"Namebox text stroke:\")])]),_c('td',[_c('button',{staticClass:\"color-button\",style:({ background: _vm.textbox.customNameboxStroke }),attrs:{\"id\":\"custom_namebox_stroke\"},on:{\"click\":function($event){_vm.colorSelect = 'nameboxStroke'}}})])])]:_vm._e()],2):_vm._e()],1),_c('delete',{attrs:{\"obj\":_vm.textbox}})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ color: true, vertical: _vm.vertical }},[_c('h2',[_vm._v(_vm._s(_vm.title))]),_c('button',{on:{\"click\":function($event){return _vm.$emit('leave')}}},[_vm._v(\"OK\")]),_c('table',[_c('tr',[_c('td',[_c('button',{on:{\"click\":function($event){_vm.mode = 'hsla'}}},[_vm._v(\"HSLA\")])]),_c('td',[_c('button',{on:{\"click\":function($event){_vm.mode = 'rgba'}}},[_vm._v(\"RGBA\")])])])]),_c('div',{staticClass:\"column\"},[_c('slider-group',{attrs:{\"mode\":_vm.mode,\"relative\":true},model:{value:(_vm.color),callback:function ($$v) {_vm.color=$$v},expression:\"color\"}}),_c('div',{staticClass:\"hex-selector\"},[_c('label',{staticClass:\"hex-label\",attrs:{\"for\":(\"hex_\" + _vm._uid)}},[_vm._v(\"Hex\")]),_c('input',{attrs:{\"id\":(\"hex_\" + _vm._uid)},domProps:{\"value\":_vm.color},on:{\"input\":_vm.updateHex}})]),_c('button',{on:{\"click\":_vm.addSwatch}},[_vm._v(\"Add as swatch\")])],1),_c('div',{class:{ vertical: _vm.vertical },attrs:{\"id\":\"color-swatches\"}},_vm._l((_vm.swatches),function(swatch){return _c('button',{key:swatch.color,staticClass:\"swatch\",style:({ backgroundColor: swatch.color }),attrs:{\"title\":swatch.label},on:{\"click\":function($event){_vm.color = swatch.color;\n\t\t\t\t_vm.$emit('leave');}}})}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('slider',{attrs:{\"label\":_vm.label1,\"max-value\":_vm.maxValue1,\"gradient-stops\":_vm.stops1},model:{value:(_vm.v1),callback:function ($$v) {_vm.v1=$$v},expression:\"v1\"}}),_c('slider',{attrs:{\"label\":_vm.label2,\"max-value\":_vm.maxValue2,\"gradient-stops\":_vm.stops2},model:{value:(_vm.v2),callback:function ($$v) {_vm.v2=$$v},expression:\"v2\"}}),_c('slider',{attrs:{\"label\":_vm.label3,\"max-value\":_vm.maxValue3,\"gradient-stops\":_vm.stops3},model:{value:(_vm.v3),callback:function ($$v) {_vm.v3=$$v},expression:\"v3\"}}),_c('slider',{attrs:{\"label\":\"Alpha\",\"max-value\":255,\"gradient-stops\":_vm.stopsAlpha},model:{value:(_vm.a),callback:function ($$v) {_vm.a=$$v},expression:\"a\"}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { IColor } from './color';\nimport { RGBAColor } from './rgb';\n\n// tslint:disable: no-magic-numbers\nexport class HSLAColor implements IColor {\n\tpublic constructor(\n\t\tpublic readonly h: number,\n\t\tpublic readonly s: number,\n\t\tpublic readonly l: number,\n\t\tpublic readonly a: number\n\t) {}\n\n\tpublic toCss(): string {\n\t\tif (this.a >= 1) {\n\t\t\treturn `hsl(${this.h}, ${this.s}, ${this.l})`;\n\t\t}\n\t\treturn `hsla(${this.h}, ${this.s}, ${this.l}, ${this.a})`;\n\t}\n\n\tpublic shift(deltas: HSLAColor): HSLAColor {\n\t\tlet { h, s, l, a } = this;\n\t\th += deltas.h;\n\t\tif (h >= 1) {\n\t\t\th -= 1;\n\t\t} else if (h < 0) {\n\t\t\th += 1;\n\t\t}\n\t\tif (s + deltas.s > 1) {\n\t\t\ts -= deltas.s;\n\t\t} else {\n\t\t\ts += deltas.s;\n\t\t\tif (s < 0) {\n\t\t\t\ts = 0;\n\t\t\t}\n\t\t}\n\t\tif (l + deltas.l > 1 || l + deltas.l < 0) {\n\t\t\tl -= deltas.l;\n\t\t} else {\n\t\t\tl += deltas.l;\n\t\t}\n\t\tif (a + deltas.a > 1 || a + deltas.a < 0) {\n\t\t\ta -= deltas.a;\n\t\t} else {\n\t\t\ta += deltas.a;\n\t\t}\n\t\treturn new HSLAColor(h, s, l, a);\n\t}\n\n\tpublic toRgb(): RGBAColor {\n\t\tconst { h, s, l, a } = this;\n\t\tlet r: number;\n\t\tlet g: number;\n\t\tlet b: number;\n\n\t\tif (s === 0) {\n\t\t\tr = g = b = l; // achromatic\n\t\t} else {\n\t\t\tconst q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n\t\t\tconst p = 2 * l - q;\n\t\t\tr = this.hue2rgb(p, q, h + 1 / 3);\n\t\t\tg = this.hue2rgb(p, q, h);\n\t\t\tb = this.hue2rgb(p, q, h - 1 / 3);\n\t\t}\n\n\t\treturn new RGBAColor(\n\t\t\tMath.round(r * 255),\n\t\t\tMath.round(g * 255),\n\t\t\tMath.round(b * 255),\n\t\t\ta\n\t\t);\n\t}\n\n\tpublic toHSL(): HSLAColor {\n\t\treturn this;\n\t}\n\n\tprivate hue2rgb(p: number, q: number, t: number) {\n\t\tif (t < 0) t += 1;\n\t\tif (t > 1) t -= 1;\n\t\tif (t < 1 / 6) return p + (q - p) * 6 * t;\n\t\tif (t < 1 / 2) return q;\n\t\tif (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n\t\treturn p;\n\t}\n}\n","import { HSLAColor } from './hsl';\n\n// tslint:disable: no-magic-numbers\nexport class RGBAColor {\n\tpublic static validCss(str: string): boolean {\n\t\treturn this.validCssRgb(str) || this.validHex(str);\n\t}\n\n\tpublic static fromCss(str: string): RGBAColor {\n\t\tif (this.validCssRgb(str)) {\n\t\t\treturn this.fromCssRgb(str);\n\t\t}\n\t\tif (this.validHex(str)) {\n\t\t\treturn this.fromHex(str);\n\t\t}\n\t\tthrow new Error('Invalid RGB color format');\n\t}\n\n\tpublic static validCssRgb(str: string): boolean {\n\t\treturn this.rgbEx.test(str) || this.rgbaEx.test(str);\n\t}\n\n\tpublic static fromCssRgb(str: string): RGBAColor {\n\t\tif (!this.validCssRgb(str)) throw new Error('Invalid RGB color format');\n\t\tconst rgbHead = str.slice(0, -1);\n\t\tconst parentesisPos = rgbHead.indexOf('(');\n\t\tconst rbgTail = rgbHead.slice(parentesisPos + 1);\n\t\tconst elements = rbgTail.split(',').map(x => parseFloat(x.trim()));\n\t\treturn new RGBAColor(\n\t\t\telements[0],\n\t\t\telements[1],\n\t\t\telements[2],\n\t\t\telements.length === 4 ? elements[3] : 1\n\t\t);\n\t}\n\n\tpublic static validHex(str: string): boolean {\n\t\treturn this.hexShortEx.test(str) || this.hexLongEx.test(str);\n\t}\n\n\tpublic static fromHex(str: string): RGBAColor {\n\t\tif (!this.validHex(str)) throw new Error('Invalid Hex color format');\n\t\tconst hexTail = str.slice(1);\n\t\tif (hexTail.length === 3) {\n\t\t\treturn new RGBAColor(\n\t\t\t\tparseInt(hexTail[0] + hexTail[0], 16),\n\t\t\t\tparseInt(hexTail[1] + hexTail[1], 16),\n\t\t\t\tparseInt(hexTail[2] + hexTail[2], 16),\n\t\t\t\t1\n\t\t\t);\n\t\t}\n\t\tif (hexTail.length === 4) {\n\t\t\treturn new RGBAColor(\n\t\t\t\tparseInt(hexTail[0] + hexTail[0], 16),\n\t\t\t\tparseInt(hexTail[1] + hexTail[1], 16),\n\t\t\t\tparseInt(hexTail[2] + hexTail[2], 16),\n\t\t\t\tparseInt(hexTail[3] + hexTail[3], 16) / 255\n\t\t\t);\n\t\t}\n\t\tif (hexTail.length === 6) {\n\t\t\treturn new RGBAColor(\n\t\t\t\tparseInt(hexTail[0] + hexTail[1], 16),\n\t\t\t\tparseInt(hexTail[2] + hexTail[3], 16),\n\t\t\t\tparseInt(hexTail[4] + hexTail[5], 16),\n\t\t\t\t1\n\t\t\t);\n\t\t}\n\t\tif (hexTail.length === 8) {\n\t\t\treturn new RGBAColor(\n\t\t\t\tparseInt(hexTail[0] + hexTail[1], 16),\n\t\t\t\tparseInt(hexTail[2] + hexTail[3], 16),\n\t\t\t\tparseInt(hexTail[4] + hexTail[5], 16),\n\t\t\t\tparseInt(hexTail[6] + hexTail[7], 16) / 255\n\t\t\t);\n\t\t}\n\t\tthrow new Error('Invalid Hex color format length');\n\t}\n\n\tprivate static rgbEx = /^rgb\\((\\d*?)\\,(\\d*?)\\,(\\d*?)\\)$/i;\n\tprivate static rgbaEx = /^rgba\\((\\d{1,3})\\,(\\d{1,3})\\,(\\d{1,3})\\,([\\d\\.]+)\\)$/i;\n\tprivate static hexShortEx = /^\\#[0-9A-Z]{3,4}$/i;\n\tprivate static hexLongEx = /^\\#[0-9A-Z]{6,8}$/i;\n\n\tpublic constructor(\n\t\tpublic readonly r: number,\n\t\tpublic readonly g: number,\n\t\tpublic readonly b: number,\n\t\tpublic readonly a: number\n\t) {}\n\n\tpublic toCss(): string {\n\t\tif (this.a > 1) {\n\t\t\treturn `rgb(${this.r},${this.g},${this.b})`;\n\t\t}\n\t\treturn `rgba(${this.r},${this.g},${this.b},${this.a})`;\n\t}\n\n\tpublic toHex(): string {\n\t\treturn `#${Math.round(this.r)\n\t\t\t.toString(16)\n\t\t\t.padStart(2, '0')}${Math.round(this.g)\n\t\t\t.toString(16)\n\t\t\t.padStart(2, '0')}${Math.round(this.b)\n\t\t\t.toString(16)\n\t\t\t.padStart(2, '0')}${Math.round(this.a * 255)\n\t\t\t.toString(16)\n\t\t\t.padStart(2, '0')}`;\n\t}\n\n\tpublic toRgb(): RGBAColor {\n\t\treturn this;\n\t}\n\n\tpublic toHSL(): HSLAColor {\n\t\tlet { r, g, b } = this;\n\t\tconst { a } = this;\n\t\t(r /= 255), (g /= 255), (b /= 255);\n\t\tconst max = Math.max(r, g, b);\n\t\tconst min = Math.min(r, g, b);\n\t\tlet h: number;\n\t\tlet s: number;\n\t\tconst l: number = (max + min) / 2;\n\n\t\tif (max === min) {\n\t\t\th = s = 0; // achromatic\n\t\t} else {\n\t\t\tconst d = max - min;\n\t\t\ts = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n\t\t\tswitch (max) {\n\t\t\t\tcase r:\n\t\t\t\t\th = (g - b) / d + (g < b ? 6 : 0);\n\t\t\t\t\tbreak;\n\t\t\t\tcase g:\n\t\t\t\t\th = (b - r) / d + 2;\n\t\t\t\t\tbreak;\n\t\t\t\tcase b:\n\t\t\t\t\th = (r - g) / d + 4;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\th! /= 6;\n\t\t}\n\n\t\treturn new HSLAColor(h!, s, l, a);\n\t}\n\n\tpublic get luminance(): number {\n\t\treturn Math.sqrt(\n\t\t\tMath.pow(0.299 * (this.r / 255), 2) +\n\t\t\t\tMath.pow(0.587 * (this.g / 255), 2) +\n\t\t\t\tMath.pow(0.114 * (this.b / 255), 2)\n\t\t);\n\t}\n}\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ slider: true, vertical: _vm.vertical },on:{\"keydown\":function($event){$event.stopPropagation();}}},[_c('label',{attrs:{\"for\":_vm._uid}},[_vm._v(_vm._s(_vm.label))]),_c('div',[_c('svg',{ref:\"svg\",attrs:{\"xmlns\":\"http://www.w3.org/2000/svg\",\"viewBox\":\"0 0 271 24\"},on:{\"mousedown\":_vm.enterSlide,\"touchstart\":_vm.enterSlide,\"mousemove\":_vm.moveSlide,\"touchmove\":_vm.moveSlide,\"mouseup\":_vm.exitSlide,\"touchend\":_vm.exitSlide}},[_c('defs',[_c('linearGradient',{attrs:{\"id\":(\"gradient\" + _vm._uid),\"x1\":\"0%\",\"y1\":\"0%\",\"x2\":\"100%\",\"y2\":\"0%\"}},_vm._l((_vm.gradientStops),function(color,idx){return _c('stop',{key:idx,style:('stop-color:' + color),attrs:{\"offset\":(idx / (_vm.gradientStops.length - 1)) * 100 + '%'}})}),1)],1),_c('g',{attrs:{\"stroke\":\"#ffbde1\"}},[_c('path',{attrs:{\"d\":\"M7 0H262V24H7z\",\"stroke-width\":\"2\",\"paint-order\":\"fill stroke markers\",\"fill\":(\"url(#gradient\" + _vm._uid + \")\")}}),_c('path',{attrs:{\"d\":_vm.pointerPath,\"stroke-width\":\"2\",\"fill\":\"#000000\"}})])])]),_c('input',{staticClass:\"sliderInput\",attrs:{\"id\":_vm._uid,\"min\":\"0\",\"max\":_vm.maxValue,\"type\":\"number\"},domProps:{\"value\":_vm.value},on:{\"input\":function($event){_vm.$emit('input', parseFloat($event.target.value))},\"keydown\":function($event){$event.stopPropagation();}}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\nimport { State } from 'vuex-class-decorator';\nimport { RGBAColor } from '../../../../util/colors/rgb';\nimport { IColor } from '../../../../util/colors/color';\nimport { HSLAColor } from '../../../../util/colors/hsl';\n\nconst sliderLength = 255;\nconst sliderOffset = 8;\n\n@Component({\n\tcomponents: {},\n})\nexport default class Slider extends Vue {\n\t@Prop({ type: String }) private label!: string | undefined;\n\t@Prop({}) private gradientStops!: string[];\n\t@Prop({ type: Number }) private value!: number;\n\t@Prop({ type: Number }) private maxValue!: number;\n\t@State('vertical', { namespace: 'ui' }) private readonly vertical!: boolean;\n\n\tprivate slideActive = false;\n\n\tprivate get pointerPath(): string {\n\t\tconst val = (this.value / this.maxValue) * sliderLength;\n\t\t// tslint:disable-next-line: no-magic-numbers\n\t\treturn `M${val} 0L${val + 14} 0L${val + 7} 12Z`;\n\t}\n\n\tprivate enterSlide(event: MouseEvent | TouchEvent) {\n\t\tthis.slideActive = true;\n\t\tthis.moveSlide(event);\n\t}\n\n\tprivate moveSlide(event: MouseEvent | TouchEvent) {\n\t\tif (!this.slideActive) return;\n\t\tconst svg = this.$refs.svg as HTMLElement;\n\t\tif (!svg.contains(event.target as Node) && event.target !== svg) return;\n\t\tif (event instanceof MouseEvent && event.which !== 1) {\n\t\t\tthis.slideActive = false;\n\t\t\treturn;\n\t\t}\n\t\tconst bounding = svg.getBoundingClientRect();\n\t\tconst scale = bounding.width / (sliderOffset + sliderLength + sliderOffset);\n\t\tconst x =\n\t\t\t(event instanceof MouseEvent ? event.clientX : event.touches[0].clientX) -\n\t\t\tbounding.x;\n\t\tconst scaledX = x / scale;\n\t\tevent.preventDefault();\n\t\tconst value =\n\t\t\t(Math.max(Math.min(scaledX - sliderOffset, sliderLength), 0) /\n\t\t\t\tsliderLength) *\n\t\t\tthis.maxValue;\n\t\tthis.$emit('input', value);\n\t}\n\n\tprivate exitSlide() {\n\t\tthis.slideActive = false;\n\t}\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./slider.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./slider.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./slider.vue?vue&type=template&id=d330115e&scoped=true&\"\nimport script from \"./slider.vue?vue&type=script&lang=ts&\"\nexport * from \"./slider.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./slider.vue?vue&type=style&index=0&id=d330115e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"d330115e\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\nimport { State } from 'vuex-class-decorator';\nimport { IColor } from '@/util/colors/color';\nimport { RGBAColor } from '@/util/colors/rgb';\nimport { HSLAColor } from '@/util/colors/hsl';\nimport Slider from './slider.vue';\n\n// tslint:disable: no-magic-numbers\n\n@Component({\n\tcomponents: { Slider },\n})\nexport default class SliderGroup extends Vue {\n\t@Prop({ type: String, validator: val => val.match(/^#[0-9a-f]{6,8}$/i) })\n\tprivate value!: string;\n\t@Prop({}) private mode!: 'hsla' | 'rgba';\n\t@Prop({ type: Boolean }) private relative!: boolean;\n\n\t@State('vertical', { namespace: 'ui' }) private readonly vertical!: boolean;\n\n\tprivate lastRGBEmit: string | null = null;\n\tprivate v1: number = 0;\n\tprivate v2: number = 0;\n\tprivate v3: number = 0;\n\tprivate a: number = 0;\n\n\tprivate created() {\n\t\tthis.initValues();\n\t}\n\n\t@Watch('value')\n\tprivate valueChanged() {\n\t\tif (this.value === this.lastRGBEmit) return;\n\t\tthis.initValues();\n\t}\n\n\t@Watch('v1')\n\t@Watch('v2')\n\t@Watch('v3')\n\t@Watch('a')\n\tprivate updateValue() {\n\t\tlet newColor: IColor;\n\t\tif (this.mode === 'rgba') {\n\t\t\tnewColor = new RGBAColor(this.v1, this.v2, this.v3, this.a / 255);\n\t\t} else {\n\t\t\tnewColor = new HSLAColor(\n\t\t\t\tthis.v1 / 360,\n\t\t\t\tthis.v2 / 100,\n\t\t\t\tthis.v3 / 100,\n\t\t\t\tthis.a / 255\n\t\t\t);\n\t\t}\n\t\tconst rgbColor = newColor.toRgb().toHex();\n\t\tif (this.lastRGBEmit === rgbColor) return;\n\t\tif (rgbColor.length !== 9) {\n\t\t\tthrow new Error(`Invalid color code: ${rgbColor}`);\n\t\t}\n\t\tthis.lastRGBEmit = rgbColor;\n\t\tconsole.log('setting rgb', rgbColor);\n\t\tthis.$emit('input', rgbColor);\n\t}\n\n\t@Watch('mode')\n\tprivate initValues() {\n\t\tconst color = RGBAColor.fromHex(this.value);\n\t\tthis.lastRGBEmit = color.toHex();\n\t\tthis.a = color.a * 255;\n\t\tif (this.mode === 'hsla') {\n\t\t\tconst hslColor = color.toHSL();\n\t\t\tthis.v1 = hslColor.h * 360;\n\t\t\tthis.v2 = hslColor.s * 100;\n\t\t\tthis.v3 = hslColor.l * 100;\n\t\t} else {\n\t\t\tthis.v1 = color.r;\n\t\t\tthis.v2 = color.g;\n\t\t\tthis.v3 = color.b;\n\t\t}\n\t}\n\n\tprivate get maxValue1(): number {\n\t\tif (this.mode === 'rgba') return 255;\n\t\treturn 360;\n\t}\n\n\tprivate get label1(): string {\n\t\tif (this.mode === 'rgba') return 'Red';\n\t\treturn 'Hue';\n\t}\n\n\tprivate get stops1(): string[] {\n\t\tconst color = RGBAColor.fromHex(this.value);\n\t\tlet stops: IColor[] = [];\n\t\tif (this.mode === 'rgba') {\n\t\t\tconst g = this.relative ? this.v2 : 0;\n\t\t\tconst b = this.relative ? this.v3 : 0;\n\t\t\tstops = [new RGBAColor(0, g, b, 1), new RGBAColor(255, g, b, 1)];\n\t\t} else {\n\t\t\tconst s = this.relative ? this.v2 / 100 : 1;\n\t\t\tconst l = this.relative ? this.v3 / 100 : 0.5;\n\t\t\tstops = this.eightsStops(i => new HSLAColor(i, s, l, 1));\n\t\t}\n\t\treturn stops.map(stop => stop.toRgb().toCss());\n\t}\n\n\tprivate get maxValue2(): number {\n\t\tif (this.mode === 'rgba') return 255;\n\t\treturn 100;\n\t}\n\n\tprivate get label2(): string {\n\t\tif (this.mode === 'rgba') return 'Green';\n\t\treturn 'Saturation';\n\t}\n\n\tprivate get stops2(): string[] {\n\t\tconst color = RGBAColor.fromHex(this.value);\n\t\tlet stops: IColor[] = [];\n\t\tif (this.mode === 'rgba') {\n\t\t\tconst r = this.relative ? this.v1 : 0;\n\t\t\tconst b = this.relative ? this.v3 : 0;\n\t\t\tstops = [new RGBAColor(r, 0, b, 1), new RGBAColor(r, 255, b, 1)];\n\t\t} else {\n\t\t\tconst h = this.relative ? this.v1 / 360 : 0;\n\t\t\tconst l = this.relative ? this.v3 / 100 : 0.5;\n\t\t\tstops = this.eightsStops(i => new HSLAColor(h, i, l, 1));\n\t\t}\n\t\treturn stops.map(stop => stop.toRgb().toCss());\n\t}\n\n\tprivate get maxValue3(): number {\n\t\tif (this.mode === 'rgba') return 255;\n\t\treturn 100;\n\t}\n\n\tprivate get label3(): string {\n\t\tif (this.mode === 'rgba') return 'Blue';\n\t\treturn 'Luminosity';\n\t}\n\n\tprivate get stops3(): string[] {\n\t\tconst color = RGBAColor.fromHex(this.value);\n\t\tlet stops: IColor[] = [];\n\t\tif (this.mode === 'rgba') {\n\t\t\tconst r = this.relative ? this.v1 : 0;\n\t\t\tconst g = this.relative ? this.v2 : 0;\n\t\t\tstops = [new RGBAColor(r, g, 0, 1), new RGBAColor(r, g, 255, 1)];\n\t\t} else {\n\t\t\tconst h = this.relative ? this.v1 / 360 : 0;\n\t\t\tconst s = this.relative ? this.v2 / 100 : 0.5;\n\t\t\tstops = this.eightsStops(i => new HSLAColor(h, s, i, 1));\n\t\t}\n\t\treturn stops.map(stop => stop.toRgb().toCss());\n\t}\n\n\tprivate get stopsAlpha(): string[] {\n\t\tconst color = RGBAColor.fromHex(this.value);\n\t\treturn [\n\t\t\tnew RGBAColor(color.r, color.g, color.b, 0).toCss(),\n\t\t\tnew RGBAColor(color.r, color.g, color.b, 1).toCss(),\n\t\t];\n\t}\n\n\tprivate eightsStops(gen: (i: number) => IColor): IColor[] {\n\t\tconst stops: IColor[] = [];\n\t\tfor (let i = 0; i <= 8; ++i) {\n\t\t\tstops.push(gen(i / 8));\n\t\t}\n\t\treturn stops;\n\t}\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sliderGroup.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sliderGroup.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./sliderGroup.vue?vue&type=template&id=00efe5f9&scoped=true&\"\nimport script from \"./sliderGroup.vue?vue&type=script&lang=ts&\"\nexport * from \"./sliderGroup.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./sliderGroup.vue?vue&type=style&index=0&id=00efe5f9&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"00efe5f9\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\nimport {\n\tisWebPSupported,\n\tregisterAsset,\n\tregisterAssetWithURL,\n} from '@/asset-manager';\nimport environment from '@/environments/environment';\nimport {\n\tStyleComponent,\n\tPose,\n\tCharacter,\n\tColor,\n\tContentPack,\n} from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\nimport { IAsset, ReplaceContentPackAction } from '@/store/content';\nimport {\n\tgetPose,\n\tgetDataG,\n\tISeekPoseAction,\n\tISetPosePositionMutation,\n\tISetPartAction,\n\tgetData,\n\tICharacter,\n} from '@/store/objectTypes/characters';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport { State } from 'vuex-class-decorator';\nimport SliderGroup from './sliderGroup.vue';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport { RGBAColor } from '@/util/colors/rgb';\n\nconst generatedPackId = 'dddg.generated.colors';\n\n@Component({\n\tcomponents: {\n\t\tSliderGroup,\n\t},\n})\nexport default class PartsPanel extends Vue {\n\tpublic $store!: Store<IRootState>;\n\n\t@State('vertical', { namespace: 'ui' }) private readonly vertical!: boolean;\n\n\t@Prop({ required: true, type: String }) private readonly value!: string;\n\t@Prop({ type: String, default: '' }) private readonly title!: string;\n\n\tprivate vuexHistory!: IHistorySupport;\n\n\tprivate mode: string = 'hsla';\n\tprivate relative: boolean = true;\n\n\tprivate get swatches(): Color[] {\n\t\treturn this.$store.state.content.current.colors;\n\t}\n\n\tprivate get color(): string {\n\t\treturn this.value;\n\t}\n\n\tprivate set color(newColor: string) {\n\t\tthis.$emit('input', newColor);\n\t}\n\n\tprivate updateHex(event: Event) {\n\t\tconst hex = (event.target as HTMLInputElement).value;\n\t\t// tslint:disable-next-line: no-magic-numbers\n\t\tif (RGBAColor.validHex(hex) && (hex.length === 7 || hex.length === 9)) {\n\t\t\tconsole.log('setting updateHex', hex);\n\t\t\tthis.$emit('input', hex);\n\t\t}\n\t}\n\n\tprivate addSwatch() {\n\t\tif (this.swatches.find(swatch => swatch.color === this.color)) return;\n\n\t\tconst existingPack = this.$store.state.content.contentPacks.find(\n\t\t\tpack => pack.packId === 'generatedPackId'\n\t\t) || {\n\t\t\tpackId: generatedPackId,\n\t\t\tpackCredits: [''],\n\t\t\tdependencies: [],\n\t\t\tcharacters: [],\n\t\t\tfonts: [],\n\t\t\tbackgrounds: [],\n\t\t\tsprites: [],\n\t\t\tpoemStyles: [],\n\t\t\tpoemBackgrounds: [],\n\t\t\tcolors: [],\n\t\t};\n\n\t\tconst newPack: ContentPack<IAsset> = {\n\t\t\t...existingPack,\n\t\t\tcolors: [\n\t\t\t\t...existingPack.colors,\n\t\t\t\t{\n\t\t\t\t\tlabel: this.color,\n\t\t\t\t\tcolor: this.color,\n\t\t\t\t},\n\t\t\t],\n\t\t};\n\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('content/replaceContentPack', {\n\t\t\t\tcontentPack: newPack,\n\t\t\t\tprocessed: true,\n\t\t\t} as ReplaceContentPackAction);\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./color.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./color.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./color.vue?vue&type=template&id=19212f1a&scoped=true&\"\nimport script from \"./color.vue?vue&type=script&lang=ts&\"\nexport * from \"./color.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./color.vue?vue&type=style&index=0&id=19212f1a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"19212f1a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.colorSelector)?_c('color',{on:{\"leave\":_vm.applyColor},model:{value:(_vm.selectedColor),callback:function ($$v) {_vm.selectedColor=$$v},expression:\"selectedColor\"}}):_c('div',{class:{ 'text-subpanel': true, vertical: _vm.vertical }},[_c('h2',[_vm._v(_vm._s(_vm.title))]),_c('div',{staticClass:\"column ok-col\"},[_c('button',{on:{\"click\":function($event){return _vm.$emit('leave')}}},[_vm._v(\"OK\")])]),_c('div',{staticClass:\"column\"},[_c('textarea',{ref:\"textArea\",domProps:{\"value\":_vm.value},on:{\"input\":_vm.onValueChanged,\"keydown\":function($event){$event.stopPropagation();},\"keypress\":function($event){$event.stopPropagation();}}})]),(_vm.error)?_c('div',{staticClass:\"column error-col\"},[_vm._v(_vm._s(_vm.error))]):_vm._e(),_c('div',{staticClass:\"column\"},[_c('button',{staticClass:\"style-button\",on:{\"click\":function($event){return _vm.insertText('\\\\\\\\')}}},[_vm._v(\"Insert \\\\\")]),_c('button',{staticClass:\"style-button\",on:{\"click\":function($event){return _vm.insertText('\\\\{')}}},[_vm._v(\"Insert {\")]),_c('button',{staticClass:\"style-button\",on:{\"click\":function($event){return _vm.insertText('\\\\}')}}},[_vm._v(\"Insert }\")])]),_c('p',{staticClass:\"hint-col\"},[_vm._v(\"Apply style to selected text:\")]),_c('div',{staticClass:\"column\"},[_c('button',{staticClass:\"style-button\",staticStyle:{\"font-weight\":\"bold\"},on:{\"click\":function($event){return _vm.insertCommand('b')}}},[_vm._v(\" Bold \")]),_c('button',{staticClass:\"style-button\",staticStyle:{\"font-style\":\"italic\"},on:{\"click\":function($event){return _vm.insertCommand('i')}}},[_vm._v(\" Italics \")]),_c('button',{staticClass:\"style-button\",on:{\"click\":function($event){return _vm.insertCommand('plain')}}},[_vm._v(\" Plain \")]),_c('button',{staticClass:\"style-button edited-style\",on:{\"click\":function($event){return _vm.insertCommand('edited')}}},[_vm._v(\" Edited \")]),_c('button',{staticClass:\"style-button\",staticStyle:{\"letter-spacing\":\"5px\"},on:{\"click\":function($event){return _vm.insertCommand('k', 2)}}},[_vm._v(\" Kerning \")])]),_c('div',{staticClass:\"column\"},[_c('button',{staticClass:\"style-button\",on:{\"click\":function($event){return _vm.insertCommand('alpha', 0.5)}}},[_vm._v(\" Alpha \")])]),_c('div',{staticClass:\"column\"},[_c('button',{staticClass:\"style-button\",staticStyle:{\"font-size\":\"20px\"},on:{\"click\":function($event){return _vm.insertCommand('size', 12)}}},[_vm._v(\" Font size \")]),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.selectedFont),expression:\"selectedFont\"}],staticClass:\"style-button\",on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.selectedFont=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"Font\")]),_c('option',{staticStyle:{\"font-family\":\"aller\"},attrs:{\"value\":\"aller\"}},[_vm._v(\"Aller (Textbox)\")]),_c('option',{staticStyle:{\"font-family\":\"riffic\"},attrs:{\"value\":\"riffic\"}},[_vm._v(\"Riffic (Bold text)\")]),_c('option',{staticStyle:{\"font-family\":\"hashtag\"},attrs:{\"value\":\"hashtag\"}},[_vm._v(\"Hashtag (Sayori)\")]),_c('option',{staticStyle:{\"font-family\":\"ammy_handwriting\"},attrs:{\"value\":\"ammy_handwriting\"}},[_vm._v(\"Ammy's Handwriting (Natsuki)\")]),_c('option',{staticStyle:{\"font-family\":\"journal\"},attrs:{\"value\":\"journal\"}},[_vm._v(\"Journal (Monika)\")]),_c('option',{staticStyle:{\"font-family\":\"jp_hand_slanted\"},attrs:{\"value\":\"jp_hand_slanted\"}},[_vm._v(\"JP Hand Slanted (Yuri)\")]),_c('option',{staticStyle:{\"font-family\":\"damagrafik_script\"},attrs:{\"value\":\"damagrafik_script\"}},[_vm._v(\"Damagrafik (Yuri, Act 2)\")]),_c('option',{staticStyle:{\"font-family\":\"as_i_lay_dying\"},attrs:{\"value\":\"as_i_lay_dying\"}},[_vm._v(\"As I Lay Dying (Yuri, Act Unused)\")]),_c('option',{staticStyle:{\"font-family\":\"halogen\"},attrs:{\"value\":\"halogen\"}},[_vm._v(\"Halogen (MC)\")])]),_c('button',{staticClass:\"style-button\",on:{\"click\":function($event){return _vm.selectColor('text')}}},[_vm._v(\" Text color \")]),_c('button',{staticClass:\"style-button\",on:{\"click\":function($event){return _vm.selectColor('outline')}}},[_vm._v(\" Outline color \")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","const aroundContextSize = 5;\n\nexport class StringWalker {\n\tprivate i: number = 0;\n\tpublic constructor(private readonly str: string) {}\n\n\tpublic get pos(): number {\n\t\treturn this.i;\n\t}\n\n\tpublic current(): string {\n\t\treturn this.str[this.i];\n\t}\n\n\tpublic get around(): string {\n\t\treturn this.str.slice(\n\t\t\tMath.max(0, this.i - aroundContextSize),\n\t\t\tthis.i + aroundContextSize\n\t\t);\n\t}\n\n\tpublic get ahead(): string {\n\t\treturn this.str[this.i + 1];\n\t}\n\n\tpublic get behind(): string {\n\t\treturn this.str[this.i + 1];\n\t}\n\n\tpublic next(): string {\n\t\t++this.i;\n\t\treturn this.current();\n\t}\n}\n","import { StringWalker } from './string-walker';\n\ninterface ITextToken {\n\tcontent: string;\n\tpos: number;\n\ttype: 'text';\n}\nexport interface ICommandToken {\n\tcommandName: string;\n\targument: string;\n\tpos: number;\n\ttype: 'command';\n}\ninterface ICommandCloseToken {\n\tcommandName: string;\n\tpos: number;\n\ttype: 'commandClose';\n}\ninterface INewlineToken {\n\ttype: 'newline';\n\tpos: number;\n}\n\nexport type Token =\n\t| ITextToken\n\t| ICommandToken\n\t| ICommandCloseToken\n\t| INewlineToken;\n\nexport function tokenize(str: string): Token[] {\n\tconst tokens: Token[] = [];\n\tconst stringWalker = new StringWalker(str);\n\tlet currentTokenState: TokenizerState = tokenStateNormal;\n\twhile (currentTokenState !== tokenStateEnd) {\n\t\tcurrentTokenState = currentTokenState(tokens, stringWalker);\n\t}\n\treturn tokens;\n}\n\ntype TokenizerState = (\n\tcontents: Token[],\n\twalker: StringWalker\n) => TokenizerState;\n\nfunction tokenStateNormal(\n\tcontents: Token[],\n\twalker: StringWalker\n): TokenizerState {\n\tif (walker.current() === undefined) return tokenStateEnd;\n\tif (walker.current() === '{') return tokenStateCommand;\n\tif (walker.current() === '\\n') return tokenStateNewLine;\n\treturn tokenText;\n}\n\nfunction tokenStateEnd(): TokenizerState {\n\treturn tokenStateEnd;\n}\n\nfunction tokenText(contents: Token[], walker: StringWalker): TokenizerState {\n\tconst { pos } = walker;\n\tlet textContent = '';\n\tlet escape = false;\n\tlet nextState: TokenizerState;\n\twhile (true) {\n\t\tif (walker.current() === undefined) {\n\t\t\tnextState = tokenStateEnd;\n\t\t\tbreak;\n\t\t} else if (escape) {\n\t\t\ttextContent += walker.current();\n\t\t\tescape = false;\n\t\t} else if (walker.current() === '\\\\') {\n\t\t\tescape = true;\n\t\t} else if (walker.current() === '{' || walker.current() === '\\n') {\n\t\t\tnextState = tokenStateNormal;\n\t\t\tbreak;\n\t\t} else {\n\t\t\ttextContent += walker.current();\n\t\t}\n\t\twalker.next();\n\t}\n\tcontents.push({\n\t\ttype: 'text',\n\t\tpos,\n\t\tcontent: textContent,\n\t});\n\treturn nextState;\n}\n\nfunction error(walker: StringWalker, msg: string): never {\n\tthrow new Error(\n\t\t`Error at position ${walker.pos}: (around: ${walker.around}) ${msg}`\n\t);\n}\n\nfunction tokenStateCommand(\n\tcontents: Token[],\n\twalker: StringWalker\n): TokenizerState {\n\tconst { pos } = walker;\n\tif (walker.current() !== '{') {\n\t\tthrow new Error('Parser error: Command does not start with {');\n\t}\n\tconst closing = walker.next() === '/';\n\tif (closing) {\n\t\twalker.next();\n\t}\n\tlet commandName = '';\n\tlet argument = '';\n\tlet argumentsState = false;\n\n\twhile (true) {\n\t\tif (walker.current() === undefined) {\n\t\t\terror(walker, 'Unexpected end of text inside a command');\n\t\t}\n\t\tif (walker.current() === '}') {\n\t\t\tbreak;\n\t\t} else if (!argumentsState) {\n\t\t\tif (walker.current().match(/[a-z]/i)) {\n\t\t\t\tcommandName += walker.current();\n\t\t\t} else if (walker.current() === '=') {\n\t\t\t\tif (closing) {\n\t\t\t\t\terror(walker, 'Closing commands may not contain arguments');\n\t\t\t\t}\n\t\t\t\targumentsState = true;\n\t\t\t} else {\n\t\t\t\terror(walker, 'Unexpected character in command name.');\n\t\t\t}\n\t\t} else {\n\t\t\targument += walker.current();\n\t\t}\n\t\twalker.next();\n\t}\n\twalker.next();\n\tif (closing) {\n\t\tcontents.push({\n\t\t\ttype: 'commandClose',\n\t\t\tcommandName,\n\t\t\tpos,\n\t\t});\n\t} else {\n\t\tcontents.push({\n\t\t\ttype: 'command',\n\t\t\tpos,\n\t\t\targument,\n\t\t\tcommandName,\n\t\t});\n\t}\n\treturn tokenStateNormal;\n}\n\nfunction tokenStateNewLine(\n\tcontents: Token[],\n\twalker: StringWalker\n): TokenizerState {\n\tcontents.push({ type: 'newline', pos: walker.pos });\n\twalker.next();\n\treturn tokenStateNormal;\n}\n","import { ITextStyle } from './textRenderer';\n\ntype Command = (style: ITextStyle, parameter?: string) => ITextStyle;\n\nexport default new Map<string, Command>([\n\tparamlessOp('i', style => ({ ...style, isItalic: true })),\n\tparamlessOp('b', style => ({ ...style, isBold: true })),\n\tparamlessOp('u', style => ({ ...style, isUnderlined: true })),\n\tparamlessOp('s', style => ({\n\t\t...style,\n\t\tisStrikethrough: true,\n\t})),\n\tparamlessOp('plain', style => ({\n\t\t...style,\n\t\tisStrikethrough: false,\n\t\tisUnderlined: false,\n\t\tisBold: false,\n\t\tisItalic: false,\n\t})),\n\tparamlessOp('edited', style => ({\n\t\t...style,\n\t\tfontName: 'verily',\n\t\tstrokeColor: '#000000',\n\t\tstrokeWidth: 20,\n\t\tletterSpacing: 8,\n\t})),\n\trelativeNumberOp('k', (style, relative, parameter) => ({\n\t\t...style,\n\t\tletterSpacing: relative ? style.letterSpacing + parameter : parameter,\n\t})),\n\trelativeNumberOp('size', (style, relative, parameter) => ({\n\t\t...style,\n\t\tfontSize: relative ? style.fontSize + parameter : parameter,\n\t})),\n\trelativeNumberOp('alpha', (style, relative, parameter) => ({\n\t\t...style,\n\t\talpha: relative ? style.alpha + parameter : parameter,\n\t})),\n\t[\n\t\t'font',\n\t\t(style, parameter?) => {\n\t\t\treturn { ...style, fontName: parameter! };\n\t\t},\n\t],\n\t[\n\t\t'color',\n\t\t(style, parameter?) => {\n\t\t\treturn { ...style, color: parameter! };\n\t\t},\n\t],\n\t[\n\t\t'outlinecolor',\n\t\t(style, parameter?) => {\n\t\t\treturn { ...style, strokeColor: parameter! };\n\t\t},\n\t],\n]);\n\nfunction paramlessOp(\n\tname: string,\n\top: (style: ITextStyle) => ITextStyle\n): [string, Command] {\n\treturn [\n\t\tname,\n\t\t(style: ITextStyle, parameter?: string) => {\n\t\t\tif (parameter) {\n\t\t\t\tthrow new Error(`Operator '${name}' does not take any arguments.`);\n\t\t\t}\n\t\t\treturn op(style);\n\t\t},\n\t];\n}\n\nfunction numberOp(\n\tname: string,\n\top: (style: ITextStyle, param: number) => ITextStyle\n): [string, Command] {\n\treturn [\n\t\tname,\n\t\t(style: ITextStyle, parameter?: string) => {\n\t\t\tif (!parameter) throw new Error(`Operator '${name}' needs an argument.`);\n\t\t\tconst num = Number(parameter);\n\t\t\tif (isNaN(num)) {\n\t\t\t\tthrow new Error(`Operator '${name}' needs a numeric argument.`);\n\t\t\t}\n\t\t\treturn op(style, num);\n\t\t},\n\t];\n}\n\nfunction relativeNumberOp(\n\tname: string,\n\top: (style: ITextStyle, relative: boolean, param: number) => ITextStyle\n): [string, Command] {\n\treturn [\n\t\tname,\n\t\t(style: ITextStyle, parameter?: string) => {\n\t\t\tif (!parameter) throw new Error(`Operator '${name}' needs an argument.`);\n\t\t\tconst relative = parameter[0] === '+' || parameter[0] === '-';\n\t\t\tconst num = Number(parameter);\n\t\t\tif (isNaN(num)) {\n\t\t\t\tthrow new Error(`Operator '${name}' needs a numeric argument.`);\n\t\t\t}\n\t\t\treturn op(style, relative, num);\n\t\t},\n\t];\n}\n","import { tokenize, Token, ICommandToken } from './tokenizer';\n\nimport textCommands from './textCommands';\nimport { exhaust } from '@/util/exhaust';\n\nexport interface ITextStyle {\n\tfontName: string;\n\tfontSize: number;\n\tisBold: boolean;\n\tisUnderlined: boolean;\n\tisStrikethrough: boolean;\n\tisItalic: boolean;\n\tcolor: string;\n\tstrokeWidth: number;\n\tstrokeColor: string;\n\tletterSpacing: number;\n\tlineSpacing: number;\n\talpha: number;\n}\n\ninterface ITextRenderItem {\n\tx: number;\n\ty: number;\n\theight: number;\n\twidth: number;\n}\n\ninterface IDrawCharacterItem extends ITextRenderItem {\n\ttype: 'character';\n\tcharacter: string;\n\tstyle: ITextStyle;\n}\n\ninterface INewlineItem extends ITextRenderItem {\n\ttype: 'newline';\n}\n\ntype RenderItem = IDrawCharacterItem | INewlineItem;\n\n// const widthCache = new Map<ITextStyle, Map<string, number>>();\n// const heightCache = new Map<ITextStyle, number>();\n\nexport class TextRenderer {\n\tpublic static textCommands = textCommands;\n\tprivate renderParts!: RenderItem[];\n\tprivate readonly tokens: Token[];\n\n\tpublic constructor(\n\t\tprivate str: string,\n\t\tprivate readonly baseStyle: ITextStyle\n\t) {\n\t\tthis.tokens = tokenize(str);\n\t\tthis.rebuildParts();\n\t}\n\n\tpublic rebuildParts() {\n\t\tthis.renderParts = this.getRenderParts(this.tokens, this.baseStyle);\n\t}\n\n\tpublic async loadFonts() {\n\t\tif (!('fonts' in document)) return;\n\t\tconst fonts = new Set<string>();\n\t\tlet currentStyle: ITextStyle | null = null;\n\t\tfor (const part of this.renderParts) {\n\t\t\tif (!('style' in part)) continue;\n\t\t\tif (part.style !== currentStyle) {\n\t\t\t\tcurrentStyle = part.style;\n\t\t\t\tif (currentStyle.fontName) {\n\t\t\t\t\tfonts.add(currentStyle.fontName);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet neededToLoad = false;\n\t\tfor (const font of fonts) {\n\t\t\tconst doc = document as any;\n\t\t\tconst fontString = `8px ${font}`;\n\t\t\tif (!doc.fonts.check(fontString)) {\n\t\t\t\tneededToLoad = true;\n\t\t\t\tawait doc.fonts.load(fontString);\n\t\t\t}\n\t\t}\n\n\t\tif (neededToLoad) {\n\t\t\tconst tokens = tokenize(this.str);\n\t\t\tthis.renderParts = this.getRenderParts(tokens, this.baseStyle);\n\t\t}\n\t}\n\n\tpublic render(ctx: CanvasRenderingContext2D): void {\n\t\tctx.save();\n\t\tlet currentStyle: ITextStyle | null = null;\n\t\tfor (const part of this.renderParts) {\n\t\t\tif (part.type === 'newline') continue;\n\t\t\tif (part.style !== currentStyle) {\n\t\t\t\tcurrentStyle = part.style;\n\t\t\t\tapplyTextStyleToCanvas(currentStyle, ctx);\n\t\t\t}\n\t\t\tif (currentStyle.strokeWidth > 0 && currentStyle.strokeColor > '') {\n\t\t\t\tctx.strokeText(part.character, part.x, part.y);\n\t\t\t}\n\t\t}\n\t\tfor (const part of this.renderParts) {\n\t\t\tif (part.type === 'newline') continue;\n\t\t\tif (part.style !== currentStyle) {\n\t\t\t\tcurrentStyle = part.style;\n\t\t\t\tapplyTextStyleToCanvas(currentStyle, ctx);\n\t\t\t}\n\t\t\tctx.fillText(part.character, part.x, part.y);\n\t\t}\n\t\tctx.restore();\n\t}\n\n\tpublic quote() {\n\t\tenum State {\n\t\t\tNone,\n\t\t\tExplictQuote,\n\t\t\tImplictQuote,\n\t\t\tStar,\n\t\t}\n\n\t\tlet lastChar = -1;\n\t\tlet state = State.None;\n\n\t\tfor (let i = 0; i < this.renderParts.length; ++i) {\n\t\t\tconst part = this.renderParts[i];\n\t\t\tif (part.type !== 'character') continue;\n\t\t\tswitch (state) {\n\t\t\t\tcase State.None:\n\t\t\t\t\tif (part.character.match(/\\s/)) continue;\n\t\t\t\t\tif (part.character === '\"') {\n\t\t\t\t\t\tstate = State.ExplictQuote;\n\t\t\t\t\t\tlastChar = i;\n\t\t\t\t\t} else if (part.character === '*') {\n\t\t\t\t\t\tstate = State.Star;\n\t\t\t\t\t\tlastChar = i;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.renderParts.splice(i, 0, {\n\t\t\t\t\t\t\ttype: 'character',\n\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\ty: 0,\n\t\t\t\t\t\t\tstyle: part.style,\n\t\t\t\t\t\t\tcharacter: '\"',\n\t\t\t\t\t\t\theight: part.height,\n\t\t\t\t\t\t\twidth: measureWidth(part.style, '\"'),\n\t\t\t\t\t\t});\n\t\t\t\t\t\ti++;\n\t\t\t\t\t\tlastChar = i;\n\t\t\t\t\t\tstate = State.ImplictQuote;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase State.ExplictQuote:\n\t\t\t\t\tlastChar = i;\n\t\t\t\t\tif (part.character === '\"') {\n\t\t\t\t\t\tstate = State.None;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase State.ImplictQuote:\n\t\t\t\t\tif (part.character.match(/\\s/)) continue;\n\t\t\t\t\tif (part.character === '*') {\n\t\t\t\t\t\tthis.renderParts.splice(lastChar + 1, 0, {\n\t\t\t\t\t\t\ttype: 'character',\n\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\ty: 0,\n\t\t\t\t\t\t\tstyle: part.style,\n\t\t\t\t\t\t\tcharacter: '\"',\n\t\t\t\t\t\t\theight: part.height,\n\t\t\t\t\t\t\twidth: measureWidth(part.style, '\"'),\n\t\t\t\t\t\t});\n\t\t\t\t\t\tstate = State.Star;\n\t\t\t\t\t\ti++;\n\t\t\t\t\t}\n\t\t\t\t\tlastChar = i;\n\t\t\t\t\tbreak;\n\t\t\t\tcase State.Star:\n\t\t\t\t\tif (part.character === '*') {\n\t\t\t\t\t\tstate = State.None;\n\t\t\t\t\t}\n\t\t\t\t\tlastChar = i;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tconst lastPart = this.renderParts[lastChar] as IDrawCharacterItem;\n\t\tif (lastPart && state === State.Star) {\n\t\t\tthis.renderParts.splice(lastChar + 1, 0, {\n\t\t\t\ttype: 'character',\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\tstyle: lastPart.style,\n\t\t\t\tcharacter: '*',\n\t\t\t\theight: lastPart.height,\n\t\t\t\twidth: measureWidth(lastPart.style, '\"'),\n\t\t\t});\n\t\t}\n\t\tif (\n\t\t\tlastPart &&\n\t\t\t(state === State.ExplictQuote || state === State.ImplictQuote)\n\t\t) {\n\t\t\tthis.renderParts.splice(lastChar + 1, 0, {\n\t\t\t\ttype: 'character',\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\tstyle: lastPart.style,\n\t\t\t\tcharacter: '\"',\n\t\t\t\theight: lastPart.height,\n\t\t\t\twidth: measureWidth(lastPart.style, '\"'),\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic fixAlignment(\n\t\talignment: 'left' | 'center' | 'right',\n\t\txStart: number,\n\t\txEnd: number,\n\t\tyStart: number,\n\t\tmaxLineWidth: number\n\t) {\n\t\tlet lineWidth = 0;\n\t\tlet currentLine: RenderItem[] = [];\n\n\t\tfunction fixLine() {\n\t\t\tlet x = xStart;\n\t\t\tif (alignment === 'center') {\n\t\t\t\tx = xStart + (xEnd - xStart) / 2 - lineWidth / 2;\n\t\t\t} else if (alignment === 'right') {\n\t\t\t\tx = xEnd - lineWidth;\n\t\t\t}\n\t\t\tfor (const item of currentLine) {\n\t\t\t\titem.x = x;\n\t\t\t\tx += item.width;\n\t\t\t}\n\t\t}\n\t\tlet renderParts = this.renderParts;\n\n\t\tif (maxLineWidth > 0) {\n\t\t\trenderParts = this.applyLineWrapping(\n\t\t\t\tthis.renderParts.slice(0),\n\t\t\t\tmaxLineWidth\n\t\t\t);\n\t\t}\n\n\t\tlet y = yStart;\n\t\tconst lineHeights = [];\n\t\tlet lineHeight = 0;\n\n\t\tfor (const item of renderParts) {\n\t\t\tlineHeight = Math.max(lineHeight, item.height);\n\n\t\t\tif (item.type === 'newline') {\n\t\t\t\tlineHeights.push(lineHeight);\n\t\t\t\tlineHeight = 0;\n\t\t\t}\n\t\t}\n\t\tlineHeights.push(lineHeight);\n\n\t\tlet line = 0;\n\n\t\tfor (const item of renderParts) {\n\t\t\tlineHeight = Math.max(lineHeight, item.height);\n\t\t\titem.y = y;\n\t\t\tcurrentLine.push(item);\n\t\t\tlineWidth += item.width;\n\n\t\t\tif (item.type === 'newline') {\n\t\t\t\tfixLine();\n\t\t\t\ty += lineHeights[++line] || 0;\n\t\t\t\tlineWidth = 0;\n\t\t\t\tlineHeight = 0;\n\t\t\t\tcurrentLine = [];\n\t\t\t} else if (item.type === 'character') {\n\t\t\t\tconst lastItem = currentLine[currentLine.length - 1];\n\t\t\t\tif (lastItem.type === 'character') {\n\t\t\t\t\tlineWidth += lastItem.style.letterSpacing;\n\t\t\t\t\tlastItem.width += lastItem.style.letterSpacing;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tfixLine();\n\t}\n\n\tpublic getHeight(maxLineWidth: number) {\n\t\tlet lineHeight = 0;\n\t\tlet height = 0;\n\t\tconst renderParts =\n\t\t\tmaxLineWidth === 0\n\t\t\t\t? this.renderParts\n\t\t\t\t: this.applyLineWrapping(this.renderParts.slice(0), maxLineWidth);\n\n\t\tfor (const item of renderParts) {\n\t\t\tlineHeight = Math.max(lineHeight, item.height);\n\n\t\t\tif (item.type === 'newline') {\n\t\t\t\theight += lineHeight;\n\t\t\t\tlineHeight = 0;\n\t\t\t}\n\t\t}\n\t\theight += lineHeight;\n\n\t\treturn height;\n\t}\n\n\tpublic getWidth() {\n\t\tlet lineWidth = 0;\n\t\tlet maxLineWidth = 0;\n\t\tlet lastItemInLine: RenderItem | null = null;\n\n\t\tfor (const item of this.renderParts) {\n\t\t\tlineWidth += item.width;\n\n\t\t\tif (item.type === 'newline') {\n\t\t\t\tmaxLineWidth = Math.max(maxLineWidth, lineWidth);\n\t\t\t\tlineWidth = 0;\n\t\t\t\tlastItemInLine = null;\n\t\t\t} else if (item.type === 'character') {\n\t\t\t\tif (lastItemInLine && lastItemInLine.type === 'character') {\n\t\t\t\t\tlineWidth += lastItemInLine.style.letterSpacing;\n\t\t\t\t}\n\t\t\t\tlastItemInLine = item;\n\t\t\t}\n\t\t}\n\t\tmaxLineWidth = Math.max(maxLineWidth, lineWidth);\n\t\treturn maxLineWidth;\n\t}\n\n\tprivate getRenderParts(tokens: Token[], baseStyle: ITextStyle): RenderItem[] {\n\t\tconst renderParts: RenderItem[] = [];\n\t\tconst styleStack: ITextStyle[] = [];\n\t\tconst tagStack: Array<ICommandToken | null> = [];\n\t\tlet currentStyleHeight: number = measureHeight(baseStyle);\n\t\tlet currentStyle = baseStyle;\n\t\tlet currentTag: ICommandToken | null = null;\n\t\tfor (const token of tokens) {\n\t\t\tswitch (token.type) {\n\t\t\t\tcase 'command':\n\t\t\t\t\tif (TextRenderer.textCommands.has(token.commandName)) {\n\t\t\t\t\t\tstyleStack.push(currentStyle);\n\t\t\t\t\t\ttagStack.push(currentTag);\n\t\t\t\t\t\tcurrentStyle = TextRenderer.textCommands.get(token.commandName)!(\n\t\t\t\t\t\t\tcurrentStyle,\n\t\t\t\t\t\t\ttoken.argument\n\t\t\t\t\t\t);\n\t\t\t\t\t\tcurrentStyleHeight = measureHeight(currentStyle);\n\t\t\t\t\t\tcurrentTag = token;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t`There is no text command called '${token.commandName}' at position ${token.pos}.`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'commandClose':\n\t\t\t\t\tif (!currentTag) {\n\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t`Unmatched closing command at position ${token.pos}. Closed '${token.commandName}', but no commands are currently open.`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif (token.commandName !== currentTag.commandName) {\n\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t`Unmatched closing command at position ${token.pos}. Closed '${token.commandName}', expected to close '${currentTag}' first. (Opened at position ${currentTag.pos})`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tcurrentTag = tagStack.pop()!;\n\t\t\t\t\tcurrentStyle = styleStack.pop()!;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'newline':\n\t\t\t\t\trenderParts.push({\n\t\t\t\t\t\theight: currentStyleHeight,\n\t\t\t\t\t\twidth: 0,\n\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\ty: 0,\n\t\t\t\t\t\ttype: 'newline',\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'text':\n\t\t\t\t\tfor (const character of token.content) {\n\t\t\t\t\t\trenderParts.push({\n\t\t\t\t\t\t\ttype: 'character',\n\t\t\t\t\t\t\tcharacter,\n\t\t\t\t\t\t\theight: currentStyleHeight,\n\t\t\t\t\t\t\twidth: measureWidth(currentStyle, character),\n\t\t\t\t\t\t\tstyle: currentStyle,\n\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\ty: 0,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn renderParts;\n\t}\n\n\tprivate applyLineWrapping(\n\t\tparts: RenderItem[],\n\t\tmaxLineWidth: number\n\t): RenderItem[] {\n\t\tlet lastBreakPoint = -1;\n\t\tlet currentLineWidth = 0;\n\t\tlet lastBreakLineWidth = 0;\n\t\tconst newParts: RenderItem[] = [];\n\n\t\tfor (const item of parts) {\n\t\t\tif (item.type === 'newline') {\n\t\t\t\tlastBreakPoint = -1;\n\t\t\t\tcurrentLineWidth = 0;\n\t\t\t\tlastBreakLineWidth = 0;\n\t\t\t\tnewParts.push(item);\n\t\t\t} else if (item.type === 'character') {\n\t\t\t\tif (item.character === ' ') {\n\t\t\t\t\tif (currentLineWidth > maxLineWidth) {\n\t\t\t\t\t\tlastBreakPoint = -1;\n\t\t\t\t\t\tcurrentLineWidth = 0;\n\t\t\t\t\t\tlastBreakLineWidth = 0;\n\t\t\t\t\t\tnewParts.push({\n\t\t\t\t\t\t\ttype: 'newline',\n\t\t\t\t\t\t\theight: item.height,\n\t\t\t\t\t\t\twidth: 0,\n\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\ty: 0,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcurrentLineWidth += item.width;\n\t\t\t\t\t\tlastBreakLineWidth = currentLineWidth;\n\t\t\t\t\t\tlastBreakPoint = newParts.length;\n\t\t\t\t\t\tnewParts.push(item);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tcurrentLineWidth += item.width;\n\n\t\t\t\t\tif (currentLineWidth > maxLineWidth && lastBreakPoint !== -1) {\n\t\t\t\t\t\tcurrentLineWidth -= lastBreakLineWidth;\n\t\t\t\t\t\tnewParts.splice(lastBreakPoint, 1, {\n\t\t\t\t\t\t\ttype: 'newline',\n\t\t\t\t\t\t\theight: item.height,\n\t\t\t\t\t\t\twidth: 0,\n\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\ty: 0,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tlastBreakPoint = -1;\n\t\t\t\t\t\tlastBreakLineWidth = 0;\n\t\t\t\t\t\tnewParts.push(item);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tnewParts.push(item);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\texhaust(item);\n\t\t\t}\n\t\t}\n\n\t\treturn newParts;\n\t}\n}\n\nconst tmpContext = document.createElement('canvas').getContext('2d')!;\nlet lastStyle: ITextStyle | null = null;\n\nfunction measureWidth(textStyle: ITextStyle, character: string): number {\n\tif (textStyle !== lastStyle) {\n\t\tapplyTextStyleToCanvas(textStyle, tmpContext);\n\t\tlastStyle = textStyle;\n\t}\n\treturn tmpContext.measureText(character).width;\n}\n\nconst heightCache = new Map<string, number>();\n\nfunction measureHeight(textStyle: ITextStyle): number {\n\tconst font = textStyle.fontSize + ' ' + textStyle.fontName;\n\tif (heightCache.has(font)) {\n\t\treturn heightCache.get(font)! * textStyle.lineSpacing;\n\t}\n\n\tconst text = document.createElement('span');\n\ttext.innerHTML = 'Hg';\n\ttext.style.fontFamily = textStyle.fontName;\n\ttext.style.fontSize = `${textStyle.fontSize}px`;\n\ttext.style.lineHeight = '1';\n\n\tconst div = document.createElement('div');\n\tdiv.style.opacity = '0';\n\tdiv.style.fontFamily = textStyle.fontName;\n\tdiv.style.fontSize = `${textStyle.fontSize}px`;\n\tdiv.style.lineHeight = '1';\n\tdiv.style.position = 'absolute';\n\tdiv.style.top = '0';\n\tdiv.style.left = '0';\n\tdiv.appendChild(text);\n\n\tdocument.body.appendChild(div);\n\n\ttry {\n\t\tconst height = div.offsetHeight;\n\t\theightCache.set(font, height);\n\t\treturn height * textStyle.lineSpacing;\n\t} finally {\n\t\tdiv.remove();\n\t}\n}\n\nfunction applyTextStyleToCanvas(\n\tstyle: ITextStyle,\n\tctx: CanvasRenderingContext2D\n) {\n\tctx.textAlign = 'left';\n\tctx.font =\n\t\t(style.isItalic ? 'italic ' : '') +\n\t\t(style.isBold ? 'bold ' : '') +\n\t\tstyle.fontSize +\n\t\t'px ' +\n\t\tstyle.fontName;\n\tctx.lineJoin = 'round';\n\n\tif (style.strokeWidth > 0 && style.strokeColor > '') {\n\t\tctx.strokeStyle = style.strokeColor;\n\t\tctx.lineWidth = style.strokeWidth;\n\t} else {\n\t\tctx.strokeStyle = '';\n\t\tctx.lineWidth = 0;\n\t}\n\n\tctx.globalAlpha = style.alpha || 0;\n\tctx.fillStyle = style.color;\n}\n","import { ITextStyle } from '@/renderer/textRenderer/textRenderer';\nimport { screenWidth } from '@/constants/base';\n\n// tslint:disable: no-magic-numbers\nexport const TextBoxWidth = 816;\nexport const TextBoxCorruptedWidth = 900;\nexport const TextBoxHeight = 146;\nexport const TextBoxY = 568;\nexport const TextBoxKerning = 0;\nexport const TextBoxLineHeight = 29;\nexport const TextBoxCorruptedKerning = 8;\nexport const TextBoxTextXOffset = 38;\nexport const TextBoxTextYOffset = 50;\n\nexport const TextBoxTextCorruptedXOffset = 9;\nexport const TextBoxTextCorruptedYOffset = 9;\n\nexport const NameboxHeight = 39;\nexport const NameboxWidth = 168;\nexport const NameboxXOffset = 34;\nexport const NameboxTextYOffset = 29;\n\nexport const ControlsYBottomOffset = 12;\nexport const ControlsXHistoryOffset = -126;\nexport const ControlsXSkipOffset = -72;\nexport const ControlsXStuffOffset = -38;\n\nexport const ArrowXRightOffset = 30.75;\nexport const ArrowYBottomOffset = 26;\n\nexport const GlowRX = 426;\nexport const GlowRY = 58;\n\nexport const BaseTextStyle: ITextStyle = {\n\talpha: 1,\n\tcolor: 'black',\n\tfontName: 'aller',\n\tfontSize: 24,\n\tisBold: false,\n\tisItalic: false,\n\tisStrikethrough: false,\n\tisUnderlined: false,\n\tletterSpacing: 0,\n\tlineSpacing: 1,\n\tstrokeColor: '',\n\tstrokeWidth: 0,\n};\n\nexport const NameboxTextStyle: ITextStyle = {\n\t...BaseTextStyle,\n\tfontName: 'riffic',\n\tfontSize: 24,\n\tstrokeColor: '#bb5599',\n\tstrokeWidth: 6,\n\tcolor: 'white',\n\tletterSpacing: 1,\n};\n\nexport const ControlsTextStyle = {\n\talign: 'left' as CanvasTextAlign,\n\tfont: '13px aller',\n\tfill: {\n\t\tstyle: '#522',\n\t},\n};\n\nexport const ControlsTextDisabledStyle = {\n\t...ControlsTextStyle,\n\tfill: {\n\t\tstyle: '#a66',\n\t},\n};\n\nexport const TextBoxStyle = {\n\talign: 'left' as CanvasTextAlign,\n\tfont: '24px aller',\n\toutline: {\n\t\tstyle: '#523140',\n\t\twidth: 4,\n\t},\n\tfill: {\n\t\tstyle: '#fff',\n\t},\n};\n\nexport const TextBoxCorruptedStyle = {\n\talign: 'left' as CanvasTextAlign,\n\tfont: '24px verily',\n\toutline: {\n\t\tstyle: '#000',\n\t\twidth: 20,\n\t},\n\tfill: {\n\t\tstyle: '#fff',\n\t},\n};\n\nexport const TextBoxX = screenWidth / 2 - TextBoxWidth / 2; // 232\nexport const TextBoxCorruptedX = screenWidth / 2 - TextBoxCorruptedWidth / 2;\nexport const TextBoxTextX = TextBoxX + TextBoxTextXOffset;\nexport const TextBoxTextY = TextBoxY + TextBoxTextYOffset;\n\nexport const NameboxY = TextBoxY - NameboxHeight;\nexport const NameboxX = TextBoxX + NameboxXOffset;\nexport const NameboxTextX = NameboxX + NameboxWidth / 2;\nexport const NameboxTextY = NameboxY + NameboxTextYOffset;\n\nexport const ControlsXHistory = TextBoxX + ControlsXHistoryOffset;\nexport const ControlsXSkip = TextBoxX + ControlsXSkipOffset;\nexport const ControlsXStuff = TextBoxX + ControlsXStuffOffset;\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\nimport environment from '@/environments/environment';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport { State } from 'vuex-class-decorator';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport { RGBAColor } from '@/util/colors/rgb';\nimport Color from '../color/color.vue';\nimport { TextRenderer } from '@/renderer/textRenderer/textRenderer';\nimport { NameboxTextStyle } from '@/constants/textBox';\n\n@Component({\n\tcomponents: { Color },\n})\nexport default class TextPanel extends Vue {\n\tpublic $store!: Store<IRootState>;\n\n\t@State('vertical', { namespace: 'ui' }) private readonly vertical!: boolean;\n\n\t@Prop({ required: true, type: String }) private readonly value!: string;\n\t@Prop({ type: String, default: '' }) private readonly title!: string;\n\n\tprivate colorSelector: '' | 'text' | 'outline' = '';\n\tprivate selectedFont: string = '';\n\tprivate selectedColor: string = '#000000';\n\tprivate rememberedStart: number = 0;\n\tprivate rememberedEnd: number = 0;\n\tprivate error: string = '';\n\n\t@Watch('selectedFont')\n\tprivate onSelectedFontChange() {\n\t\tif (this.selectedFont === '') return;\n\t\tconsole.log(this.selectedFont);\n\t\tthis.insertCommand('font', this.selectedFont);\n\t\tthis.selectedFont = '';\n\t}\n\n\tprivate onValueChanged() {\n\t\tconst val = (this.$refs.textArea as HTMLTextAreaElement).value;\n\t\ttry {\n\t\t\t// tslint:disable-next-line: no-unused-expression\n\t\t\tnew TextRenderer(val, NameboxTextStyle);\n\t\t\tthis.error = '';\n\t\t} catch (e) {\n\t\t\tthis.error = (e as Error).message;\n\t\t\tconsole.error(e);\n\t\t}\n\t\tthis.$emit('input', val);\n\t}\n\n\tprivate selectColor(colorSelector: '' | 'text' | 'outline') {\n\t\tconst el = this.$refs.textArea as HTMLTextAreaElement;\n\t\tthis.colorSelector = colorSelector;\n\t\tthis.rememberedStart = el.selectionStart;\n\t\tthis.rememberedEnd = el.selectionEnd;\n\t}\n\n\tprivate applyColor() {\n\t\tconst color = this.selectedColor;\n\t\tconst colorSelector = this.colorSelector;\n\t\tconst apply = () => {\n\t\t\tconst el = this.$refs.textArea as HTMLTextAreaElement;\n\t\t\tif (!el) {\n\t\t\t\tthis.$nextTick(apply);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tel.selectionStart = this.rememberedStart;\n\t\t\tel.selectionEnd = this.rememberedEnd;\n\t\t\tthis.insertCommand(\n\t\t\t\tcolorSelector === 'text' ? 'color' : 'outlinecolor',\n\t\t\t\tcolor\n\t\t\t);\n\t\t};\n\t\tthis.$nextTick(apply);\n\t\tthis.selectedColor = '#000000';\n\t\tthis.colorSelector = '';\n\t}\n\n\tprivate insertText(text: string) {\n\t\tconst el = this.$refs.textArea as HTMLTextAreaElement;\n\t\tconst val = el.value;\n\t\tconst selStart = el.selectionStart;\n\t\tconst selEnd = el.selectionEnd;\n\t\tel.value = val.slice(0, selStart) + text + val.slice(selEnd);\n\t\tel.selectionStart = el.selectionEnd = selStart + text.length;\n\t\tel.focus();\n\t\tthis.onValueChanged();\n\t}\n\n\tprivate insertCommand(command: string, arg?: any) {\n\t\tconst el = this.$refs.textArea as HTMLTextAreaElement;\n\t\tconst val = el.value;\n\t\tconst selStart = el.selectionStart;\n\t\tconst selEnd = el.selectionEnd;\n\t\tconst selectedText = val.slice(selStart, selEnd);\n\t\tconst before = val.slice(0, selStart);\n\t\tconst after = val.slice(selEnd);\n\t\tlet commandOpen = command;\n\t\tif (arg) {\n\t\t\tcommandOpen += '=' + arg;\n\t\t}\n\t\tel.value = `${before}{${commandOpen}}${selectedText}{/${command}}${after}`;\n\t\tel.selectionStart = selStart + commandOpen.length + 2;\n\t\tel.selectionEnd = el.selectionStart + selectedText.length;\n\t\tel.focus();\n\t\tthis.onValueChanged();\n\t}\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./text.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./text.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./text.vue?vue&type=template&id=dc167444&scoped=true&\"\nimport script from \"./text.vue?vue&type=script&lang=ts&\"\nexport * from \"./text.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./text.vue?vue&type=style&index=0&id=dc167444&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dc167444\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch, Mixins } from 'vue-property-decorator';\nimport {\n\tITextBox,\n\tISetTextBoxControlsVisibleMutation,\n\tISetTextBoxControlsSkipMutation,\n\tISetTextBoxControlsContinueMutation,\n\tISetTextBoxTextMutation,\n\tISetTextBoxStyleAction,\n\tISetTextBoxCustomColorMutation,\n\tISetTextBoxTalkingDefaultMutation,\n\tISetTextBoxTalkingOtherMutation,\n\tISetTextBoxCustomControlsColorMutation,\n\tISetTextBoxNameboxColorMutation,\n\tISetTextBoxNameboxWidthMutation,\n\tISetTextBoxNameboxStrokeMutation,\n\tISetTextBoxDeriveCustomColorMutation,\n\tISplitTextbox,\n\tISetTextBoxAutoQuotingMutation,\n\tIResetTextboxBounds,\n\tISetAutoWrappingMutation,\n} from '@/store/objectTypes/textbox';\nimport Toggle from '@/components/toggle.vue';\nimport { State } from 'vuex-class-decorator';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport PositionAndSize from '@/components/toolbox/commonsFieldsets/positionAndSize.vue';\nimport Layers from '@/components/toolbox/commonsFieldsets/layers.vue';\nimport Opacity from '@/components/toolbox/commonsFieldsets/opacity.vue';\nimport Delete from '@/components/toolbox/commonsFieldsets/delete.vue';\nimport { ISetObjectFlipMutation } from '@/store/objects';\nimport { PanelMixin } from './panelMixin';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport Color from '../subpanels/color/color.vue';\nimport TextEditor from '../subpanels/text/text.vue';\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t\tPositionAndSize,\n\t\tLayers,\n\t\tOpacity,\n\t\tDelete,\n\t\tColor,\n\t\tTextEditor,\n\t},\n})\nexport default class TextPanel extends Mixins(PanelMixin) {\n\tpublic $store!: Store<IRootState>;\n\n\tprivate vuexHistory!: IHistorySupport;\n\n\tprivate readonly textEditor: '' | 'name' | 'body' = '';\n\n\tprivate readonly colorSelect:\n\t\t| ''\n\t\t| 'base'\n\t\t| 'controls'\n\t\t| 'namebox'\n\t\t| 'nameboxStroke' = '';\n\n\tprivate get textbox(): ITextBox {\n\t\tconst obj = this.$store.state.objects.objects[\n\t\t\tthis.$store.state.ui.selection!\n\t\t];\n\t\tif (obj.type !== 'textBox') return undefined!;\n\t\treturn obj as ITextBox;\n\t}\n\n\tprivate get textEditorName(): string {\n\t\tif (this.textEditor === 'name') return 'Name';\n\t\tif (this.textEditor === 'body') return 'Dialog';\n\t\treturn '';\n\t}\n\n\tprivate get textEditorText(): string {\n\t\tif (this.textEditor === 'name') return this.textbox.talkingOther;\n\t\tif (this.textEditor === 'body') return this.dialog;\n\t\treturn '';\n\t}\n\n\tprivate set textEditorText(value: string) {\n\t\tif (this.textEditor === 'name') this.talkingOther = value;\n\t\telse if (this.textEditor === 'body') this.dialog = value;\n\t}\n\n\tprivate splitTextbox(): void {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/splitTextbox', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t} as ISplitTextbox);\n\t\t});\n\t}\n\n\tprivate resetPosition(): void {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/resetTextboxBounds', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t} as IResetTextboxBounds);\n\t\t});\n\t}\n\n\tprivate get talkingDefaults(): ISetTextBoxTalkingDefaultMutation['talkingDefault'] {\n\t\treturn this.textbox.talkingDefault;\n\t}\n\n\tprivate set talkingDefaults(\n\t\ttalkingDefault: ISetTextBoxTalkingDefaultMutation['talkingDefault']\n\t) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setTalkingDefault', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t\ttalkingDefault,\n\t\t\t} as ISetTextBoxTalkingDefaultMutation);\n\t\t});\n\t}\n\n\tprivate get talkingOther(): string {\n\t\treturn this.textbox.talkingOther;\n\t}\n\n\tprivate set talkingOther(talkingOther: string) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setTalkingOther', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t\ttalkingOther,\n\t\t\t} as ISetTextBoxTalkingOtherMutation);\n\t\t});\n\t}\n\n\tprivate get showControls(): boolean {\n\t\treturn this.textbox.controls;\n\t}\n\n\tprivate set showControls(controls: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setControlsVisible', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t\tcontrols,\n\t\t\t} as ISetTextBoxControlsVisibleMutation);\n\t\t});\n\t}\n\n\tprivate get allowSkipping(): boolean {\n\t\treturn this.textbox.controls;\n\t}\n\n\tprivate set allowSkipping(skip: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setSkipable', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t\tskip,\n\t\t\t} as ISetTextBoxControlsSkipMutation);\n\t\t});\n\t}\n\n\tprivate get autoQuoting(): boolean {\n\t\treturn this.textbox.autoQuoting;\n\t}\n\n\tprivate set autoQuoting(autoQuoting: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setAutoQuoting', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t\tautoQuoting,\n\t\t\t} as ISetTextBoxAutoQuotingMutation);\n\t\t});\n\t}\n\n\tprivate get autoWrap(): boolean {\n\t\treturn this.textbox.autoWrap;\n\t}\n\n\tprivate set autoWrap(autoWrap: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setAutoWrapping', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t\tautoWrap,\n\t\t\t} as ISetAutoWrappingMutation);\n\t\t});\n\t}\n\n\tprivate get showContinueArrow(): boolean {\n\t\treturn this.textbox.continue;\n\t}\n\n\tprivate set showContinueArrow(value: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setContinueArrow', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t\tcontinue: value,\n\t\t\t} as ISetTextBoxControlsContinueMutation);\n\t\t});\n\t}\n\n\tprivate get dialog(): string {\n\t\treturn this.textbox.text;\n\t}\n\n\tprivate set dialog(text: string) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setText', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t\ttext,\n\t\t\t} as ISetTextBoxTextMutation);\n\t\t});\n\t}\n\n\tprivate get flip(): boolean {\n\t\treturn this.textbox.flip;\n\t}\n\n\tprivate set flip(flip: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setFlip', {\n\t\t\t\tid: this.textbox.id,\n\t\t\t\tflip,\n\t\t\t} as ISetObjectFlipMutation);\n\t\t});\n\t}\n\n\tprivate get textBoxStyle(): ITextBox['style'] {\n\t\treturn this.textbox.style;\n\t}\n\n\tprivate set textBoxStyle(style: ITextBox['style']) {\n\t\tthis.$store.dispatch('objects/setStyle', {\n\t\t\tid: this.textbox.id,\n\t\t\tstyle,\n\t\t} as ISetTextBoxStyleAction);\n\t}\n\n\tprivate get deriveCustomColors(): boolean {\n\t\treturn this.textbox.deriveCustomColors;\n\t}\n\n\tprivate set deriveCustomColors(deriveCustomColors: boolean) {\n\t\tthis.$store.commit('objects/setDeriveCustomColors', {\n\t\t\tid: this.textbox.id,\n\t\t\tderiveCustomColors,\n\t\t} as ISetTextBoxDeriveCustomColorMutation);\n\t}\n\n\tprivate get customControlsColor(): string {\n\t\treturn this.textbox.customControlsColor;\n\t}\n\n\tprivate get customNameboxWidth(): number {\n\t\treturn this.textbox.customNameboxWidth;\n\t}\n\n\tprivate set customNameboxWidth(customNameboxWidth: number) {\n\t\tthis.$store.commit('objects/setNameboxWidth', {\n\t\t\tid: this.textbox.id,\n\t\t\tcustomNameboxWidth,\n\t\t} as ISetTextBoxNameboxWidthMutation);\n\t}\n\n\tprivate get colorName(): string {\n\t\tswitch (this.colorSelect) {\n\t\t\tcase '':\n\t\t\t\treturn '';\n\t\t\tcase 'base':\n\t\t\t\treturn 'Base color';\n\t\t\tcase 'controls':\n\t\t\t\treturn 'Controls color';\n\t\t\tcase 'namebox':\n\t\t\t\treturn 'Namebox color';\n\t\t\tcase 'nameboxStroke':\n\t\t\t\treturn 'Namebox text stroke';\n\t\t}\n\t}\n\n\tprivate get color(): string {\n\t\tswitch (this.colorSelect) {\n\t\t\tcase '':\n\t\t\t\treturn '#000000';\n\t\t\tcase 'base':\n\t\t\t\treturn this.textbox.customColor;\n\t\t\tcase 'controls':\n\t\t\t\treturn this.textbox.customControlsColor;\n\t\t\tcase 'namebox':\n\t\t\t\treturn this.textbox.customNameboxColor;\n\t\t\tcase 'nameboxStroke':\n\t\t\t\treturn this.textbox.customNameboxStroke;\n\t\t}\n\t}\n\n\tprivate set color(color: string) {\n\t\tswitch (this.colorSelect) {\n\t\t\tcase '':\n\t\t\t\treturn;\n\t\t\tcase 'base':\n\t\t\t\tthis.$store.commit('objects/setCustomColor', {\n\t\t\t\t\tid: this.textbox.id,\n\t\t\t\t\tcolor,\n\t\t\t\t} as ISetTextBoxCustomColorMutation);\n\t\t\tcase 'controls':\n\t\t\t\tthis.$store.commit('objects/setControlsColor', {\n\t\t\t\t\tid: this.textbox.id,\n\t\t\t\t\tcustomControlsColor: color,\n\t\t\t\t} as ISetTextBoxCustomControlsColorMutation);\n\t\t\tcase 'namebox':\n\t\t\t\tthis.$store.commit('objects/setNameboxColor', {\n\t\t\t\t\tid: this.textbox.id,\n\t\t\t\t\tcustomNameboxColor: color,\n\t\t\t\t} as ISetTextBoxNameboxColorMutation);\n\t\t\tcase 'nameboxStroke':\n\t\t\t\tthis.$store.commit('objects/setNameboxStroke', {\n\t\t\t\t\tid: this.textbox.id,\n\t\t\t\t\tcustomNameboxStroke: color,\n\t\t\t\t} as ISetTextBoxNameboxStrokeMutation);\n\t\t}\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./textbox.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./textbox.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./textbox.vue?vue&type=template&id=60c643b0&scoped=true&\"\nimport script from \"./textbox.vue?vue&type=script&lang=ts&\"\nexport * from \"./textbox.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./textbox.vue?vue&type=style&index=0&id=60c643b0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"60c643b0\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\"},[_c('h1',[_vm._v(\"Choice\")]),(_vm.textEditor)?_c('text-editor',{attrs:{\"title\":\"Button Text\"},on:{\"leave\":function($event){_vm.textEditor = false}},model:{value:(_vm.button_text),callback:function ($$v) {_vm.button_text=$$v},expression:\"button_text\"}}):[_c('fieldset',{staticClass:\"buttons\"},[_c('legend',[_vm._v(\"Buttons:\")]),_c('div',{staticClass:\"list\"},_vm._l((_vm.buttons),function(button,btnIdx){return _c('div',{key:btnIdx,class:{ active: btnIdx === _vm.currentIdx },on:{\"click\":function($event){return _vm.select(btnIdx)}}},[_vm._v(\" \"+_vm._s(button.text.trim() === '' ? '[Empty]' : button.text)+\" \")])}),0)]),_c('fieldset',{staticClass:\"current_button\"},[_c('legend',[_vm._v(\"Current button:\")]),_c('table',[_c('tr',[_c('td',{attrs:{\"colspan\":\"2\"}},[_c('label',{attrs:{\"for\":\"choice-button-input\"}},[_vm._v(\"Text\")])])]),_c('tr',[_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.button_text),expression:\"button_text\"}],attrs:{\"id\":\"choice-button-input\"},domProps:{\"value\":(_vm.button_text)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.button_text=$event.target.value}}})]),_c('td',[_c('button',{on:{\"click\":function($event){_vm.textEditor = true}}},[_vm._v(\"...\")])])])])]),_c('button',{on:{\"click\":_vm.addChoice}},[_vm._v(\"Add\")]),_c('button',{on:{\"click\":_vm.removeChoice}},[_vm._v(\"Remove\")]),_c('toggle',{attrs:{\"label\":\"Auto line wrap?\"},model:{value:(_vm.autoWrap),callback:function ($$v) {_vm.autoWrap=$$v},expression:\"autoWrap\"}}),_c('position-and-size',{attrs:{\"obj\":_vm.sprite}}),_c('layers',{attrs:{\"obj\":_vm.sprite}}),_c('opacity',{attrs:{\"obj\":_vm.sprite}}),_c('toggle',{attrs:{\"label\":\"Flip?\"},model:{value:(_vm.flip),callback:function ($$v) {_vm.flip=$$v},expression:\"flip\"}}),_c('delete',{attrs:{\"obj\":_vm.sprite}})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Mixins } from 'vue-property-decorator';\nimport { isWebPSupported } from '@/asset-manager';\nimport { Character } from '@/renderables/character';\nimport Toggle from '@/components/toggle.vue';\nimport PositionAndSize from '@/components/toolbox/commonsFieldsets/positionAndSize.vue';\nimport Layers from '@/components/toolbox/commonsFieldsets/layers.vue';\nimport Opacity from '@/components/toolbox/commonsFieldsets/opacity.vue';\nimport Delete from '@/components/toolbox/commonsFieldsets/delete.vue';\nimport { IRenderable } from '@/renderables/renderable';\nimport { Sprite } from '@/renderables/sprite';\nimport { ISprite } from '@/store/objectTypes/sprite';\nimport { ICommand } from '@/eventbus/command';\nimport eventBus from '@/eventbus/event-bus';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport {\n\tIObjectSetOnTopAction,\n\tISetObjectFlipMutation,\n\tISetObjectPositionMutation,\n\tISetObjectOpacityMutation,\n\tIObjectShiftLayerAction,\n} from '@/store/objects';\nimport { PanelMixin } from './panelMixin';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport {\n\tIChoices,\n\tIRemoveChoiceAction,\n} from '../../../store/objectTypes/choices';\nimport {\n\tIChoice,\n\tIAddChoiceAction,\n\tISetChoiceTextAction,\n} from '../../../store/objectTypes/choices';\nimport { DeepReadonly } from '../../../util/readonly';\nimport TextEditor from '../subpanels/text/text.vue';\nimport { ISetAutoWrappingMutation } from '../../../store/objectTypes/textbox';\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t\tPositionAndSize,\n\t\tLayers,\n\t\tOpacity,\n\t\tDelete,\n\t\tTextEditor,\n\t},\n})\nexport default class ChoicePanel extends Mixins(PanelMixin) {\n\tpublic $store!: Store<IRootState>;\n\n\tprivate vuexHistory!: IHistorySupport;\n\tprivate currentIdx: number = 0;\n\tprivate textEditor: boolean = false;\n\n\tprivate get sprite(): IChoices {\n\t\tconst obj = this.$store.state.objects.objects[\n\t\t\tthis.$store.state.ui.selection!\n\t\t];\n\t\tif (obj.type !== 'choice') return undefined!;\n\t\treturn obj as IChoices;\n\t}\n\n\tprivate get flip() {\n\t\treturn this.sprite.flip;\n\t}\n\n\tprivate set flip(newValue: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setFlip', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\tflip: newValue,\n\t\t\t} as ISetObjectFlipMutation);\n\t\t});\n\t}\n\n\tprivate get autoWrap(): boolean {\n\t\treturn this.sprite.autoWrap;\n\t}\n\n\tprivate set autoWrap(autoWrap: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setAutoWrapping', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\tautoWrap,\n\t\t\t} as ISetAutoWrappingMutation);\n\t\t});\n\t}\n\n\tprivate get button_text() {\n\t\treturn this.sprite.choices[this.currentIdx].text;\n\t}\n\n\tprivate set button_text(newValue: string) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/setChoiceText', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\tchoiceIdx: this.currentIdx,\n\t\t\t\ttext: newValue,\n\t\t\t} as ISetChoiceTextAction);\n\t\t});\n\t}\n\n\tprivate select(idx: number): void {\n\t\tthis.currentIdx = idx;\n\t}\n\n\tprivate get buttons(): DeepReadonly<IChoice[]> {\n\t\treturn this.sprite.choices;\n\t}\n\n\tprivate addChoice(): void {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/addChoice', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\ttext: '',\n\t\t\t} as IAddChoiceAction);\n\t\t});\n\t}\n\n\tprivate removeChoice(): void {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('objects/removeChoise', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\tchoiceIdx: this.currentIdx,\n\t\t\t} as IRemoveChoiceAction);\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./choice.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./choice.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./choice.vue?vue&type=template&id=22068303&scoped=true&\"\nimport script from \"./choice.vue?vue&type=script&lang=ts&\"\nexport * from \"./choice.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./choice.vue?vue&type=style&index=0&id=22068303&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"22068303\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\"},[_c('h1',[_vm._v(\"Help and Credits\")]),_c('a',{staticClass:\"btn\",attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://github.com/edave64/Doki-Doki-Dialog-Generator/wiki/Version-2:-Dokumentation\"}},[_vm._v(\"Help\")]),_c('a',{staticClass:\"btn\",attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://github.com/edave64/Doki-Doki-Dialog-Generator/\"}},[_vm._v(\"Fork me on GitHub\")]),_c('p',[_vm._v(\" All assets used are IP of Team Salvato and created by them, unless noted otherwise. \")]),_c('p',[_vm._v(\" Doki Doki Dialog Generator developed by EDave64 \"),_c('br'),_vm._v(\"Based on gemdude46's DDLC Shitpost generator \")]),_c('p',[_vm._v(\" Unused House Background by \"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.deviantart.com/fatelogic/art/VN-Background-Practice-295671161\"}},[_vm._v(\"Fatelogic\")])]),_c('p',[_vm._v(\" Aller Font by \"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.daltonmaag.com/library/aller\"}},[_vm._v(\"Dalton Maag Ltd\")])]),_c('p',[_vm._v(\" Riffic Bold Font by \"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.fontspring.com/fonts/inky-type/riffic\"}},[_vm._v(\"InkyType\")])]),_c('p',[_vm._v(\" Verily Serif Mono Font by \"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.dafont.com/verily-serif-mono.font\"}},[_vm._v(\"Stephen G. Hartke\")])]),_c('p',[_vm._v(\" F25 Bank Printer Font by \"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.dafont.com/f25-bank-printer.font\"}},[_vm._v(\"F25 Digital Typeface Design\")])]),_c('p',[_vm._v(\" Journal Font by \"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.dafont.com/journal.font\"}},[_vm._v(\"Fontourist\")])]),_c('p',[_vm._v(\" Hashtag Font by \"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.dafont.com/hashtag.font\"}},[_vm._v(\" TitanVex\")])]),_c('p',[_vm._v(\" JP Hand Slanted Font by \"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.dafont.com/jp-hand-slanted.font\"}},[_vm._v(\"Jonathan Paterson\")])]),_c('p',[_vm._v(\" As I Lay Dying Font by \"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.dafont.com/as-i-lay-dying.font\"}},[_vm._v(\"Moises Esqueda\")])]),_c('p',[_vm._v(\" Damagrafik Script Font by \"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.dafont.com/damagrafik-script.font\"}},[_vm._v(\"Davide Terenzi\")])]),_c('p',[_vm._v(\" Ammy's Handwriting Font by \"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.dafont.com/ammys-handwriting.font\"}},[_vm._v(\"Ammy K.\")])]),_c('p',[_vm._v(\" Halogen Font by \"),_c('a',{attrs:{\"target\":\"_blank\",\"rel\":\"noopener noreferrer\",\"href\":\"https://www.dafont.com/halogen.font\"}},[_vm._v(\"JLH Fonts\")])]),_c('p',[_vm._v(\" MC Classic Sprite by Childish-N \"),_c('br'),_vm._v(\"MC Classic Chibi by GyleToTheRescue \")]),_c('p',[_vm._v(\" MC Sprite by Childish-N \"),_c('br'),_vm._v(\"MC Casual Sprite by SlightlySimple \"),_c('br'),_vm._v(\"MC Chibi by SlightlySimple \")]),_c('p',[_vm._v(\" MC Chad Sprite by Cylent-Nite \"),_c('br'),_vm._v(\"MC Chad Poses and expressions by SlightlySimple \"),_c('br'),_vm._v(\"MC Chad Poses and chibi by Meddy-sin \")]),_c('p',[_vm._v(\" FeMC Sprite by Meddy-sin \"),_c('br'),_vm._v(\"FeMC Casual Sprite by SlightlySimple \")]),_c('p',[_vm._v(\"Classic Amy Sprite by Meddy-sin\")]),_c('p',[_vm._v(\"Amy Sprite by Meddy-sin and SlightlySimple\")]),_c('p',[_vm._v(\"Special thanks to SlightlySimple for testing and technical help\")]),_c('p',[_vm._v(\" Atlas421, T-Rex Harris, smearglexd and Tactical Cupcakes for suggestions and testing \")])])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Mixins } from 'vue-property-decorator';\nimport { PanelMixin } from './panelMixin';\n\n@Component({\n\tcomponents: {},\n})\nexport default class AddPanel extends Mixins(PanelMixin) {}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./credits.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./credits.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./credits.vue?vue&type=template&id=085172b6&scoped=true&\"\nimport script from \"./credits.vue?vue&type=script&lang=ts&\"\nexport * from \"./credits.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./credits.vue?vue&type=style&index=0&id=085172b6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"085172b6\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\",on:{\"dragenter\":_vm.dragEnter,\"mouseleave\":function($event){return _vm.$refs.dt.hide()}}},[_c('drop-target',{ref:\"dt\",staticClass:\"drop-target\",on:{\"drop\":_vm.addImageFile}},[_vm._v(\"Drop here to add as a new background\")]),_c('h1',[_vm._v(\"Background\")]),(_vm.colorSelect)?_c('color',{on:{\"leave\":function($event){_vm.colorSelect = false}},model:{value:(_vm.bgColor),callback:function ($$v) {_vm.bgColor=$$v},expression:\"bgColor\"}}):[_c('background-settings',{on:{\"change-color\":function($event){_vm.colorSelect = true}}}),_c('div',{staticClass:\"btn upload-background\",on:{\"click\":function($event){return _vm.$refs.upload.click()}}},[_vm._v(\" Upload \"),_c('input',{ref:\"upload\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.onFileUpload}})]),_c('button',{staticClass:\"upload-background\",on:{\"click\":_vm.addByUrl}},[_vm._v(\"Add by URL\")]),_c('button',{staticClass:\"upload-background\",attrs:{\"title\":\"Not yet implemented\"},on:{\"click\":function($event){return _vm.$emit('show-dialog', 'type: Backgrounds')}}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"extension\")]),_vm._v(\" Search in content packs \")]),_vm._l((_vm.backgrounds),function(background){return _c('background-button',{key:background,attrs:{\"backgroundId\":background},on:{\"input\":function($event){return _vm.setBackground(background)}}})})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ background: true, active: _vm.isActive },style:(_vm.style),attrs:{\"title\":_vm.title},on:{\"click\":function($event){return _vm.$emit('input', _vm.backgroundId)}}},[_vm._v(_vm._s(_vm.title))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\nimport { color } from '@/renderables/background';\nimport { isWebPSupported, getAAsset } from '@/asset-manager';\nimport { Background } from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\nimport { IAsset, BackgroundLookup } from '@/store/content';\nimport { ErrorAsset } from '@/models/error-asset';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport { IPanel } from '@/store/panels';\n\n@Component({\n\tcomponents: {},\n})\nexport default class BackgroundButton extends Vue {\n\tpublic $store!: Store<IRootState>;\n\t@Prop({ required: true }) private readonly backgroundId!: string;\n\n\tprivate isWebPSupported: boolean | null = null;\n\tprivate assets: Array<HTMLImageElement | ErrorAsset> = [];\n\n\tprivate get background(): Readonly<IPanel['background']> {\n\t\tconst currentPanel = this.$store.state.panels.currentPanel;\n\t\treturn this.$store.state.panels.panels[currentPanel].background;\n\t}\n\n\tprivate get bgData(): Background<IAsset> | null {\n\t\tconst backgrounds: BackgroundLookup = this.$store.getters[\n\t\t\t'content/getBackgrounds'\n\t\t];\n\t\treturn backgrounds.get(this.backgroundId) || null;\n\t}\n\n\tprivate get isActive(): boolean {\n\t\treturn this.backgroundId === this.background.current;\n\t}\n\n\tprivate async created() {\n\t\tif (this.bgData) {\n\t\t\tthis.assets = await Promise.all(\n\t\t\t\tthis.bgData.variants[0].map(asset => getAAsset(asset, false))\n\t\t\t);\n\t\t}\n\t}\n\n\tprivate get title(): string {\n\t\tswitch (this.backgroundId) {\n\t\t\tcase 'buildin.static-color':\n\t\t\t\treturn 'Static color';\n\t\t\tcase 'buildin.transparent':\n\t\t\t\treturn 'Transparent';\n\t\t}\n\t\treturn this.bgData!.label || '';\n\t}\n\n\tprivate get style(): { [id: string]: string } {\n\t\tswitch (this.backgroundId) {\n\t\t\tcase 'buildin.static-color':\n\t\t\t\treturn {\n\t\t\t\t\t'background-color': this.background.color,\n\t\t\t\t};\n\t\t\tcase 'buildin.transparent':\n\t\t\t\treturn {};\n\t\t}\n\t\tconst variant = this.bgData!.variants[0];\n\t\tconst urls = (this.assets.filter(\n\t\t\timg => img instanceof HTMLImageElement\n\t\t) as HTMLImageElement[])\n\t\t\t.map(img => `url('${img.src}')`)\n\t\t\t.join(',');\n\t\treturn {\n\t\t\tbackgroundImage: urls,\n\t\t};\n\t}\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./button.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./button.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./button.vue?vue&type=template&id=2551c94f&scoped=true&\"\nimport script from \"./button.vue?vue&type=script&lang=ts&\"\nexport * from \"./button.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./button.vue?vue&type=style&index=0&id=2551c94f&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2551c94f\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('fieldset',[_c('legend',[_vm._v(\"Settings:\")]),(_vm.isColor)?[_c('label',{attrs:{\"for\":\"bg_color\"}},[_vm._v(\"Color:\")]),_c('button',{staticClass:\"color-button\",style:({background: _vm.color}),attrs:{\"id\":\"bg_color\"},on:{\"click\":function($event){return _vm.$emit('change-color')}}})]:_vm._e(),(_vm.isVariant)?_c('table',[_c('tr',[_c('td',{attrs:{\"colspan\":\"3\"}},[_c('toggle',{attrs:{\"label\":\"Flipped?\"},model:{value:(_vm.flipped),callback:function ($$v) {_vm.flipped=$$v},expression:\"flipped\"}})],1)]),(_vm.hasVariants)?_c('tr',[_c('td',{staticClass:\"arrow-col\"},[_c('button',{on:{\"click\":function($event){return _vm.seekVariant(-1)}}},[_vm._v(\"<\")])]),_c('td',{staticStyle:{\"text-align\":\"center\"}},[_vm._v(\"Variant\")]),_c('td',{staticClass:\"arrow-col\"},[_c('button',{on:{\"click\":function($event){return _vm.seekVariant(1)}}},[_vm._v(\">\")])])]):_vm._e(),_c('tr',[_c('td',{attrs:{\"colspan\":\"3\"}},[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.scaling),expression:\"scaling\"}],on:{\"keydown\":function($event){$event.stopPropagation();},\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.scaling=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"0\"}},[_vm._v(\"None\")]),_c('option',{attrs:{\"value\":\"1\"}},[_vm._v(\"Stretch\")]),_c('option',{attrs:{\"value\":\"2\"}},[_vm._v(\"Cover\")])])])])]):_vm._e()],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\nimport { isWebPSupported } from '@/asset-manager';\nimport Toggle from '@/components/toggle.vue';\nimport { State } from 'vuex-class-decorator';\nimport { Background } from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport { IAsset } from '@/store/content';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport {\n\tISetColorMutation,\n\tISetFlipMutation,\n\tISeekVariantAction,\n\tScalingModes,\n\tISetScalingMutation,\n\tIPanel,\n} from '@/store/panels';\n\n@Component({\n\tcomponents: { Toggle },\n})\nexport default class BackgroundSettings extends Vue {\n\tpublic $store!: Store<IRootState>;\n\tprivate get currentBackgroundId(): string {\n\t\treturn this.background.current;\n\t}\n\n\tprivate vuexHistory!: IHistorySupport;\n\n\tprivate get background(): Readonly<IPanel['background']> {\n\t\tconst currentPanel = this.$store.state.panels.currentPanel;\n\t\treturn this.$store.state.panels.panels[currentPanel].background;\n\t}\n\n\tprivate get bgData(): Background<IAsset> | null {\n\t\treturn (\n\t\t\tthis.$store.state.content.current.backgrounds.find(\n\t\t\t\tbackground => background.id === this.currentBackgroundId\n\t\t\t) || null\n\t\t);\n\t}\n\n\tprivate get isColor(): boolean {\n\t\treturn this.currentBackgroundId === 'buildin.static-color';\n\t}\n\n\tprivate get color(): string {\n\t\treturn this.background.color;\n\t}\n\n\tprivate set color(color: string) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('panels/setBackgroundColor', {\n\t\t\t\tcolor,\n\t\t\t\tpanelId: this.$store.state.panels.currentPanel,\n\t\t\t} as ISetColorMutation);\n\t\t});\n\t}\n\n\tprivate get flipped(): boolean {\n\t\treturn this.background.flipped;\n\t}\n\n\tprivate set flipped(flipped: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('panels/setBackgroundFlipped', {\n\t\t\t\tflipped,\n\t\t\t\tpanelId: this.$store.state.panels.currentPanel,\n\t\t\t} as ISetFlipMutation);\n\t\t});\n\t}\n\n\tprivate get scaling(): string {\n\t\treturn this.background.scaling.toString();\n\t}\n\n\tprivate set scaling(scaling: string) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('panels/setBackgroundScaling', {\n\t\t\t\tscaling: parseInt(scaling, 10),\n\t\t\t\tpanelId: this.$store.state.panels.currentPanel,\n\t\t\t} as ISetScalingMutation);\n\t\t});\n\t}\n\n\tprivate get isVariant() {\n\t\treturn !!this.bgData;\n\t}\n\n\tprivate get hasVariants() {\n\t\treturn this.bgData ? this.bgData.variants.length > 1 : false;\n\t}\n\n\tprivate seekVariant(delta: 1 | -1) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('panels/seekBackgroundVariant', {\n\t\t\t\tdelta,\n\t\t\t\tpanelId: this.$store.state.panels.currentPanel,\n\t\t\t} as ISeekVariantAction);\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./settings.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./settings.vue?vue&type=template&id=645ce448&scoped=true&\"\nimport script from \"./settings.vue?vue&type=script&lang=ts&\"\nexport * from \"./settings.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./settings.vue?vue&type=style&index=0&id=645ce448&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"645ce448\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Mixins } from 'vue-property-decorator';\nimport { registerAsset, getAsset } from '@/asset-manager';\nimport BackgroundButton from './background/button.vue';\nimport BackgroundSettings from './background/settings.vue';\nimport DropTarget from '../drop-target.vue';\nimport { State } from 'vuex-class-decorator';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport { IAsset, ReplaceContentPackAction } from '@/store/content';\nimport {\n\tBackground,\n\tContentPack,\n} from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\nimport { ISetCurrentMutation, ISetColorMutation } from '@/store/panels';\nimport { PanelMixin } from './panelMixin';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport Color from '../subpanels/color/color.vue';\n\nconst uploadedBackgroundsPack: ContentPack<string> = {\n\tpackId: 'dddg.buildin.uploadedBackgrounds',\n\tdependencies: [],\n\tpackCredits: [],\n\tcharacters: [],\n\tfonts: [],\n\tsprites: [],\n\tpoemStyles: [],\n\tpoemBackgrounds: [],\n\tbackgrounds: [],\n\tcolors: [],\n};\n\n@Component({\n\tcomponents: {\n\t\tBackgroundButton,\n\t\tBackgroundSettings,\n\t\tDropTarget,\n\t\tColor,\n\t},\n})\nexport default class BackgroundsPanel extends Mixins(PanelMixin) {\n\tpublic $store!: Store<IRootState>;\n\n\tprivate colorSelect: boolean = false;\n\n\tprivate vuexHistory!: IHistorySupport;\n\n\tprivate get backgrounds(): Array<Background<IAsset>['id']> {\n\t\treturn [\n\t\t\t...this.$store.state.content.current.backgrounds.map(\n\t\t\t\tbackground => background.id\n\t\t\t),\n\t\t\t'buildin.static-color',\n\t\t\t'buildin.transparent',\n\t\t];\n\t}\n\n\tprivate setBackground(id: Background<IAsset>['id']) {\n\t\tthis.$store.commit('panels/setCurrentBackground', {\n\t\t\tcurrent: id,\n\t\t\tpanelId: this.$store.state.panels.currentPanel,\n\t\t} as ISetCurrentMutation);\n\t}\n\n\tprivate get bgColor(): string {\n\t\treturn this.$store.state.panels.panels[\n\t\t\tthis.$store.state.panels.currentPanel\n\t\t].background.color;\n\t}\n\n\tprivate set bgColor(color: string) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('panels/setBackgroundColor', {\n\t\t\t\tcolor,\n\t\t\t\tpanelId: this.$store.state.panels.currentPanel,\n\t\t\t} as ISetColorMutation);\n\t\t});\n\t}\n\n\tprivate onFileUpload(e: Event) {\n\t\tconst uploadInput = this.$refs.upload as HTMLInputElement;\n\t\tif (!uploadInput.files) return;\n\t\tfor (const file of uploadInput.files) {\n\t\t\tthis.addImageFile(file);\n\t\t}\n\t}\n\n\tprivate addImageFile(file: File) {\n\t\tconst url = URL.createObjectURL(file);\n\t\tthis.addNewCustomBackground(file.name, file.name, url);\n\t}\n\n\tprivate addByUrl() {\n\t\tconst url = prompt('Enter the URL of the image');\n\t\tif (!url) return;\n\t\tconst lastSegment = url.split('/').slice(-1)[0];\n\t\tthis.addNewCustomBackground(lastSegment, lastSegment, url);\n\t}\n\n\tprivate addNewCustomBackground(\n\t\tid: Background<IAsset>['id'],\n\t\tlabel: string,\n\t\turl: string\n\t) {\n\t\tuploadedBackgroundsPack.backgrounds.push({\n\t\t\tid,\n\t\t\tlabel,\n\t\t\tvariants: [[url]],\n\t\t});\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('content/replaceContentPack', {\n\t\t\t\tcontentPack: uploadedBackgroundsPack,\n\t\t\t} as ReplaceContentPackAction);\n\t\t\tthis.setBackground(id);\n\t\t});\n\t}\n\n\tprivate dragEnter(e: DragEvent) {\n\t\tif (!e.dataTransfer) return;\n\t\te.dataTransfer.effectAllowed = 'none';\n\t\tif (\n\t\t\t!Array.from(e.dataTransfer.items).find(item =>\n\t\t\t\titem.type.match(/^image.*$/)\n\t\t\t)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\te.dataTransfer.effectAllowed = 'link';\n\t\t(this.$refs.dt as DropTarget).show();\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./backgrounds.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./backgrounds.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./backgrounds.vue?vue&type=template&id=2a0aba90&scoped=true&\"\nimport script from \"./backgrounds.vue?vue&type=script&lang=ts&\"\nexport * from \"./backgrounds.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./backgrounds.vue?vue&type=style&index=0&id=2a0aba90&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2a0aba90\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\"},[_c('h1',[_vm._v(\"Content Packs\")]),_c('button',{on:{\"click\":_vm.addNew}},[_vm._v(\"Add new Pack\")]),_c('fieldset',[_c('legend',[_vm._v(\"Installed Packs:\")]),_c('div',{staticClass:\"list\"},_vm._l((_vm.packs),function(pack){return _c('div',{key:pack.name,class:{ active: pack.name === _vm.name },on:{\"click\":function($event){return _vm.select(pack.name)}}},[_vm._v(\" \"+_vm._s(pack.name)+\" \")])}),0)]),_c('label',{attrs:{\"for\":\"pack_name\"}},[_vm._v(\"Name:\")]),_c('input',{attrs:{\"id\":\"pack_name\",\"readonly\":\"\"},domProps:{\"value\":_vm.name}}),_c('label',{attrs:{\"for\":\"pack_credits\"}},[_vm._v(\"Credits:\")]),_c('div',{attrs:{\"id\":\"pack_credits\"},domProps:{\"innerHTML\":_vm._s(_vm.credits)}}),(_vm.activatable)?_c('button',{on:{\"click\":_vm.activate}},[_vm._v(\"Activate\")]):_vm._e(),(_vm.deactivatable)?_c('button',{on:{\"click\":_vm.deactivate}},[_vm._v(\"Deactivate\")]):_vm._e(),(_vm.installable)?_c('button',{on:{\"click\":_vm.install}},[_vm._v(\"Install\")]):_vm._e(),(_vm.uninstallable)?_c('button',{on:{\"click\":_vm.uninstall}},[_vm._v(\"Uninstall\")]):_vm._e(),(_vm.needRestart)?_c('div',[_vm._v(\" The tool need restart for changes to take effect. \"),_c('button',{on:{\"click\":_vm.restart}},[_vm._v(\"Restart Now\")])]):_vm._e()])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Mixins } from 'vue-property-decorator';\nimport { PanelMixin } from './panelMixin';\nimport environment from '@/environments/environment';\nimport { ContentPack } from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\nimport { sanitize } from './character-pack-sanitizer';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\n\ninterface IPack {\n\tname: string;\n\tcredits: [string | [string, string]];\n\tinstalled: boolean;\n\tqueuedUninstall: boolean;\n\tactive: boolean;\n\tfreshInstall: boolean;\n\turl: string;\n}\n\n@Component({\n\tcomponents: {},\n})\nexport default class CharacterPackPanel extends Mixins(PanelMixin) {\n\tpublic $store!: Store<IRootState>;\n\tprivate selectedPack: IPack | null = null;\n\tprivate needRestart = false;\n\n\tprivate created() {\n\t\t/*\n\t\tconst packs = environment.installedCharacterPacks;\n\t\tconsole.log('packs:', packs);\n\t\t*/\n\t}\n\n\tprivate get packs(): IPack[] {\n\t\tconst packs = this.$store.state.content.contentPacks;\n\t\treturn packs\n\t\t\t.filter(pack => pack.packId && !pack.packId.startsWith('dddg.buildin.'))\n\t\t\t.map(\n\t\t\t\tpack =>\n\t\t\t\t\t({\n\t\t\t\t\t\tname: pack.packId,\n\t\t\t\t\t\tcredits: pack.packCredits,\n\t\t\t\t\t\tinstalled: true,\n\t\t\t\t\t\tactive: true,\n\t\t\t\t\t\tqueuedUninstall: false,\n\t\t\t\t\t\tfreshInstall: false,\n\t\t\t\t\t\turl: '',\n\t\t\t\t\t} as IPack)\n\t\t\t);\n\t}\n\n\tprivate select(name: string) {\n\t\tthis.selectedPack = this.packs.find(pack => pack.name === name) || null;\n\t}\n\n\tprivate async addNew() {\n\t\tconst url = await environment.prompt(\n\t\t\t'Enter the URL of the character pack:'\n\t\t);\n\t\tif (!url) return;\n\t\tawait this.$store.dispatch('content/loadContentPacks', url);\n\t}\n\n\tprivate restart() {\n\t\tlocation.reload(true);\n\t}\n\n\tprivate get name(): string {\n\t\tif (!this.selectedPack) return '';\n\t\treturn this.selectedPack.name;\n\t}\n\tprivate get credits(): [string | [string, string]] {\n\t\tif (!this.selectedPack) return [''];\n\t\treturn this.selectedPack.credits;\n\t}\n\tprivate get activatable(): boolean {\n\t\tif (!environment.isAutoLoadingSupported) return false;\n\t\tif (!this.selectedPack) return false;\n\t\tif (!this.selectedPack.installed) return false;\n\t\tif (this.selectedPack.queuedUninstall) return false;\n\t\tif (this.selectedPack.freshInstall) return false;\n\t\treturn !this.selectedPack.active;\n\t}\n\tprivate get deactivatable(): boolean {\n\t\tif (!environment.isAutoLoadingSupported) return false;\n\t\tif (!this.selectedPack) return false;\n\t\tif (!this.selectedPack.installed) return false;\n\t\tif (this.selectedPack.queuedUninstall) return false;\n\t\tif (this.selectedPack.freshInstall) return false;\n\t\treturn this.selectedPack.active;\n\t}\n\tprivate get installable(): boolean {\n\t\tif (!environment.isLocalRepoSupported) return false;\n\t\tif (!this.selectedPack) return false;\n\t\treturn this.selectedPack.queuedUninstall || !this.selectedPack.installed;\n\t}\n\tprivate get uninstallable(): boolean {\n\t\tif (!environment.isLocalRepoSupported) return false;\n\t\tif (!this.selectedPack) return false;\n\t\tif (this.selectedPack.freshInstall) return false;\n\t\treturn !(this.selectedPack.queuedUninstall || !this.selectedPack.installed);\n\t}\n\n\tprivate install(): void {\n\t\tif (!this.selectedPack) return;\n\t\tenvironment.localRepoAdd(this.selectedPack.url);\n\t\tif (this.selectedPack.queuedUninstall) {\n\t\t\tthis.selectedPack.queuedUninstall = false;\n\t\t} else {\n\t\t\tthis.selectedPack.installed = true;\n\t\t}\n\t}\n\n\tprivate uninstall(): void {\n\t\tif (!this.selectedPack) return;\n\t\tenvironment.localRepoRemove(this.selectedPack.url);\n\t\tthis.selectedPack.queuedUninstall = true;\n\t\tthis.needRestart = true;\n\t}\n\n\tprivate activate(): void {\n\t\tif (!this.selectedPack) return;\n\t\tenvironment.autoLoadAdd(this.selectedPack.url);\n\t\tthis.selectedPack.active = true;\n\t\tthis.needRestart = true;\n\t}\n\n\tprivate deactivate(): void {\n\t\tif (!this.selectedPack) return;\n\t\tenvironment.autoLoadRemove(this.selectedPack.url);\n\t\tthis.selectedPack.active = false;\n\t\tthis.needRestart = true;\n\t}\n}\n","import { Module } from 'vuex';\nimport { ContentPack } from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\nimport { IAsset, BackgroundLookup } from './content';\nimport { IRootState } from '.';\nimport { arraySeeker } from '@/models/seekers';\nimport { ICopyObjectsAction, IDeleteAllOfPanel } from './objects';\nimport Vue from 'vue';\n\nexport enum ScalingModes {\n\tNone = 0,\n\tStretch = 1,\n\tCover = 2,\n}\n\nexport interface IPanel {\n\tid: string;\n\tbackground: {\n\t\tcurrent: string;\n\t\tcolor: string;\n\t\tflipped: boolean;\n\t\tvariant: number;\n\t\tscaling: ScalingModes;\n\t};\n\tlastRender: string;\n}\n\nexport interface IPanels {\n\tpanels: { [id: string]: IPanel };\n\tpanelOrder: string[];\n\tcurrentPanel: string;\n}\n\nexport const transparentId = 'buildin.transparent';\nexport const staticColorId = 'buildin.static-color';\n\nlet lastPanelNum = 0;\n\nconst previewManager = {\n\tpanelToUrl: new Map<string, string>(),\n\turlToPanel: new Map<string, string[]>(),\n\tregister(panelId: string, url: string) {\n\t\tif (this.panelToUrl.has(panelId)) {\n\t\t\tif (this.panelToUrl.get(panelId) === url) return;\n\t\t\tthis.unregister(panelId, this.panelToUrl.get(panelId)!);\n\t\t}\n\t\tthis.panelToUrl.set(panelId, url);\n\t\tif (this.urlToPanel.has(url)) {\n\t\t\tthis.urlToPanel.get(url)!.push(panelId);\n\t\t} else {\n\t\t\tthis.urlToPanel.set(url, [panelId]);\n\t\t}\n\t},\n\tunregister(panelId: string, url: string) {\n\t\tif (this.urlToPanel.has(url)) {\n\t\t\tconst panels = this.urlToPanel.get(url)!;\n\t\t\tpanels.splice(panels.indexOf(panelId), 1);\n\t\t\tif (panels.length === 0) {\n\t\t\t\tthis.urlToPanel.delete(url);\n\t\t\t\tURL.revokeObjectURL(url);\n\t\t\t}\n\t\t}\n\t\tthis.panelToUrl.delete(panelId);\n\t},\n};\n\nexport default {\n\tnamespaced: true,\n\tstate: {\n\t\tpanels: {},\n\t\tpanelOrder: [],\n\t\tcurrentPanel: null!,\n\t},\n\tmutations: {\n\t\tsetCurrentPanel(state, { panelId }: ISetCurrentPanelMutation) {\n\t\t\tstate.currentPanel = panelId;\n\t\t},\n\t\tsetPanelPreview(state, { panelId, url }: ISetPanelPreviewMutation) {\n\t\t\tstate.panels[panelId].lastRender = url;\n\t\t\tpreviewManager.register(panelId, url);\n\t\t},\n\t\tcreatePanel(state, { panel }: ICreatePanel) {\n\t\t\tVue.set(state.panels, panel.id, panel);\n\t\t},\n\t\tsetPanelOrder(state, { panelOrder }: ISetPanelOrder) {\n\t\t\tstate.panelOrder = [...panelOrder];\n\t\t},\n\t\tsetCurrentBackground(state, { current, panelId }: ISetCurrentMutation) {\n\t\t\tconst panel = state.panels[panelId];\n\t\t\tpanel.background.current = current;\n\t\t\tpanel.background.variant = 0;\n\t\t},\n\t\tsetBackgroundColor(state, { color, panelId }: ISetColorMutation) {\n\t\t\tconst panel = state.panels[panelId];\n\t\t\tpanel.background.color = color;\n\t\t},\n\t\tsetBackgroundFlipped(state, { flipped, panelId }: ISetFlipMutation) {\n\t\t\tconst panel = state.panels[panelId];\n\t\t\tpanel.background.flipped = flipped;\n\t\t},\n\t\tsetBackgroundVariant(state, { variant, panelId }: ISetVariantMutation) {\n\t\t\tconst panel = state.panels[panelId];\n\t\t\tpanel.background.variant = variant;\n\t\t},\n\t\tsetBackgroundScaling(state, { scaling, panelId }: ISetScalingMutation) {\n\t\t\tconst panel = state.panels[panelId];\n\t\t\tpanel.background.scaling = scaling;\n\t\t},\n\t\tdeletePanel(state, { panelId }: IDeletePanelMutation) {\n\t\t\tpreviewManager.unregister(\n\t\t\t\tpanelId,\n\t\t\t\tpreviewManager.panelToUrl.get(panelId)!\n\t\t\t);\n\t\t\tdelete state.panels[panelId];\n\t\t},\n\t},\n\tactions: {\n\t\tcreatePanel({ state, commit }) {\n\t\t\tconst id = 'panel' + ++lastPanelNum;\n\t\t\tcommit('createPanel', {\n\t\t\t\tpanel: {\n\t\t\t\t\tid,\n\t\t\t\t\tbackground: {\n\t\t\t\t\t\tcolor: '#000000',\n\t\t\t\t\t\tcurrent: transparentId,\n\t\t\t\t\t\tflipped: false,\n\t\t\t\t\t\tscaling: ScalingModes.None,\n\t\t\t\t\t\tvariant: 0,\n\t\t\t\t\t},\n\t\t\t\t\tlastRender: '',\n\t\t\t\t},\n\t\t\t} as ICreatePanel);\n\t\t\tif (!state.panelOrder) {\n\t\t\t\tcommit('setPanelOrder', {\n\t\t\t\t\tpanelOrder: [id],\n\t\t\t\t} as ISetPanelOrder);\n\t\t\t} else {\n\t\t\t\tcommit('setPanelOrder', {\n\t\t\t\t\tpanelOrder: [...state.panelOrder, id],\n\t\t\t\t} as ISetPanelOrder);\n\t\t\t}\n\t\t\tcommit('setCurrentPanel', {\n\t\t\t\tpanelId: id,\n\t\t\t} as ISetCurrentPanelMutation);\n\t\t},\n\t\tduplicatePanel(\n\t\t\t{ state, commit, dispatch },\n\t\t\t{ panelId }: IDuplicatePanelAction\n\t\t) {\n\t\t\tconst panel = state.panels[panelId];\n\t\t\tconst id = 'panel' + ++lastPanelNum;\n\t\t\tpreviewManager.register(id, panel.lastRender);\n\t\t\tcommit('createPanel', {\n\t\t\t\tpanel: {\n\t\t\t\t\tid,\n\t\t\t\t\tbackground: JSON.parse(JSON.stringify(panel.background)),\n\t\t\t\t\tlastRender: panel.lastRender,\n\t\t\t\t},\n\t\t\t} as ICreatePanel);\n\t\t\tdispatch(\n\t\t\t\t'objects/copyObjects',\n\t\t\t\t{\n\t\t\t\t\tsourcePanelId: panelId,\n\t\t\t\t\ttargetPanelId: id,\n\t\t\t\t} as ICopyObjectsAction,\n\t\t\t\t{ root: true }\n\t\t\t);\n\t\t\tconst oldIdx = state.panelOrder.indexOf(panelId);\n\t\t\tcommit('setPanelOrder', {\n\t\t\t\tpanelOrder: [\n\t\t\t\t\t...state.panelOrder.slice(0, oldIdx + 1),\n\t\t\t\t\tid,\n\t\t\t\t\t...state.panelOrder.slice(oldIdx + 1),\n\t\t\t\t],\n\t\t\t} as ISetPanelOrder);\n\t\t\tcommit('setCurrentPanel', {\n\t\t\t\tpanelId: id,\n\t\t\t} as ISetCurrentPanelMutation);\n\t\t},\n\t\tseekBackgroundVariant(\n\t\t\t{ state, rootGetters, commit },\n\t\t\t{ delta }: ISeekVariantAction\n\t\t) {\n\t\t\tconst panel = state.panels[state.currentPanel];\n\t\t\tconst backgrounds = rootGetters[\n\t\t\t\t'content/getBackgrounds'\n\t\t\t] as BackgroundLookup;\n\t\t\tconst background = backgrounds.get(panel.background.current);\n\t\t\tif (!background) return;\n\t\t\tcommit('setBackgroundVariant', {\n\t\t\t\tpanelId: state.currentPanel,\n\t\t\t\tvariant: arraySeeker(\n\t\t\t\t\tbackground.variants,\n\t\t\t\t\tpanel.background.variant,\n\t\t\t\t\tdelta\n\t\t\t\t),\n\t\t\t} as ISetVariantMutation);\n\t\t},\n\t\tdelete({ state, dispatch, commit }, { panelId }: IDeletePanelAction) {\n\t\t\tif (state.panelOrder.length <= 1) return;\n\t\t\tconst orderIdx = state.panelOrder.indexOf(panelId);\n\t\t\tlet newOrderIdx;\n\t\t\tif (orderIdx === state.panelOrder.length - 1) {\n\t\t\t\tnewOrderIdx = orderIdx - 1;\n\t\t\t} else {\n\t\t\t\tnewOrderIdx = orderIdx + 1;\n\t\t\t}\n\t\t\tcommit('setCurrentPanel', {\n\t\t\t\tpanelId: state.panelOrder[newOrderIdx],\n\t\t\t} as ISetCurrentPanelMutation);\n\t\t\tcommit('setPanelOrder', {\n\t\t\t\tpanelOrder: [\n\t\t\t\t\t...state.panelOrder.slice(0, orderIdx),\n\t\t\t\t\t...state.panelOrder.slice(orderIdx + 1),\n\t\t\t\t],\n\t\t\t} as ISetPanelOrder);\n\t\t\tdispatch(\n\t\t\t\t'objects/deleteAllOfPanel',\n\t\t\t\t{\n\t\t\t\t\tpanelId,\n\t\t\t\t} as IDeleteAllOfPanel,\n\t\t\t\t{ root: true }\n\t\t\t);\n\t\t\tcommit('deletePanel', {\n\t\t\t\tpanelId,\n\t\t\t} as IDeletePanelMutation);\n\t\t},\n\t\tasync fixContentPackRemoval(\n\t\t\t{ state, rootGetters, commit, rootState },\n\t\t\toldContent: ContentPack<IAsset>\n\t\t) {\n\t\t\tfor (const panel of Object.values(state.panels)) {\n\t\t\t\tconst oldBackground = oldContent.backgrounds.find(\n\t\t\t\t\tx => x.id === panel.background.current\n\t\t\t\t);\n\t\t\t\t// Probably build in?\n\t\t\t\tif (!oldBackground) return;\n\n\t\t\t\tconst newBackground = (rootGetters[\n\t\t\t\t\t'content/getBackgrounds'\n\t\t\t\t] as BackgroundLookup).get(panel.background.current);\n\n\t\t\t\tif (!newBackground) {\n\t\t\t\t\tif (rootState.content.current.backgrounds[0]) {\n\t\t\t\t\t\tcommit('setCurrentBackground', {\n\t\t\t\t\t\t\tcurrent: rootState.content.current.backgrounds[0].id,\n\t\t\t\t\t\t\tpanelId: panel.id,\n\t\t\t\t\t\t} as ISetCurrentMutation);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tcommit('setCurrentBackground', {\n\t\t\t\t\t\t\tcurrent: 'buildin.transparent',\n\t\t\t\t\t\t\tpanelId: panel.id,\n\t\t\t\t\t\t} as ISetCurrentMutation);\n\t\t\t\t\t}\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst oldVariantJSON = JSON.stringify(\n\t\t\t\t\toldBackground.variants[panel.background.variant]\n\t\t\t\t);\n\t\t\t\tconst newVariantIdx = newBackground.variants.findIndex(\n\t\t\t\t\tvariant => JSON.stringify(variant) === oldVariantJSON\n\t\t\t\t);\n\t\t\t\tif (newVariantIdx !== panel.background.variant) {\n\t\t\t\t\tcommit('setBackgroundVariant', {\n\t\t\t\t\t\tvariant: newVariantIdx === -1 ? 0 : newVariantIdx,\n\t\t\t\t\t\tpanelId: panel.id,\n\t\t\t\t\t} as ISetVariantMutation);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tmove({ state, commit }, { panelId, delta }: IMovePanelAction) {\n\t\t\tconst collection = [...state.panelOrder];\n\t\t\tconst oldIdx = collection.indexOf(panelId);\n\t\t\tcollection.splice(oldIdx, 1);\n\t\t\tconst newIdx = Math.max(oldIdx + delta, 0);\n\t\t\tcollection.splice(newIdx, 0, panelId);\n\t\t\tcommit('setPanelOrder', { panelOrder: collection } as ISetPanelOrder);\n\t\t},\n\t},\n} as Module<IPanels, IRootState>;\n\nexport interface ISetCurrentPanelMutation {\n\treadonly panelId: string;\n}\n\nexport interface IDeletePanelMutation {\n\treadonly panelId: string;\n}\n\nexport interface ISetPanelPreviewMutation {\n\treadonly panelId: string;\n\treadonly url: string;\n}\n\nexport interface IDuplicatePanelAction {\n\treadonly panelId: string;\n}\n\nexport interface IDeletePanelAction {\n\treadonly panelId: string;\n}\n\nexport interface ICreatePanel {\n\treadonly panel: IPanel;\n}\n\nexport interface ISetPanelOrder {\n\treadonly panelOrder: string[];\n}\n\nexport interface ISetCurrentMutation {\n\treadonly panelId: string;\n\treadonly current: string;\n}\n\nexport interface ISetColorMutation {\n\treadonly panelId: string;\n\treadonly color: string;\n}\n\nexport interface ISetFlipMutation {\n\treadonly panelId: string;\n\treadonly flipped: boolean;\n}\n\nexport interface ISetVariantMutation {\n\treadonly panelId: string;\n\treadonly variant: number;\n}\n\nexport interface ISetScalingMutation {\n\treadonly panelId: string;\n\treadonly scaling: ScalingModes;\n}\n\nexport interface ISeekVariantAction {\n\treadonly delta: 1 | -1;\n}\n\nexport interface IMovePanelAction {\n\treadonly panelId: string;\n\treadonly delta: number;\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./content-pack.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./content-pack.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./content-pack.vue?vue&type=template&id=5035b04a&scoped=true&\"\nimport script from \"./content-pack.vue?vue&type=script&lang=ts&\"\nexport * from \"./content-pack.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./content-pack.vue?vue&type=style&index=0&id=5035b04a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5035b04a\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\"},[_c('h1',[_vm._v(\"Panels\")]),_c('fieldset',{staticClass:\"existing_panels_fieldset\"},[_c('legend',[_vm._v(\"Existing Panels\")]),_c('div',{staticClass:\"existing_panels\"},_vm._l((_vm.panelButtons),function(panel,idx){return _c('div',{key:panel.id,class:{ panel_button: true, active: panel.id === _vm.currentPanel },style:((\"background-image: url('\" + (panel.image) + \"')\")),on:{\"click\":function($event){return _vm.updateCurrentPanel(panel.id)}}},[_c('div',{staticClass:\"panel_text\"},[_c('p',[_vm._v(_vm._s(panel.text))])]),_c('div',{staticClass:\"panel_nr\"},[_vm._v(_vm._s(idx + 1))])])}),0)]),_c('div',{staticClass:\"column\"},[_c('button',{on:{\"click\":_vm.addNewPanel}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"add_to_queue\")]),_vm._v(\" Add new \")]),_c('button',{attrs:{\"disabled\":!_vm.canDeletePanel},on:{\"click\":_vm.deletePanel}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"remove_from_queue\")]),_vm._v(\" Delete panel \")]),_c('button',{attrs:{\"disabled\":!_vm.canMoveAhead},on:{\"click\":_vm.moveAhead}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"arrow_upward\")]),_vm._v(\" Move ahead \")]),_c('button',{attrs:{\"disabled\":!_vm.canMoveBehind},on:{\"click\":_vm.moveBehind}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"arrow_downward\")]),_vm._v(\" Move behind \")])]),_c('fieldset',[_c('legend',[_vm._v(\"Export\")]),_c('table',[_c('tr',[_vm._m(0),_c('td',[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.format),expression:\"format\"}],attrs:{\"id\":\"export_format\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.format=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},[_c('option',{attrs:{\"value\":\"image/png\"}},[_vm._v(\"PNG (lossless)\")]),(_vm.webpSupport)?_c('option',{attrs:{\"value\":\"image/webp\"}},[_vm._v(\"WebP (lossy)\")]):_vm._e(),(_vm.heifSupport)?_c('option',{attrs:{\"value\":\"image/heif\"}},[_vm._v(\"HEIF (lossy)\")]):_vm._e(),_c('option',{attrs:{\"value\":\"image/jpeg\"}},[_vm._v(\"JPEG (lossy)\")])])])]),(_vm.isLossy)?_c('tr',[_vm._m(1),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.quality),expression:\"quality\",modifiers:{\"number\":true}}],attrs:{\"id\":\"export_quality\",\"type\":\"number\",\"min\":\"0\",\"max\":\"100\"},domProps:{\"value\":(_vm.quality)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.quality=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})])]):_vm._e(),_c('tr',[_vm._m(2),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.ppi),expression:\"ppi\",modifiers:{\"number\":true}}],attrs:{\"id\":\"export_ppi\",\"type\":\"number\",\"min\":\"0\"},domProps:{\"value\":(_vm.ppi)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.ppi=_vm._n($event.target.value)},\"blur\":function($event){return _vm.$forceUpdate()}}})])]),_c('tr',[_vm._m(3),_c('td',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.pages),expression:\"pages\"}],attrs:{\"id\":\"export_pages\",\"placeholder\":\"E.g. 1-5, 8, 11-13\"},domProps:{\"value\":(_vm.pages)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.pages=$event.target.value}}})])]),_c('tr',[_c('td',[_c('button',{on:{\"click\":_vm.download}},[_c('i',{staticClass:\"material-icons\"},[_vm._v(\"photo_camera\")]),_vm._v(\" Download \")])]),_c('td',[_c('button',{on:{\"click\":_vm.estimateExportSize}},[_vm._v(\"Estimate filesizes\")])])])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('td',[_c('label',{attrs:{\"for\":\"export_format\"}},[_vm._v(\"Format\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('td',[_c('label',{attrs:{\"for\":\"export_quality\"}},[_vm._v(\"Quality:\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('td',[_c('label',{attrs:{\"for\":\"export_ppi\"}},[_vm._v(\" Panels per image: \"),_c('br'),_c('small',[_vm._v(\"(0 for one single image)\")])])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('td',[_c('label',{attrs:{\"for\":\"export_pages\"}},[_vm._v(\" Panels to export: \"),_c('br'),_c('small',[_vm._v(\"(Leave empty for all)\")])])])}]\n\nexport { render, staticRenderFns }","import { RenderContext } from '@/renderer/rendererContext';\nimport { getAAsset } from '@/asset-manager';\nimport { screenWidth, screenHeight } from '@/constants/base';\nimport { IAsset } from '@/store/content';\nimport { ScalingModes } from '@/store/panels';\nimport { DeepReadonly } from '@/util/readonly';\nimport { IRenderable, IHitbox } from './renderable';\n\nexport class Background implements IRenderable {\n\tpublic constructor(\n\t\tpublic readonly id: string,\n\t\tpublic readonly assets: DeepReadonly<IAsset[]>,\n\t\tpublic readonly flip: boolean,\n\t\tpublic readonly scale: ScalingModes\n\t) {}\n\n\tpublic updatedContent(): void {}\n\n\tpublic async render(selected: boolean, rx: RenderContext): Promise<void> {\n\t\tconst images = await Promise.all(\n\t\t\tthis.assets.map(asset => getAAsset(asset, rx.hq))\n\t\t);\n\t\tfor (const image of images) {\n\t\t\tif (!(image instanceof HTMLImageElement)) return;\n\t\t\tlet x = 0;\n\t\t\tlet y = 0;\n\t\t\tlet w = image.width;\n\t\t\tlet h = image.height;\n\n\t\t\tswitch (this.scale) {\n\t\t\t\tcase ScalingModes.None:\n\t\t\t\t\tx = screenWidth / 2 - w / 2;\n\t\t\t\t\ty = screenHeight / 2 - h / 2;\n\t\t\t\t\tbreak;\n\t\t\t\tcase ScalingModes.Stretch:\n\t\t\t\t\tw = screenWidth;\n\t\t\t\t\th = screenHeight;\n\t\t\t\t\tbreak;\n\t\t\t\tcase ScalingModes.Cover:\n\t\t\t\t\tconst ratio = w / h;\n\t\t\t\t\tconst screenRatio = screenWidth / screenHeight;\n\n\t\t\t\t\tif (ratio > screenRatio) {\n\t\t\t\t\t\th = screenHeight;\n\t\t\t\t\t\tw = h * ratio;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tw = screenWidth;\n\t\t\t\t\t\th = w / ratio;\n\t\t\t\t\t}\n\n\t\t\t\t\tx = screenWidth / 2 - w / 2;\n\t\t\t\t\ty = screenHeight / 2 - h / 2;\n\t\t\t}\n\n\t\t\trx.drawImage({\n\t\t\t\timage,\n\t\t\t\tx,\n\t\t\t\ty,\n\t\t\t\tw,\n\t\t\t\th,\n\t\t\t\tflip: this.flip,\n\t\t\t});\n\t\t}\n\t}\n\tpublic hitTest(hx: number, hy: number): boolean {\n\t\treturn true;\n\t}\n\tpublic getHitbox(): IHitbox {\n\t\treturn {\n\t\t\tx0: 0,\n\t\t\ty0: 0,\n\t\t\tx1: screenWidth,\n\t\t\ty1: screenHeight,\n\t\t};\n\t}\n}\n\nexport const color = {\n\tid: 'buildin.static-color',\n\tname: 'Static color',\n\tcolor: '#000000',\n\n\tupdatedContent(): void {},\n\n\tasync render(selected: boolean, rx: RenderContext): Promise<void> {\n\t\trx.drawRect({\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\tw: screenWidth,\n\t\t\th: screenHeight,\n\t\t\tfill: { style: this.color },\n\t\t});\n\t},\n\n\thitTest() {\n\t\treturn true;\n\t},\n\n\tgetHitbox() {\n\t\treturn {\n\t\t\tx0: 0,\n\t\t\ty0: 0,\n\t\t\tx1: screenWidth,\n\t\t\ty1: screenHeight,\n\t\t};\n\t},\n};\n\nexport const transparent = {\n\tid: 'buildin.transparent',\n\tname: 'Transparent',\n\t// tslint:disable-next-line: no-empty\n\tasync render(selected: boolean, rx: RenderContext) {},\n\n\thitTest() {\n\t\treturn true;\n\t},\n\n\tgetHitbox() {\n\t\treturn {\n\t\t\tx0: 0,\n\t\t\ty0: 0,\n\t\t\tx1: screenWidth,\n\t\t\ty1: screenHeight,\n\t\t};\n\t},\n};\n","import { RenderContext } from '@/renderer/rendererContext';\nimport { getAAsset } from '@/asset-manager';\nimport { IRenderable, IHitbox } from './renderable';\nimport { ISprite } from '@/store/objectTypes/sprite';\nimport { DeepReadonly } from '@/util/readonly';\n\nconst BaseXPosition = 640;\n\nexport class Sprite implements IRenderable {\n\tpublic ratio: number = 0;\n\tpublic lockedRatio: boolean = true;\n\tprivate asset: HTMLImageElement | null = null;\n\n\tpublic get id(): string {\n\t\treturn this.obj.id;\n\t}\n\tpublic get infront(): boolean {\n\t\treturn this.obj.onTop;\n\t}\n\n\tpublic constructor(public readonly obj: DeepReadonly<ISprite>) {}\n\n\tpublic updatedContent(): void {}\n\n\tpublic async render(selected: boolean, rx: RenderContext) {\n\t\tconst assets = await Promise.all(\n\t\t\tthis.obj.assets.map((asset) => getAAsset(asset))\n\t\t);\n\t\tconst x = this.obj.x - this.obj.width / 2;\n\t\tfor (const asset of assets) {\n\t\t\trx.drawImage({\n\t\t\t\timage: asset,\n\t\t\t\tx,\n\t\t\t\ty: this.obj.y,\n\t\t\t\tw: this.obj.width,\n\t\t\t\th: this.obj.height,\n\t\t\t\tshadow: selected && rx.preview ? { blur: 20, color: 'red' } : undefined,\n\t\t\t\tflip: this.obj.flip,\n\t\t\t\topacity: this.obj.opacity,\n\t\t\t});\n\t\t}\n\t}\n\n\tpublic hitTest(hx: number, hy: number): boolean {\n\t\tconst hitX = hx - this.obj.x + this.obj.width / 2;\n\t\tconst hitY = hy - this.obj.y;\n\t\treturn (\n\t\t\thitX >= 0 &&\n\t\t\thitX <= this.obj.width &&\n\t\t\thitY >= 0 &&\n\t\t\thitY <= this.obj.height\n\t\t);\n\t}\n\n\tpublic getHitbox(): IHitbox {\n\t\treturn {\n\t\t\tx0: this.obj.x - this.obj.width / 2,\n\t\t\tx1: this.obj.x + this.obj.width / 2,\n\t\t\ty0: this.obj.y,\n\t\t\ty1: this.obj.y + this.obj.height,\n\t\t};\n\t}\n}\n","export function roundedRectangle(\n\tctx: CanvasPath,\n\tx: number,\n\ty: number,\n\tw: number,\n\th: number,\n\tr: number\n) {\n\tif (w < 0) w = 0;\n\tif (h < 0) h = 0;\n\tif (w < 2 * r) r = w / 2;\n\tif (h < 2 * r) r = h / 2;\n\tctx.moveTo(x + r, y);\n\tctx.arcTo(x + w, y, x + w, y + h, r);\n\tctx.arcTo(x + w, y + h, x, y + h, r);\n\tctx.arcTo(x, y + h, x, y, r);\n\tctx.arcTo(x, y, x + w, y, r);\n\tctx.closePath();\n}\n\nexport function roundedTopRectangle(\n\tctx: CanvasPath,\n\tx: number,\n\ty: number,\n\tw: number,\n\th: number,\n\tr: number\n) {\n\tif (w < 0) w = 0;\n\tif (h < 0) h = 0;\n\tif (w < 2 * r) r = w / 2;\n\tif (h < 2 * r) r = h / 2;\n\tctx.moveTo(x + r, y);\n\tctx.arcTo(x + w, y, x + w, y + h, r);\n\tctx.lineTo(x + w, y + h);\n\tctx.lineTo(x, y + h);\n\tctx.arcTo(x, y, x + w, y, r);\n\tctx.closePath();\n}\n","import { HSLAColor } from '@/util/colors/hsl';\n\n// tslint:disable: no-magic-numbers\nexport const nameboxTextOutlineDelta = new HSLAColor(\n\t-0.03065134099616873,\n\t-0.5714285714285714,\n\t-0.29607843137254896,\n\t0\n);\n\nexport const nameboxBackgroundDelta = new HSLAColor(\n\t0.002028397565922768,\n\t0,\n\t0.13725490196078438,\n\t0\n);\n\nexport const nameboxGradientMiddleStopPosition = 0.82;\n\nexport const nameboxGradientEndDelta = new HSLAColor(\n\t-0.004901960784313708,\n\t-0.8599999999999999,\n\t-0.16274509803921566,\n\t0\n);\n\nexport const nameboxRounding = 12;\nexport const nameboxRoundingBuffer = 1.5;\n\nexport const textboxRounding = 12;\nexport const textboxRoundingBuffer = 1.5;\n\nexport const nameColorThreshold = 0.6;\n\nexport const controlColorDelta = new HSLAColor(\n\t0.08045977011494243,\n\t-0.5714285714285714,\n\t-0.5960784313725489,\n\t0\n);\n\nexport const controlDisableColorDelta = new HSLAColor(\n\t0,\n\t-0.14285714285714296,\n\t0.3,\n\t0\n);\n\nexport const dotColorDelta = new HSLAColor(\n\t0.004269293924466178,\n\t-0.01869158878504662,\n\t-0.039215686274509665,\n\t0\n);\n\nexport const dotRadius = 9.5;\nexport const dotPatternSize = 47;\n\nexport const textboxOutlineColorDelta = new HSLAColor(\n\t0.0023347701149424305,\n\t0,\n\t0.10784313725490202,\n\t0\n);\n","import { RenderContext } from '@/renderer/rendererContext';\nimport { getAsset } from '@/asset-manager';\nimport { ITextBox } from '@/store/objectTypes/textbox';\nimport { IRenderable, IHitbox } from './renderable';\nimport {\n\tNameboxTextStyle,\n\tControlsTextStyle,\n\tControlsTextDisabledStyle,\n\tTextBoxWidth,\n\tNameboxHeight,\n\tTextBoxHeight,\n\tTextBoxCorruptedWidth,\n\tNameboxXOffset,\n\tNameboxWidth,\n\tNameboxTextYOffset,\n\tControlsXHistoryOffset,\n\tControlsXSkipOffset,\n\tControlsXStuffOffset,\n\tArrowXRightOffset,\n\tArrowYBottomOffset,\n\tTextBoxTextYOffset,\n\tTextBoxTextXOffset,\n\tControlsYBottomOffset,\n\tGlowRY,\n\tGlowRX,\n} from '@/constants/textBox';\nimport { Renderer } from '@/renderer/renderer';\nimport { roundedRectangle, roundedTopRectangle } from '@/renderer/pathTools';\nimport { RGBAColor } from '@/util/colors/rgb';\nimport { TextRenderer, ITextStyle } from '@/renderer/textRenderer/textRenderer';\nimport { screenWidth, screenHeight } from '@/constants/base';\nimport {\n\tnameboxTextOutlineDelta,\n\tnameboxBackgroundDelta,\n\tnameboxGradientEndDelta,\n\tnameboxGradientMiddleStopPosition,\n\tcontrolColorDelta,\n\tcontrolDisableColorDelta,\n\tnameboxRounding,\n\tdotColorDelta,\n\tdotRadius,\n\tdotPatternSize,\n\ttextboxRoundingBuffer,\n\ttextboxRounding,\n\ttextboxOutlineColorDelta,\n} from '@/constants/textBoxCustom';\n\nexport class TextBox implements IRenderable {\n\tpublic display: boolean = true;\n\tprivate lastVersion = -1;\n\tprivate lastX = 0;\n\tprivate lastY = 0;\n\tprivate lastH = 0;\n\tprivate lastW = 0;\n\tprivate localRenderer = new Renderer(screenWidth, screenHeight);\n\n\tpublic constructor(public obj: ITextBox) {}\n\n\tpublic updatedContent(): void {}\n\n\tpublic get id() {\n\t\treturn this.obj.id;\n\t}\n\n\tpublic get width(): number {\n\t\treturn this.obj.style === 'custom' ? this.obj.width : TextBoxWidth;\n\t}\n\n\tpublic get height(): number {\n\t\treturn (\n\t\t\t(this.obj.style === 'custom' ? this.obj.height : TextBoxHeight) +\n\t\t\tNameboxHeight\n\t\t);\n\t}\n\n\tpublic hitTest(hx: number, hy: number): boolean {\n\t\tconst w = this.width;\n\t\tconst h = this.height;\n\n\t\tconst w2 = w / 2;\n\t\tconst x1 = this.obj.x - w2;\n\t\tconst x2 = x1 + w;\n\t\tconst y1 = this.obj.y;\n\t\tconst y2 = y1 + h;\n\t\treturn x1 <= hx && x2 >= hx && y1 <= hy && y2 >= hy;\n\t}\n\n\tpublic async render(selected: boolean, rx: RenderContext) {\n\t\tif (\n\t\t\tthis.lastVersion !== this.obj.version ||\n\t\t\tthis.lastX !== this.obj.x ||\n\t\t\tthis.lastY !== this.obj.y ||\n\t\t\tthis.lastH !== this.obj.height ||\n\t\t\tthis.lastW !== this.obj.width\n\t\t) {\n\t\t\tawait this.updateLocalCanvas();\n\t\t\tthis.lastVersion = this.obj.version;\n\t\t\tthis.lastX = this.obj.x;\n\t\t\tthis.lastY = this.obj.y;\n\t\t}\n\n\t\trx.drawImage({\n\t\t\timage: this.localRenderer,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\tflip: this.obj.flip,\n\t\t\tshadow: selected && rx.preview ? { blur: 20, color: 'red' } : undefined,\n\t\t\topacity: this.obj.opacity,\n\t\t});\n\t}\n\n\tpublic get controlColor(): string {\n\t\tif (this.obj.deriveCustomColors) {\n\t\t\tconst base = RGBAColor.fromCss(this.obj.customColor).toHSL();\n\t\t\treturn base\n\t\t\t\t.shift(controlColorDelta)\n\t\t\t\t.toRgb()\n\t\t\t\t.toCss();\n\t\t}\n\t\treturn this.obj.customControlsColor;\n\t}\n\n\tpublic get controlsStyle() {\n\t\tif (this.obj.style !== 'custom') return ControlsTextStyle;\n\t\treturn {\n\t\t\t...ControlsTextStyle,\n\t\t\tfill: {\n\t\t\t\tstyle: this.controlColor,\n\t\t\t},\n\t\t};\n\t}\n\n\tpublic get controlsDisableStyle() {\n\t\tif (this.obj.style !== 'custom') return ControlsTextDisabledStyle;\n\n\t\tconst col = RGBAColor.fromCss(this.controlColor).toHSL();\n\t\tconst disColor = col\n\t\t\t.shift(controlDisableColorDelta)\n\t\t\t.toRgb()\n\t\t\t.toCss();\n\n\t\treturn {\n\t\t\t...ControlsTextStyle,\n\n\t\t\tfill: {\n\t\t\t\tstyle: disColor,\n\t\t\t},\n\t\t};\n\t}\n\n\tpublic async updateLocalCanvas() {\n\t\tawait this.localRenderer.render(async rx => {\n\t\t\tconst w = this.width;\n\t\t\tconst h = this.height;\n\t\t\tconst w2 = w / 2;\n\t\t\tconst x = this.obj.x - w2;\n\t\t\tconst y = this.obj.y;\n\n\t\t\tawait this.renderBackdrop(rx, x, y + NameboxHeight);\n\n\t\t\tif (this.obj.talkingDefault !== 'No-one') {\n\t\t\t\tconst name =\n\t\t\t\t\tthis.obj.talkingDefault === 'Other'\n\t\t\t\t\t\t? this.obj.talkingOther\n\t\t\t\t\t\t: this.obj.talkingDefault;\n\t\t\t\tawait this.renderNamebox(rx, x + NameboxXOffset, y, name);\n\t\t\t}\n\n\t\t\tawait this.renderText(rx, x, y, this.obj.autoWrap ? w : 0);\n\n\t\t\tconst bottom = y + h;\n\t\t\tconst controlsY = bottom - ControlsYBottomOffset;\n\t\t\tconst controlsCenter = x + w / 2;\n\n\t\t\tif (this.obj.controls) {\n\t\t\t\trx.drawText({\n\t\t\t\t\ttext: 'History',\n\t\t\t\t\tx: controlsCenter + ControlsXHistoryOffset,\n\t\t\t\t\ty: controlsY,\n\t\t\t\t\t...this.controlsStyle,\n\t\t\t\t});\n\t\t\t\trx.drawText({\n\t\t\t\t\ttext: 'Skip',\n\t\t\t\t\tx: controlsCenter + ControlsXSkipOffset,\n\t\t\t\t\ty: controlsY,\n\t\t\t\t\t...(this.obj.skip ? this.controlsStyle : this.controlsDisableStyle),\n\t\t\t\t});\n\t\t\t\trx.drawText({\n\t\t\t\t\ttext: 'Auto   Save   Load   Settings',\n\t\t\t\t\tx: controlsCenter + ControlsXStuffOffset,\n\t\t\t\t\ty: controlsY,\n\t\t\t\t\t...this.controlsStyle,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (this.obj.continue) {\n\t\t\t\trx.drawImage({\n\t\t\t\t\timage: await getAsset('next'),\n\t\t\t\t\tx: x + w - ArrowXRightOffset,\n\t\t\t\t\ty: bottom - ArrowYBottomOffset,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic getHitbox(): IHitbox {\n\t\treturn {\n\t\t\tx0: this.obj.x - this.obj.width / 2,\n\t\t\tx1: this.obj.x + this.obj.width / 2,\n\t\t\ty0: this.obj.y,\n\t\t\ty1: this.obj.y + this.obj.height,\n\t\t};\n\t}\n\n\tprivate get nameboxOutlineColor(): string {\n\t\tif (this.obj.deriveCustomColors) {\n\t\t\tconst base = RGBAColor.fromCss(this.obj.customColor).toHSL();\n\t\t\treturn base\n\t\t\t\t.shift(nameboxTextOutlineDelta)\n\t\t\t\t.toRgb()\n\t\t\t\t.toCss();\n\t\t}\n\t\treturn this.obj.customNameboxStroke;\n\t}\n\n\tprivate get nameboxBackgroundColor(): string {\n\t\tif (this.obj.deriveCustomColors) {\n\t\t\tconst base = RGBAColor.fromCss(this.obj.customColor).toHSL();\n\t\t\treturn base\n\t\t\t\t.shift(nameboxBackgroundDelta)\n\t\t\t\t.toRgb()\n\t\t\t\t.toCss();\n\t\t}\n\t\treturn this.obj.customNameboxColor;\n\t}\n\n\tprivate async renderNamebox(\n\t\trx: RenderContext,\n\t\tx: number,\n\t\ty: number,\n\t\tname: string\n\t): Promise<void> {\n\t\tlet w: number;\n\t\tconst h = NameboxHeight;\n\t\tlet style: ITextStyle = NameboxTextStyle;\n\t\tif (this.obj.style === 'custom') {\n\t\t\tstyle = {\n\t\t\t\t...style,\n\t\t\t\tstrokeColor: this.nameboxOutlineColor,\n\t\t\t\tstrokeWidth: 6,\n\t\t\t\tcolor: '#FFFFFF',\n\t\t\t};\n\t\t\tw = this.obj.customNameboxWidth;\n\t\t\trx.customTransform(\n\t\t\t\tctx => {\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\troundedTopRectangle(ctx, x, y, w, h, nameboxRounding);\n\t\t\t\t\tctx.clip();\n\t\t\t\t},\n\t\t\t\tsubRx => {\n\t\t\t\t\tconst gradient = subRx.linearGradient(x, y, x, y + NameboxHeight);\n\t\t\t\t\tconst baseBG = RGBAColor.fromCss(this.nameboxBackgroundColor);\n\t\t\t\t\t// tslint:disable-next-line: no-magic-numbers\n\t\t\t\t\tconst color = new RGBAColor(baseBG.r, baseBG.g, baseBG.b, 0.95);\n\t\t\t\t\tconst targetColor = color\n\t\t\t\t\t\t.toHSL()\n\t\t\t\t\t\t.shift(nameboxGradientEndDelta)\n\t\t\t\t\t\t.toRgb();\n\t\t\t\t\tgradient.addColorStop(0, color.toCss());\n\t\t\t\t\tgradient.addColorStop(\n\t\t\t\t\t\tnameboxGradientMiddleStopPosition,\n\t\t\t\t\t\tcolor.toCss()\n\t\t\t\t\t);\n\t\t\t\t\tgradient.addColorStop(1, targetColor.toCss());\n\t\t\t\t\tsubRx.drawRect({\n\t\t\t\t\t\tx,\n\t\t\t\t\t\ty,\n\t\t\t\t\t\tw: this.obj.width,\n\t\t\t\t\t\th,\n\t\t\t\t\t\tfill: {\n\t\t\t\t\t\t\tstyle: gradient,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t} else if (this.obj.style !== 'none') {\n\t\t\tw = NameboxWidth;\n\t\t\trx.drawImage({\n\t\t\t\timage: await getAsset('namebox'),\n\t\t\t\tx,\n\t\t\t\ty,\n\t\t\t});\n\t\t} else {\n\t\t\tw = NameboxWidth;\n\t\t}\n\n\t\tconst render = new TextRenderer(name, style);\n\t\tawait render.loadFonts();\n\n\t\trender.fixAlignment('center', x, x + w, y + NameboxTextYOffset, 0);\n\n\t\trender.render(rx.fsCtx);\n\t}\n\n\tprivate async renderBackdrop(\n\t\trx: RenderContext,\n\t\tx: number,\n\t\ty: number\n\t): Promise<void> {\n\t\tif (this.obj.style === 'custom') {\n\t\t\tconst hslColor = RGBAColor.fromCss(this.obj.customColor).toHSL();\n\t\t\tconst dotPattern = new Renderer(dotPatternSize, dotPatternSize);\n\t\t\tdotPattern.render(async (dotRx: RenderContext) => {\n\t\t\t\tconst fill = {\n\t\t\t\t\tstyle: hslColor\n\t\t\t\t\t\t.shift(dotColorDelta)\n\t\t\t\t\t\t.toRgb()\n\t\t\t\t\t\t.toCss(),\n\t\t\t\t};\n\n\t\t\t\tfunction drawDot(dotX: number, dotY: number) {\n\t\t\t\t\tdotRx.drawPath({\n\t\t\t\t\t\tpath: ctx => {\n\t\t\t\t\t\t\tctx.ellipse(dotX, dotY, dotRadius, dotRadius, 0, 0, 2 * Math.PI);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfill,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tdrawDot(0, 0);\n\t\t\t\tdrawDot(dotPatternSize, 0);\n\t\t\t\tdrawDot(0, dotPatternSize);\n\t\t\t\tdrawDot(dotPatternSize, dotPatternSize);\n\t\t\t\tdrawDot(dotPatternSize / 2, dotPatternSize / 2);\n\t\t\t}, true);\n\t\t\trx.customTransform(\n\t\t\t\tctx => {\n\t\t\t\t\tctx.beginPath();\n\t\t\t\t\troundedRectangle(\n\t\t\t\t\t\tctx,\n\t\t\t\t\t\tx + textboxRoundingBuffer,\n\t\t\t\t\t\ty + textboxRoundingBuffer,\n\t\t\t\t\t\tthis.obj.width - textboxRoundingBuffer * 2,\n\t\t\t\t\t\tthis.obj.height - textboxRoundingBuffer * 2,\n\t\t\t\t\t\ttextboxRounding\n\t\t\t\t\t);\n\t\t\t\t\tctx.clip();\n\t\t\t\t},\n\t\t\t\tsubRx => {\n\t\t\t\t\tconst h = this.obj.height;\n\t\t\t\t\tconst w = this.obj.width;\n\t\t\t\t\tconst gradient = subRx.linearGradient(x, y, x, y + h);\n\t\t\t\t\tconst color = RGBAColor.fromHex(this.obj.customColor);\n\t\t\t\t\tgradient.addColorStop(0, color.toCss());\n\t\t\t\t\tgradient.addColorStop(\n\t\t\t\t\t\t1,\n\t\t\t\t\t\t`rgba(${color.r},${color.g},${color.b},0.6667)`\n\t\t\t\t\t);\n\t\t\t\t\tsubRx.drawRect({\n\t\t\t\t\t\tx,\n\t\t\t\t\t\ty,\n\t\t\t\t\t\tw,\n\t\t\t\t\t\th,\n\t\t\t\t\t\tfill: {\n\t\t\t\t\t\t\tstyle: gradient,\n\t\t\t\t\t\t},\n\t\t\t\t\t\toutline: {\n\t\t\t\t\t\t\tstyle: '#ffdfee',\n\t\t\t\t\t\t\twidth: 6,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t\tsubRx.customTransform(\n\t\t\t\t\t\tctx => {\n\t\t\t\t\t\t\tctx.translate(x, y);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsubSubRx => {\n\t\t\t\t\t\t\tconst pattern = subRx.patternFrom(dotPattern);\n\t\t\t\t\t\t\tsubRx.drawRect({\n\t\t\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\t\t\ty: 0,\n\t\t\t\t\t\t\t\tw,\n\t\t\t\t\t\t\t\th,\n\t\t\t\t\t\t\t\tfill: {\n\t\t\t\t\t\t\t\t\tstyle: pattern,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcomposition: 'source-atop',\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t);\n\t\t\t\t\tconst glowGradient = subRx.linearGradient(\n\t\t\t\t\t\tx,\n\t\t\t\t\t\ty + h - GlowRY,\n\t\t\t\t\t\tx,\n\t\t\t\t\t\ty + h\n\t\t\t\t\t);\n\t\t\t\t\tglowGradient.addColorStop(0, 'rgba(255,255,255,0.3137)');\n\t\t\t\t\t// tslint:disable-next-line: no-magic-numbers\n\t\t\t\t\tglowGradient.addColorStop(0.5, 'rgba(255,255,255,0.0627)');\n\t\t\t\t\tglowGradient.addColorStop(1, 'rgba(255,255,255,0)');\n\t\t\t\t\tsubRx.drawPath({\n\t\t\t\t\t\tpath: ctx => {\n\t\t\t\t\t\t\tctx.ellipse(x + w / 2, y + h, GlowRX, GlowRY, 0, 0, 2 * Math.PI);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfill: {\n\t\t\t\t\t\t\tstyle: glowGradient,\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t);\n\t\t\tconst outlineColor = hslColor\n\t\t\t\t.shift(textboxOutlineColorDelta)\n\t\t\t\t.toRgb()\n\t\t\t\t.toCss();\n\t\t\trx.drawPath({\n\t\t\t\tpath: path => {\n\t\t\t\t\troundedRectangle(\n\t\t\t\t\t\tpath,\n\t\t\t\t\t\tx + textboxRoundingBuffer,\n\t\t\t\t\t\ty + textboxRoundingBuffer,\n\t\t\t\t\t\tthis.obj.width - textboxRoundingBuffer * 2,\n\t\t\t\t\t\tthis.obj.height - textboxRoundingBuffer * 2,\n\t\t\t\t\t\ttextboxRounding\n\t\t\t\t\t);\n\t\t\t\t},\n\t\t\t\toutline: {\n\t\t\t\t\tstyle: outlineColor,\n\t\t\t\t\twidth: 3,\n\t\t\t\t},\n\t\t\t});\n\t\t} else if (this.obj.style !== 'none') {\n\t\t\tif (this.obj.style === 'corrupt') {\n\t\t\t\tx += (TextBoxWidth - TextBoxCorruptedWidth) / 2;\n\t\t\t}\n\t\t\tconst image = await getAsset(\n\t\t\t\tthis.obj.style === 'corrupt' ? 'textbox_monika' : 'textbox'\n\t\t\t);\n\t\t\trx.drawImage({ image, x, y });\n\t\t}\n\t}\n\n\tprivate async renderText(\n\t\trx: RenderContext,\n\t\tbaseX: number,\n\t\tbaseY: number,\n\t\tmaxLineWidth: number\n\t): Promise<void> {\n\t\tconst render = new TextRenderer(this.obj.text, {\n\t\t\talpha: 1,\n\t\t\tcolor: '#ffffff',\n\t\t\tfontName: 'aller',\n\t\t\tfontSize: 24,\n\t\t\tisBold: false,\n\t\t\tisItalic: false,\n\t\t\tisStrikethrough: false,\n\t\t\tisUnderlined: false,\n\t\t\tletterSpacing: 0,\n\t\t\tstrokeColor: '#523140',\n\t\t\tstrokeWidth: 4,\n\t\t\tlineSpacing: 1.2,\n\t\t});\n\t\tif (this.obj.autoQuoting && this.obj.talkingDefault !== 'No-one') {\n\t\t\trender.quote();\n\t\t}\n\t\tawait render.loadFonts();\n\n\t\trender.fixAlignment(\n\t\t\t'left',\n\t\t\tbaseX + TextBoxTextXOffset,\n\t\t\t0,\n\t\t\tbaseY + NameboxHeight + TextBoxTextYOffset,\n\t\t\tmaxLineWidth - TextBoxTextXOffset - TextBoxTextXOffset\n\t\t);\n\n\t\trender.render(rx.fsCtx);\n\t}\n}\n","import { HSLAColor } from '@/util/colors/hsl';\nimport { screenHeight } from './base';\nimport { ITextStyle } from '@/renderer/textRenderer/textRenderer';\n\n// tslint:disable: no-magic-numbers\nexport const nameboxTextOutlineDelta = new HSLAColor(\n\t-0.03065134099616873,\n\t-0.5714285714285714,\n\t-0.29607843137254896,\n\t0\n);\n\nexport const ChoiceButtonColor = '#ffe6f4';\nexport const ChoiceButtonBorderColor = '#ffbde1';\nexport const ChoiceButtonWidth = 420;\nexport const ChoiceSpacing = 22;\nexport const ChoiceX = 640;\nexport const ChoiceYOffset = 270;\nexport const ChoicePadding = 7;\n\nexport const ChoiceY = (screenHeight - ChoiceYOffset) / 2;\n\nexport const ChoiceTextStyle: ITextStyle = {\n\talpha: 1,\n\tcolor: 'black',\n\tfontName: 'aller',\n\tfontSize: 24,\n\tisBold: false,\n\tisItalic: false,\n\tisStrikethrough: false,\n\tisUnderlined: false,\n\tletterSpacing: 0,\n\tlineSpacing: 1,\n\tstrokeColor: '',\n\tstrokeWidth: 0,\n};\n","import { RenderContext } from '@/renderer/rendererContext';\nimport { IRenderable, IHitbox } from './renderable';\nimport { Renderer } from '@/renderer/renderer';\nimport { TextRenderer } from '@/renderer/textRenderer/textRenderer';\nimport { screenWidth, screenHeight } from '@/constants/base';\nimport { IChoices } from '@/store/objectTypes/choices';\nimport {\n\tChoiceTextStyle,\n\tChoiceButtonBorderColor,\n\tChoiceButtonColor,\n\tChoicePadding,\n\tChoiceSpacing,\n} from '@/constants/choices';\nimport { DeepReadonly } from '@/util/readonly';\n\nexport class Choice implements IRenderable {\n\tpublic display: boolean = true;\n\tprivate lastVersion = -1;\n\tprivate lastX = 0;\n\tprivate lastY = 0;\n\tprivate lastH = 0;\n\tprivate lastW = 0;\n\tprivate localRenderer = new Renderer(screenWidth, screenHeight);\n\tprivate height = 0;\n\tprivate choiceRenderers: TextRenderer[] = [];\n\n\tpublic constructor(public obj: DeepReadonly<IChoices>) {}\n\n\tpublic get id() {\n\t\treturn this.obj.id;\n\t}\n\n\tpublic get width(): number {\n\t\treturn this.obj.width;\n\t}\n\n\tpublic updatedContent(): void {}\n\n\tpublic hitTest(hx: number, hy: number): boolean {\n\t\tconst scaledX = hx - (this.obj.x - this.width / 2);\n\t\tconst scaledY = hy - (this.obj.y - this.height / 2);\n\n\t\tif (scaledX < 0 || scaledX > this.width) return false;\n\t\tif (scaledY < 0 || scaledY > this.height) return false;\n\n\t\treturn true;\n\t}\n\n\tpublic getHitbox(): IHitbox {\n\t\tconst w2 = this.width / 2;\n\t\tconst h2 = this.height / 2;\n\t\treturn {\n\t\t\tx0: this.obj.x - w2,\n\t\t\tx1: this.obj.x + w2,\n\t\t\ty0: this.obj.y - h2,\n\t\t\ty1: this.obj.y + h2,\n\t\t};\n\t}\n\n\tpublic async render(selected: boolean, rx: RenderContext) {\n\t\tif (\n\t\t\tthis.lastVersion !== this.obj.version ||\n\t\t\tthis.lastX !== this.obj.x ||\n\t\t\tthis.lastY !== this.obj.y ||\n\t\t\tthis.lastH !== this.obj.height ||\n\t\t\tthis.lastW !== this.obj.width\n\t\t) {\n\t\t\tawait this.updateLocalCanvas();\n\t\t\tthis.lastVersion = this.obj.version;\n\t\t\tthis.lastX = this.obj.x;\n\t\t\tthis.lastY = this.obj.y;\n\t\t}\n\n\t\trx.drawImage({\n\t\t\timage: this.localRenderer,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\tflip: this.obj.flip,\n\t\t\tshadow: selected && rx.preview ? { blur: 20, color: 'red' } : undefined,\n\t\t\topacity: this.obj.opacity,\n\t\t});\n\t}\n\n\tprivate async updateLocalCanvas() {\n\t\tawait this.localRenderer.render(async rx => {\n\t\t\tawait this.updateChoiceBounds();\n\n\t\t\tconst w = this.width;\n\t\t\tconst h = this.height;\n\t\t\tconst w2 = w / 2;\n\t\t\tconst x = this.obj.x - w2;\n\t\t\tlet y = this.obj.y - h / 2;\n\n\t\t\tfor (const choiceRenderer of this.choiceRenderers) {\n\t\t\t\tawait choiceRenderer.loadFonts();\n\t\t\t\tconst height = choiceRenderer.getHeight(\n\t\t\t\t\tthis.obj.autoWrap ? this.obj.width : 0\n\t\t\t\t);\n\t\t\t\trx.drawRect({\n\t\t\t\t\tx,\n\t\t\t\t\ty,\n\t\t\t\t\tw,\n\t\t\t\t\th: height + ChoicePadding * 2,\n\t\t\t\t\toutline: {\n\t\t\t\t\t\tstyle: ChoiceButtonBorderColor,\n\t\t\t\t\t\twidth: 3,\n\t\t\t\t\t},\n\t\t\t\t\tfill: {\n\t\t\t\t\t\tstyle: ChoiceButtonColor,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\tchoiceRenderer.fixAlignment(\n\t\t\t\t\t'center',\n\t\t\t\t\tx,\n\t\t\t\t\tx + w,\n\t\t\t\t\t// tslint:disable-next-line: no-magic-numbers\n\t\t\t\t\ty + ChoiceSpacing * 1.25,\n\t\t\t\t\tthis.obj.autoWrap ? w : 0\n\t\t\t\t);\n\t\t\t\tchoiceRenderer.render(rx.fsCtx);\n\t\t\t\ty += height + ChoicePadding * 2 + ChoiceSpacing;\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate async updateChoiceBounds() {\n\t\tthis.choiceRenderers = this.obj.choices.map(\n\t\t\tchoice => new TextRenderer(choice.text || ' ', ChoiceTextStyle)\n\t\t);\n\n\t\tthis.height =\n\t\t\tthis.choiceRenderers.reduce(\n\t\t\t\t(acc, renderer) =>\n\t\t\t\t\tacc +\n\t\t\t\t\trenderer.getHeight(this.obj.autoWrap ? this.obj.width : 0) +\n\t\t\t\t\tChoicePadding * 2,\n\t\t\t\t0\n\t\t\t) +\n\t\t\tthis.obj.choiceDistance * (this.obj.choices.length - 1);\n\t}\n}\n","import { ITextStyle } from '@/renderer/textRenderer/textRenderer';\nimport { BaseTextStyle } from './textBox';\n\n// tslint:disable: no-magic-numbers\nexport const NotificationBackgroundColor = '#ffe6f4';\nexport const NotificationBorderColor = '#ffbde1';\nexport const NotificationBackdropColor = 'rgba(255,255,255,0.6)';\n// export const NotificationMaxWidth = 744;\nexport const NotificationPadding = 40;\nexport const NotificationSpacing = 30;\n\nexport const NotificationOkTextStyle: ITextStyle = {\n\t...BaseTextStyle,\n\tfontName: 'riffic',\n\tfontSize: 24,\n\tstrokeColor: '#bb5599',\n\tstrokeWidth: 8,\n\tletterSpacing: 1,\n\tcolor: 'white',\n};\n\nexport const NotificationTextStyle: ITextStyle = {\n\talpha: 1,\n\tcolor: 'black',\n\tfontName: 'aller',\n\tfontSize: 24,\n\tisBold: false,\n\tisItalic: false,\n\tisStrikethrough: false,\n\tisUnderlined: false,\n\tletterSpacing: 0,\n\tlineSpacing: 1.2,\n\tstrokeColor: '',\n\tstrokeWidth: 0,\n};\n","import { RenderContext } from '@/renderer/rendererContext';\nimport { IRenderable, IHitbox } from './renderable';\nimport { Renderer } from '@/renderer/renderer';\nimport { TextRenderer } from '@/renderer/textRenderer/textRenderer';\nimport { screenWidth, screenHeight } from '@/constants/base';\nimport {\n\tChoiceButtonBorderColor,\n\tChoiceButtonColor,\n\tChoiceSpacing,\n} from '@/constants/choices';\nimport { DeepReadonly } from '@/util/readonly';\nimport { INotification } from '@/store/objectTypes/notification';\nimport {\n\tNotificationTextStyle,\n\tNotificationPadding,\n\tNotificationSpacing,\n\tNotificationOkTextStyle,\n\tNotificationBackdropColor,\n} from '@/constants/notification';\n\nexport class Notification implements IRenderable {\n\tpublic display: boolean = true;\n\tprivate lastVersion = -1;\n\tprivate lastX = 0;\n\tprivate lastY = 0;\n\tprivate lastH = 0;\n\tprivate lastW = 0;\n\tprivate localRenderer = new Renderer(screenWidth, screenHeight);\n\tprivate height = 0;\n\tprivate width = 0;\n\n\tpublic constructor(public obj: DeepReadonly<INotification>) {}\n\n\tpublic updatedContent(): void {}\n\n\tpublic get id() {\n\t\treturn this.obj.id;\n\t}\n\n\tpublic hitTest(hx: number, hy: number): boolean {\n\t\tconst scaledX = hx - (this.obj.x - this.width / 2);\n\t\tconst scaledY = hy - (this.obj.y - this.height / 2);\n\n\t\tif (scaledX < 0 || scaledX > this.width) return false;\n\t\tif (scaledY < 0 || scaledY > this.height) return false;\n\n\t\treturn true;\n\t}\n\n\tpublic getHitbox(): IHitbox {\n\t\tconst w2 = this.width / 2;\n\t\tconst h2 = this.height / 2;\n\t\treturn {\n\t\t\tx0: this.obj.x - w2,\n\t\t\tx1: this.obj.x + w2,\n\t\t\ty0: this.obj.y - h2,\n\t\t\ty1: this.obj.y + h2,\n\t\t};\n\t}\n\n\tpublic async render(selected: boolean, rx: RenderContext) {\n\t\tif (\n\t\t\tthis.lastVersion !== this.obj.version ||\n\t\t\tthis.lastX !== this.obj.x ||\n\t\t\tthis.lastY !== this.obj.y ||\n\t\t\tthis.lastH !== this.obj.height ||\n\t\t\tthis.lastW !== this.obj.width\n\t\t) {\n\t\t\tawait this.updateLocalCanvas();\n\t\t\tthis.lastVersion = this.obj.version;\n\t\t\tthis.lastX = this.obj.x;\n\t\t\tthis.lastY = this.obj.y;\n\t\t}\n\n\t\tif (this.obj.backdrop) {\n\t\t\trx.drawRect({\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t\tw: screenWidth,\n\t\t\t\th: screenHeight,\n\t\t\t\tfill: {\n\t\t\t\t\tstyle: NotificationBackdropColor,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\trx.drawImage({\n\t\t\timage: this.localRenderer,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\tflip: this.obj.flip,\n\t\t\tshadow: selected && rx.preview ? { blur: 20, color: 'red' } : undefined,\n\t\t\topacity: this.obj.opacity,\n\t\t});\n\t}\n\n\tprivate async updateLocalCanvas() {\n\t\tawait this.localRenderer.render(async rx => {\n\t\t\tconst textRenderer = new TextRenderer(\n\t\t\t\tthis.obj.text,\n\t\t\t\tNotificationTextStyle\n\t\t\t);\n\t\t\tconst buttonRenderer = new TextRenderer('OK', NotificationOkTextStyle);\n\t\t\tawait textRenderer.loadFonts();\n\t\t\tawait buttonRenderer.loadFonts();\n\n\t\t\tconst lineWrap = this.obj.autoWrap\n\t\t\t\t? this.obj.width - NotificationPadding * 2\n\t\t\t\t: 0;\n\n\t\t\tconst textWidth = this.obj.autoWrap ? lineWrap : textRenderer.getWidth();\n\t\t\tconst textHeight = textRenderer.getHeight(lineWrap);\n\t\t\tconst buttonWidth = this.obj.autoWrap\n\t\t\t\t? lineWrap\n\t\t\t\t: buttonRenderer.getWidth();\n\t\t\tconst buttonHeight = buttonRenderer.getHeight(lineWrap);\n\n\t\t\tthis.width = Math.max(textWidth, buttonWidth) + NotificationPadding * 2;\n\t\t\tthis.height =\n\t\t\t\ttextHeight +\n\t\t\t\tNotificationPadding * 2 +\n\t\t\t\tNotificationSpacing +\n\t\t\t\tbuttonHeight;\n\n\t\t\tconst w = this.width;\n\t\t\tconst h = this.height;\n\t\t\tconst w2 = w / 2;\n\t\t\tconst x = this.obj.x - w2;\n\t\t\tconst y = this.obj.y - h / 2;\n\n\t\t\trx.drawRect({\n\t\t\t\tx,\n\t\t\t\ty,\n\t\t\t\tw,\n\t\t\t\th,\n\t\t\t\toutline: {\n\t\t\t\t\tstyle: ChoiceButtonBorderColor,\n\t\t\t\t\twidth: 3,\n\t\t\t\t},\n\t\t\t\tfill: {\n\t\t\t\t\tstyle: ChoiceButtonColor,\n\t\t\t\t},\n\t\t\t});\n\t\t\ttextRenderer.fixAlignment(\n\t\t\t\t'center',\n\t\t\t\tx,\n\t\t\t\tx + w,\n\t\t\t\t// tslint:disable-next-line: no-magic-numbers\n\t\t\t\ty + NotificationPadding * 1.5,\n\t\t\t\tlineWrap\n\t\t\t);\n\t\t\ttextRenderer.render(rx.fsCtx);\n\t\t\tbuttonRenderer.fixAlignment(\n\t\t\t\t'center',\n\t\t\t\tx,\n\t\t\t\tx + w,\n\t\t\t\t// tslint:disable-next-line: no-magic-numbers\n\t\t\t\ty + h - NotificationPadding,\n\t\t\t\tlineWrap\n\t\t\t);\n\t\t\tbuttonRenderer.render(rx.fsCtx);\n\t\t});\n\t}\n}\n","import { ITextStyle } from '@/renderer/textRenderer/textRenderer';\nimport { screenWidth, screenHeight } from '@/constants/base';\n\n// tslint:disable: no-magic-numbers\nexport const poemBackgrounds = [\n\t{ name: 'Normal paper', file: 'poem.jpg' },\n\t{ name: 'Lightly soiled paper', file: 'poem_y1.jpg' },\n\t{ name: 'Heavily soiled paper', file: 'poem_y2.jpg' },\n\t{ name: 'Console', file: 'internal:console' },\n\t{ name: 'Transparent', file: 'internal:transparent' },\n];\nexport const defaultPoemBackground = 0;\nexport const defaultPoemStyle = 0;\nexport const defaultX = screenWidth / 2;\nexport const defaultY = screenHeight / 2;\nexport const poemTopPadding = 33;\nexport const poemBottomPadding = 100;\nexport const poemPadding = 30;\nexport const defaultPoemWidth = 800;\nexport const defaultPoemHeight = 720;\n\n//#region Console style\nexport const consoleBackgroundColor = 'rgba(51,51,51,0.75)';\nexport const consoleWidth = 480;\nexport const consoleHeight = 180;\nexport const defaultConsoleBackground = 3;\nexport const defaultConsoleStyle = 7;\n//#endregion Console style\n\nconst BasePoemStyle: ITextStyle = {\n\talpha: 1,\n\tcolor: 'black',\n\tisBold: false,\n\tisItalic: false,\n\tisStrikethrough: false,\n\tisUnderlined: false,\n\tletterSpacing: 0,\n\tlineSpacing: 1.2,\n\tstrokeColor: '',\n\tstrokeWidth: 0,\n\tfontName: 'aller',\n\tfontSize: 12,\n};\n\nexport interface IPoemTextStyle extends ITextStyle {\n\tname: string;\n}\n\nexport const poemTextStyles: IPoemTextStyle[] = [\n\t{\n\t\t...BasePoemStyle,\n\t\tname: 'Sayori',\n\t\tfontName: 'hashtag',\n\t\tfontSize: 34,\n\t\tlineSpacing: 1.05,\n\t\tletterSpacing: 0,\n\t},\n\t{\n\t\t...BasePoemStyle,\n\t\tname: 'Natsuki',\n\t\tfontName: 'ammy_handwriting',\n\t\tfontSize: 28,\n\t},\n\t{\n\t\t...BasePoemStyle,\n\t\tname: 'Monika',\n\t\tfontName: 'journal',\n\t\tfontSize: 34,\n\t},\n\t{\n\t\t...BasePoemStyle,\n\t\tname: 'Yuri',\n\t\tfontName: 'jp_hand_slanted',\n\t\tlineSpacing: 1.5,\n\t\tfontSize: 32,\n\t},\n\t{\n\t\t...BasePoemStyle,\n\t\tname: 'Yuri Act 2',\n\t\tfontName: 'damagrafik_script',\n\t\tfontSize: 18,\n\t\tletterSpacing: -8,\n\t\t// justify: true,\n\t},\n\t{\n\t\t...BasePoemStyle,\n\t\tname: 'Yuri Unused',\n\t\tfontName: 'as_i_lay_dying',\n\t\tfontSize: 40,\n\t},\n\t{\n\t\t...BasePoemStyle,\n\t\tname: 'MC',\n\t\tfontName: 'halogen',\n\t\tfontSize: 30,\n\t\tlineSpacing: 1.53,\n\t},\n\t{\n\t\t...BasePoemStyle,\n\t\tname: 'Console',\n\t\tfontName: 'f25_bank_printer',\n\t\tfontSize: 18,\n\t\tcolor: 'white',\n\t\tlineSpacing: 1.1,\n\t},\n];\n","import { RenderContext } from '@/renderer/rendererContext';\nimport { IRenderable, IHitbox } from './renderable';\nimport { Renderer } from '@/renderer/renderer';\nimport { TextRenderer } from '@/renderer/textRenderer/textRenderer';\nimport { screenWidth, screenHeight } from '@/constants/base';\nimport { IPoem } from '@/store/objectTypes/poem';\nimport { DeepReadonly } from '@/util/readonly';\nimport {\n\tpoemBackgrounds,\n\tpoemTextStyles,\n\tpoemTopPadding,\n\tpoemPadding,\n\tconsoleBackgroundColor,\n} from '@/constants/poem';\nimport { getAsset, getAssetByUrl } from '@/asset-manager';\n\nconst consolePadding = -2;\nconst consoleTopPadding = 26;\nconst consoleLineWrapPadding = 10;\nconst poemTopMargin = 10;\n\nexport class Poem implements IRenderable {\n\tprivate lastVersion = -1;\n\tprivate lastX = 0;\n\tprivate lastY = 0;\n\tprivate lastH = 0;\n\tprivate lastW = 0;\n\tprivate localRenderer = new Renderer(screenWidth, screenHeight);\n\tprivate height = 0;\n\tprivate width = 0;\n\tprivate choiceRenderers: TextRenderer[] = [];\n\n\tpublic constructor(public obj: DeepReadonly<IPoem>) {}\n\n\tpublic updatedContent(): void {}\n\n\tpublic get id() {\n\t\treturn this.obj.id;\n\t}\n\n\tpublic hitTest(hx: number, hy: number): boolean {\n\t\tconst scaledX = hx - (this.obj.x - this.width / 2);\n\t\tconst scaledY = hy - (this.obj.y - this.height / 2);\n\n\t\tif (scaledX < 0 || scaledX > this.width) return false;\n\t\tif (scaledY < 0 || scaledY > this.height) return false;\n\n\t\treturn true;\n\t}\n\n\tpublic getHitbox(): IHitbox {\n\t\tconst w2 = this.width / 2;\n\t\tconst h2 = this.height / 2;\n\t\treturn {\n\t\t\tx0: this.obj.x - w2,\n\t\t\tx1: this.obj.x + w2,\n\t\t\ty0: this.obj.y - h2,\n\t\t\ty1: this.obj.y + h2,\n\t\t};\n\t}\n\n\tpublic async render(selected: boolean, rx: RenderContext) {\n\t\tif (\n\t\t\tthis.lastVersion !== this.obj.version ||\n\t\t\tthis.lastX !== this.obj.x ||\n\t\t\tthis.lastY !== this.obj.y ||\n\t\t\tthis.lastH !== this.obj.height ||\n\t\t\tthis.lastW !== this.obj.width\n\t\t) {\n\t\t\tawait this.updateLocalCanvas();\n\t\t\tthis.lastVersion = this.obj.version;\n\t\t\tthis.lastX = this.obj.x;\n\t\t\tthis.lastY = this.obj.y;\n\t\t}\n\n\t\trx.drawImage({\n\t\t\timage: this.localRenderer,\n\t\t\tx: 0,\n\t\t\ty: 0,\n\t\t\tflip: this.obj.flip,\n\t\t\tshadow: selected && rx.preview ? { blur: 20, color: 'red' } : undefined,\n\t\t\topacity: this.obj.opacity,\n\t\t});\n\t}\n\n\tprivate async updateLocalCanvas() {\n\t\tawait this.localRenderer.render(async rx => {\n\t\t\tconst paper = poemBackgrounds[this.obj.background];\n\t\t\tlet y = this.obj.y;\n\t\t\tlet x = this.obj.x + poemTopMargin;\n\t\t\tlet padding = poemPadding;\n\t\t\tlet topPadding = poemTopPadding;\n\t\t\tlet lineWrapPadding = padding * 2;\n\n\t\t\tif (paper.file === 'internal:console') {\n\t\t\t\tconst h = (this.height = this.obj.height);\n\t\t\t\tconst w = (this.width = this.obj.width);\n\n\t\t\t\trx.drawRect({\n\t\t\t\t\tx: this.obj.x - w / 2,\n\t\t\t\t\ty: this.obj.y - h / 2,\n\t\t\t\t\th,\n\t\t\t\t\tw,\n\t\t\t\t\tfill: { style: consoleBackgroundColor },\n\t\t\t\t});\n\t\t\t\tpadding = consolePadding;\n\t\t\t\ttopPadding = consoleTopPadding;\n\t\t\t\tlineWrapPadding = consoleLineWrapPadding;\n\t\t\t} else if (paper.file === 'internal:transparent') {\n\t\t\t\tthis.height = this.obj.height;\n\t\t\t\tthis.width = this.obj.width;\n\t\t\t} else {\n\t\t\t\tconst asset = await getAssetByUrl(\n\t\t\t\t\t`assets/poemBackgrounds/${paper.file}`\n\t\t\t\t);\n\t\t\t\tif (asset instanceof HTMLImageElement) {\n\t\t\t\t\trx.drawImage({\n\t\t\t\t\t\timage: asset,\n\t\t\t\t\t\tx: this.obj.x - asset.width / 2,\n\t\t\t\t\t\ty: this.obj.y - asset.height / 2,\n\t\t\t\t\t});\n\t\t\t\t\tthis.height = asset.height;\n\t\t\t\t\tthis.width = asset.width;\n\t\t\t\t}\n\t\t\t}\n\t\t\ty -= this.height / 2;\n\t\t\tx -= this.width / 2;\n\n\t\t\tconst style = poemTextStyles[this.obj.font];\n\t\t\tconst render = new TextRenderer(this.obj.text, style);\n\t\t\tawait render.loadFonts();\n\n\t\t\trender.fixAlignment(\n\t\t\t\t'left',\n\t\t\t\tx + padding,\n\t\t\t\tx + padding,\n\t\t\t\ty + topPadding + padding,\n\t\t\t\tthis.obj.autoWrap ? this.width - lineWrapPadding : 0\n\t\t\t);\n\n\t\t\trender.render(rx.fsCtx);\n\t\t});\n\t}\n}\n","import { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport { IRenderable } from './renderable';\nimport { color, Background } from './background';\nimport { IPanel } from '@/store/panels';\nimport { DeepReadonly } from '@/util/readonly';\nimport { ISprite } from '@/store/objectTypes/sprite';\nimport { Sprite } from './sprite';\nimport { Character } from './character';\nimport { ICharacter, getData } from '@/store/objectTypes/characters';\nimport { ITextBox } from '@/store/objectTypes/textbox';\nimport { TextBox } from './textbox';\nimport { Choice } from './choices';\nimport { RenderContext } from '@/renderer/rendererContext';\nimport { getAsset } from '@/asset-manager';\nimport { Renderer } from '@/renderer/renderer';\nimport leftPad from 'left-pad';\nimport { BackgroundLookup } from '@/store/content';\nimport { IChoices } from '@/store/objectTypes/choices';\nimport { INotification } from '@/store/objectTypes/notification';\nimport { Notification } from '@/renderables/notification';\nimport { Poem } from './poem';\nimport { IPoem } from '@/store/objectTypes/poem';\n\nexport class SceneRenderer {\n\tprivate renderObjectCache = new Map<string, IRenderable>();\n\tprivate state: DeepReadonly<IRootState>;\n\tprivate lCurrentlyRendering = false;\n\tprivate renderer: Renderer;\n\n\tpublic constructor(\n\t\tprivate store: Store<DeepReadonly<IRootState>>,\n\t\tprivate panelId: string,\n\t\treadonly canvasWidth: number,\n\t\treadonly canvasHeight: number\n\t) {\n\t\tthis.state = store.state;\n\t\tthis.renderer = new Renderer(canvasWidth, canvasHeight);\n\t}\n\n\tpublic render(hq: boolean): Promise<boolean> {\n\t\tif (!this.panel) return Promise.resolve(false);\n\t\treturn this.renderer.render(this.renderCallback.bind(this), hq);\n\t}\n\n\tpublic download(): Promise<string> {\n\t\tconst date = new Date();\n\t\tconst filename = `panel-${[\n\t\t\tdate.getFullYear(),\n\t\t\tleftPad(date.getMonth() + 1, 2, '0'),\n\t\t\tleftPad(date.getDate(), 2, '0'),\n\t\t\tleftPad(date.getHours(), 2, '0'),\n\t\t\tleftPad(date.getMinutes(), 2, '0'),\n\t\t\tleftPad(date.getSeconds(), 2, '0'),\n\t\t].join('-')}.png`;\n\t\treturn this.renderer.download(this.renderCallback.bind(this), filename);\n\t}\n\n\tpublic get currentlyRendering() {\n\t\treturn this.lCurrentlyRendering;\n\t}\n\n\tpublic paintOnto(\n\t\tc: CanvasRenderingContext2D,\n\t\tx: number,\n\t\ty: number,\n\t\tw?: number,\n\t\th?: number\n\t) {\n\t\tthis.renderer.paintOnto(c, x, y, w, h);\n\t}\n\n\tpublic objectsAt(x: number, y: number): string[] {\n\t\treturn this.getRenderObjects()\n\t\t\t.filter((renderObject) => renderObject.hitTest(x, y))\n\t\t\t.map((renderObject) => renderObject.id);\n\t}\n\n\tprivate async renderCallback(rx: RenderContext): Promise<void> {\n\t\tthis.lCurrentlyRendering = true;\n\t\ttry {\n\t\t\tif (rx.preview) {\n\t\t\t\trx.drawImage({\n\t\t\t\t\tx: 0,\n\t\t\t\t\ty: 0,\n\t\t\t\t\timage: await getAsset('backgrounds/transparent'),\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tawait this.getBackgroundRenderer()?.render(false, rx);\n\n\t\t\tconst selection = this.state.ui.selection;\n\t\t\tfor (const object of this.getRenderObjects()) {\n\t\t\t\tobject.updatedContent(this.store);\n\t\t\t\tawait object.render(selection === object.id, rx);\n\t\t\t}\n\t\t} finally {\n\t\t\tthis.lCurrentlyRendering = false;\n\t\t}\n\t}\n\n\tprivate getRenderObjects() {\n\t\tconst objectsState = this.state.objects.panels[this.panelId];\n\t\tconst order = objectsState\n\t\t\t? [...objectsState.order, ...objectsState.onTopOrder]\n\t\t\t: [];\n\t\tconst objects = this.state.objects.objects;\n\t\tconst toUncache = Object.keys(this.renderObjectCache).filter(\n\t\t\t(id) => !order.includes(id)\n\t\t);\n\n\t\tfor (const id of toUncache) {\n\t\t\tthis.renderObjectCache.delete(id);\n\t\t}\n\n\t\treturn order.map((id) => {\n\t\t\tlet renderObject = this.renderObjectCache.get(id);\n\t\t\tif (!renderObject) {\n\t\t\t\tconst obj = objects[id];\n\t\t\t\tswitch (obj.type) {\n\t\t\t\t\tcase 'sprite':\n\t\t\t\t\t\trenderObject = new Sprite(obj as DeepReadonly<ISprite>);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'character':\n\t\t\t\t\t\tconst char = obj as DeepReadonly<ICharacter>;\n\t\t\t\t\t\trenderObject = new Character(char, getData(this.store, char));\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'textBox':\n\t\t\t\t\t\trenderObject = new TextBox(obj as DeepReadonly<ITextBox>);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'choice':\n\t\t\t\t\t\trenderObject = new Choice(obj as DeepReadonly<IChoices>);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'notification':\n\t\t\t\t\t\trenderObject = new Notification(obj as DeepReadonly<INotification>);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'poem':\n\t\t\t\t\t\trenderObject = new Poem(obj as DeepReadonly<IPoem>);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tthis.renderObjectCache.set(id, renderObject);\n\t\t\t}\n\t\t\treturn renderObject;\n\t\t});\n\t}\n\n\tprivate get panel(): DeepReadonly<IPanel> {\n\t\treturn this.state.panels.panels[this.panelId];\n\t}\n\n\tprivate getBackgroundRenderer(): IRenderable | null {\n\t\tconst panel = this.panel;\n\t\tswitch (panel.background.current) {\n\t\t\tcase 'buildin.static-color':\n\t\t\t\tcolor.color = panel.background.color;\n\t\t\t\treturn color;\n\t\t\tdefault:\n\t\t\t\tconst lookup = this.store.getters[\n\t\t\t\t\t'content/getBackgrounds'\n\t\t\t\t] as BackgroundLookup;\n\t\t\t\tconst current = lookup.get(panel.background.current);\n\t\t\t\tif (!current) return null;\n\t\t\t\tconst variant = current.variants[panel.background.variant];\n\t\t\t\tif (!variant) return null;\n\t\t\t\treturn new Background(\n\t\t\t\t\tpanel.background.current,\n\t\t\t\t\tvariant,\n\t\t\t\t\tpanel.background.flipped,\n\t\t\t\t\tpanel.background.scaling\n\t\t\t\t);\n\t\t}\n\t}\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Mixins, Watch } from 'vue-property-decorator';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport { PanelMixin } from './panelMixin';\nimport panels, {\n\tIPanel,\n\tIDuplicatePanelAction,\n\tISetCurrentPanelMutation,\n\tIDeletePanelAction,\n\tISetPanelPreviewMutation,\n\tIMovePanelAction,\n} from '@/store/panels';\nimport { State } from 'vuex-class-decorator';\nimport { getAAsset, isWebPSupported, isHeifSupported } from '@/asset-manager';\nimport { ITextBox } from '@/store/objectTypes/textbox';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport { SceneRenderer } from '@/renderables/scene-renderer';\nimport { DeepReadonly } from '@/util/readonly';\nimport environment from '@/environments/environment';\nimport leftPad from 'left-pad';\nimport eventBus, { ShowMessageEvent } from '../../../eventbus/event-bus';\nimport { screenWidth, screenHeight } from '@/constants/base';\nimport { IObject } from '../../../store/objects';\nimport { INotification } from '../../../store/objectTypes/notification';\nimport { IPoemTextStyle } from '../../../constants/poem';\nimport { IPoem } from '../../../store/objectTypes/poem';\nimport { IChoice, IChoices } from '../../../store/objectTypes/choices';\n\ninterface IPanelButton {\n\tid: string;\n\timage: string;\n\ttext: string;\n}\n\n// tslint:disable: no-magic-numbers\nconst estimateFactor = 1.5;\nconst thumbnailFactor = 1 / 4;\nconst thumbnailQuality = 0.5;\nconst qualityFactor = 100;\n\nconst defaultQuality = 90;\n\nconst qualityWarningThreshold = 70;\n// tslint:enable: no-magic-numbers\n\n@Component({})\nexport default class PanelsPanel extends Mixins(PanelMixin) {\n\tpublic $store!: Store<DeepReadonly<IRootState>>;\n\tprivate vuexHistory!: IHistorySupport;\n\n\t@State('currentPanel', { namespace: 'panels' })\n\tprivate currentPanel!: string;\n\n\tprivate webpSupport = false;\n\tprivate heifSupport = false;\n\tprivate ppi = 0;\n\tprivate pages = '';\n\tprivate format = 'image/png';\n\tprivate quality = defaultQuality;\n\n\tpublic async created() {\n\t\t(window as any).panelsTool = this;\n\n\t\t[this.webpSupport, this.heifSupport] = await Promise.all([\n\t\t\tisWebPSupported(),\n\t\t\tisHeifSupported(),\n\t\t]);\n\t}\n\n\tpublic async mounted() {\n\t\tthis.moveFocusToActivePanel();\n\n\t\tconst sceneRenderer = new SceneRenderer(\n\t\t\tthis.$store,\n\t\t\tthis.currentPanel,\n\t\t\tscreenWidth,\n\t\t\tscreenHeight\n\t\t);\n\n\t\tawait sceneRenderer.render(false);\n\n\t\tconst targetCanvas = document.createElement('canvas');\n\t\ttargetCanvas.width = screenWidth * thumbnailFactor;\n\t\ttargetCanvas.height = screenHeight * thumbnailFactor;\n\n\t\tsceneRenderer.paintOnto(\n\t\t\ttargetCanvas.getContext('2d')!,\n\t\t\t0,\n\t\t\t0,\n\t\t\ttargetCanvas.width,\n\t\t\ttargetCanvas.height\n\t\t);\n\t\ttargetCanvas.toBlob(\n\t\t\tblob => {\n\t\t\t\tif (!blob) return;\n\t\t\t\tconst url = URL.createObjectURL(blob);\n\t\t\t\tthis.vuexHistory.transaction(() => {\n\t\t\t\t\tthis.$store.commit('panels/setPanelPreview', {\n\t\t\t\t\t\tpanelId: this.$store.state.panels.currentPanel,\n\t\t\t\t\t\turl,\n\t\t\t\t\t} as ISetPanelPreviewMutation);\n\t\t\t\t});\n\t\t\t},\n\t\t\t(await isWebPSupported()) ? 'image/webp' : 'image/jpeg',\n\t\t\tthumbnailQuality\n\t\t);\n\t}\n\n\tprivate get isLossy(): boolean {\n\t\treturn this.format !== 'image/png';\n\t}\n\n\tprivate async download() {\n\t\tconst distribution = this.getPanelDistibution();\n\t\tconst date = new Date();\n\t\tconst prefix = `cd-${[\n\t\t\tdate.getFullYear(),\n\t\t\tleftPad(date.getMonth() + 1, 2, '0'),\n\t\t\tleftPad(date.getDate(), 2, '0'),\n\t\t\tleftPad(date.getHours(), 2, '0'),\n\t\t\tleftPad(date.getMinutes(), 2, '0'),\n\t\t\tleftPad(date.getSeconds(), 2, '0'),\n\t\t].join('-')}`;\n\t\tconst extension = this.format.split('/')[1];\n\t\tconst format = this.format;\n\t\tconst quality = this.quality;\n\t\tawait this.renderObjects(\n\t\t\tdistribution,\n\t\t\ttrue,\n\t\t\tasync (imageIdx: number, canvas: HTMLCanvasElement) => {\n\t\t\t\tenvironment.saveToFile(\n\t\t\t\t\tcanvas,\n\t\t\t\t\t`${prefix}_${imageIdx}.${extension}`,\n\t\t\t\t\tformat,\n\t\t\t\t\tquality / qualityFactor\n\t\t\t\t);\n\t\t\t}\n\t\t);\n\t}\n\n\tprivate async estimateExportSize() {\n\t\tconst distribution = this.getPanelDistibution();\n\t\tconst format = this.format || 'image/png';\n\t\tconst quality = this.quality || defaultQuality;\n\t\tconst sizes = await this.renderObjects(\n\t\t\tdistribution,\n\t\t\tfalse,\n\t\t\tasync (imageIdx: number, canvas: HTMLCanvasElement) => {\n\t\t\t\treturn new Promise<number>((resolve, reject) => {\n\t\t\t\t\tcanvas.toBlob(\n\t\t\t\t\t\tblob => {\n\t\t\t\t\t\t\tif (!blob) {\n\t\t\t\t\t\t\t\treject(`Image ${imageIdx + 1} could not be rendered.`);\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tresolve(blob.size);\n\t\t\t\t\t\t},\n\t\t\t\t\t\tformat,\n\t\t\t\t\t\tquality / qualityFactor\n\t\t\t\t\t);\n\t\t\t\t});\n\t\t\t}\n\t\t);\n\t\tconst readableSizes = sizes.map(\n\t\t\tsize => ((size * estimateFactor) / 1024 / 1024).toFixed(2) + 'MiB'\n\t\t);\n\t\tconst filePluralize = readableSizes.length > 1 ? 'files' : 'file';\n\t\tconst itPluralize = readableSizes.length > 1 ? 'These' : 'It';\n\t\tconst sizePluralize = readableSizes.length > 1 ? 'sizes' : 'size';\n\t\teventBus.fire(\n\t\t\tnew ShowMessageEvent(\n\t\t\t\t`This would export ${\n\t\t\t\t\treadableSizes.length\n\t\t\t\t} ${filePluralize}. ${itPluralize} would have the following (aproximate) ${sizePluralize}: ${readableSizes.join(\n\t\t\t\t\t','\n\t\t\t\t)}`\n\t\t\t)\n\t\t);\n\t}\n\n\t@Watch('quality')\n\tprivate warnImageQuality(quality: number, oldQuality: number) {\n\t\tif (quality === qualityFactor) {\n\t\t\teventBus.fire(\n\t\t\t\tnew ShowMessageEvent(\n\t\t\t\t\t'Note: 100% quality on a lossy format is still not lossless! Select PNG if you want lossless compression.'\n\t\t\t\t)\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t\tif (\n\t\t\toldQuality > qualityWarningThreshold &&\n\t\t\tquality <= qualityWarningThreshold\n\t\t) {\n\t\t\teventBus.fire(\n\t\t\t\tnew ShowMessageEvent(\n\t\t\t\t\t'Note: A quality level below 70% might be very noticable and impair legibility of text.'\n\t\t\t\t)\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\t}\n\n\tprivate async renderObjects<T>(\n\t\tdistribution: DeepReadonly<string[][]>,\n\t\thq: boolean,\n\t\tmapper: (imageIdx: number, canvas: HTMLCanvasElement) => Promise<T>\n\t): Promise<T[]> {\n\t\treturn await Promise.all(\n\t\t\tdistribution.map(async (image, imageIdx) => {\n\t\t\t\tconst targetCanvas = document.createElement('canvas');\n\t\t\t\ttargetCanvas.width = screenWidth;\n\t\t\t\ttargetCanvas.height = screenHeight * image.length;\n\t\t\t\tconst context = targetCanvas.getContext('2d')!;\n\n\t\t\t\tawait Promise.all(\n\t\t\t\t\timage.map(async (panelId, panelIdx) => {\n\t\t\t\t\t\tconst sceneRenderer = new SceneRenderer(\n\t\t\t\t\t\t\tthis.$store,\n\t\t\t\t\t\t\timage[panelIdx],\n\t\t\t\t\t\t\tscreenWidth,\n\t\t\t\t\t\t\tscreenHeight\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tawait sceneRenderer.render(hq);\n\n\t\t\t\t\t\tsceneRenderer.paintOnto(\n\t\t\t\t\t\t\tcontext,\n\t\t\t\t\t\t\t0,\n\t\t\t\t\t\t\tscreenHeight * panelIdx,\n\t\t\t\t\t\t\tscreenWidth,\n\t\t\t\t\t\t\tscreenHeight\n\t\t\t\t\t\t);\n\t\t\t\t\t})\n\t\t\t\t);\n\n\t\t\t\treturn await mapper(imageIdx, targetCanvas);\n\t\t\t})\n\t\t);\n\t}\n\n\tprivate get canDeletePanel(): boolean {\n\t\treturn this.panelButtons.length > 1;\n\t}\n\n\tprivate getLimitedPanelList(): DeepReadonly<string[]> {\n\t\tconst max = this.$store.state.panels.panelOrder.length - 1;\n\t\tconst min = 0;\n\t\tconst parts = this.pages.split(',');\n\t\tconst listedPages: number[] = [];\n\t\tlet foundMatch = false;\n\n\t\tfor (const part of parts) {\n\t\t\tconst trimmedPart = part.trim();\n\t\t\tconst match = trimmedPart.match(/^\\s*((\\d+)|(\\d+)\\s*\\-\\s*(\\d+))\\s*$/);\n\t\t\tif (!match) {\n\t\t\t\tif (trimmedPart !== '') {\n\t\t\t\t\teventBus.fire(\n\t\t\t\t\t\tnew ShowMessageEvent(`Could not read '${part}' in the page list.`)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tfoundMatch = true;\n\t\t\t/* tslint:disable:no-magic-numbers */\n\t\t\tif (match[2]) listedPages.push(parseInt(match[2], 10) - 1);\n\t\t\telse {\n\t\t\t\tconst from = Math.max(parseInt(match[3], 10) - 1, min);\n\t\t\t\tconst to = Math.min(parseInt(match[4], 10) - 1, max);\n\t\t\t\tif (from === undefined || to === undefined || from > to) continue;\n\t\t\t\tfor (let i = from; i <= to; ++i) {\n\t\t\t\t\tlistedPages.push(i);\n\t\t\t\t}\n\t\t\t}\n\t\t\t/* tslint:enable:no-magic-numbers */\n\t\t}\n\n\t\tif (!foundMatch) {\n\t\t\treturn this.$store.state.panels.panelOrder;\n\t\t}\n\n\t\treturn listedPages\n\t\t\t.sort((a, b) => a - b)\n\t\t\t.filter((value, idx, ary) => ary[idx - 1] !== value)\n\t\t\t.map(pageIdx => this.$store.state.panels.panelOrder[pageIdx]);\n\t}\n\n\tprivate getPanelDistibution(): DeepReadonly<string[][]> {\n\t\tconst panelOrder = this.getLimitedPanelList();\n\t\tif (this.ppi === 0) return [panelOrder];\n\t\tconst images: string[][] = [];\n\t\tfor (let imageI = 0; imageI < panelOrder.length / this.ppi; ++imageI) {\n\t\t\tconst sliceStart = imageI * this.ppi;\n\t\t\tconst sliceEnd = sliceStart + this.ppi;\n\t\t\timages.push([...panelOrder.slice(sliceStart, sliceEnd)]);\n\t\t}\n\t\treturn images;\n\t}\n\n\tprivate moveFocusToActivePanel() {\n\t\tconst active = this.$el.querySelector('.panel_button.active');\n\t\tif (active) {\n\t\t\tthis.scrollIntoView(active);\n\t\t}\n\t}\n\n\tprivate scrollIntoView(ele: Element) {\n\t\tconst parent = ele.parentElement!;\n\t\tconst idx = Array.from(parent.children).indexOf(ele);\n\t\tif (this.$store.state.ui.vertical) {\n\t\t\tconst scroll =\n\t\t\t\tidx * ele.clientHeight - parent.clientHeight / 2 + ele.clientHeight / 2;\n\t\t\tparent.scrollTop = scroll;\n\t\t\tparent.scrollLeft = 0;\n\t\t} else {\n\t\t\tconst scroll =\n\t\t\t\tidx * ele.clientWidth - parent.clientWidth / 2 + ele.clientWidth / 2;\n\t\t\tparent.scrollLeft = scroll;\n\t\t\tparent.scrollTop = 0;\n\t\t}\n\t}\n\n\tprivate get panelButtons(): IPanelButton[] {\n\t\tconst panelButtons: IPanelButton[] = [];\n\t\tconst panelOrder = this.$store.state.panels.panelOrder;\n\t\treturn panelOrder.map(id => {\n\t\t\tconst panel = this.$store.state.panels.panels[id];\n\t\t\tconst objectOrders = this.$store.state.objects.panels[id];\n\t\t\tconst txtBox = objectOrders\n\t\t\t\t? ([] as string[])\n\t\t\t\t\t\t.concat(objectOrders.order, objectOrders.onTopOrder)\n\t\t\t\t\t\t.map(objId => this.$store.state.objects.objects[objId])\n\t\t\t\t\t\t.map(this.extractObjectText)\n\t\t\t\t: [];\n\t\t\treturn {\n\t\t\t\tid,\n\t\t\t\timage: panel.lastRender,\n\t\t\t\ttext: txtBox.reduce(\n\t\t\t\t\t(acc, current) => (acc.length > current.length ? acc : current),\n\t\t\t\t\t''\n\t\t\t\t),\n\t\t\t} as IPanelButton;\n\t\t});\n\t}\n\n\tprivate extractObjectText(obj: IObject) {\n\t\tswitch (obj.type) {\n\t\t\tcase 'textBox':\n\t\t\t\treturn (obj as ITextBox).text;\n\t\t\tcase 'notification':\n\t\t\t\treturn (obj as INotification).text;\n\t\t\tcase 'poem':\n\t\t\t\treturn (obj as IPoem).text;\n\t\t\tcase 'choice':\n\t\t\t\treturn (obj as IChoices).choices\n\t\t\t\t\t.map(choice => `[${choice.text}]`)\n\t\t\t\t\t.join('\\n');\n\t\t}\n\t\treturn '';\n\t}\n\n\tprivate async addNewPanel() {\n\t\tawait this.vuexHistory.transaction(async () => {\n\t\t\tthis.$store.dispatch('panels/duplicatePanel', {\n\t\t\t\tpanelId: this.$store.state.panels.currentPanel,\n\t\t\t} as IDuplicatePanelAction);\n\t\t});\n\t\tthis.$nextTick(() => {\n\t\t\tthis.moveFocusToActivePanel();\n\t\t});\n\t}\n\n\tprivate updateCurrentPanel(panelId: string) {\n\t\tthis.vuexHistory.transaction(async () => {\n\t\t\tthis.$store.commit('panels/setCurrentPanel', {\n\t\t\t\tpanelId,\n\t\t\t} as ISetCurrentPanelMutation);\n\t\t});\n\t\tthis.$nextTick(() => {\n\t\t\tthis.moveFocusToActivePanel();\n\t\t});\n\t}\n\n\tprivate deletePanel() {\n\t\tthis.vuexHistory.transaction(async () => {\n\t\t\tthis.$store.dispatch('panels/delete', {\n\t\t\t\tpanelId: this.$store.state.panels.currentPanel,\n\t\t\t} as IDeletePanelAction);\n\t\t});\n\t\tthis.$nextTick(() => {\n\t\t\tthis.moveFocusToActivePanel();\n\t\t});\n\t}\n\n\tprivate moveAhead() {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('panels/move', {\n\t\t\t\tpanelId: this.currentPanel,\n\t\t\t\tdelta: -1,\n\t\t\t} as IMovePanelAction);\n\t\t});\n\t}\n\n\tprivate get canMoveAhead(): boolean {\n\t\tconst panelOrder = this.$store.state.panels.panelOrder;\n\t\tconst idx = panelOrder.indexOf(this.currentPanel);\n\t\treturn idx > 0;\n\t}\n\n\tprivate moveBehind() {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.dispatch('panels/move', {\n\t\t\t\tpanelId: this.currentPanel,\n\t\t\t\tdelta: 1,\n\t\t\t} as IMovePanelAction);\n\t\t});\n\t}\n\n\tprivate get canMoveBehind(): boolean {\n\t\tconst panelOrder = this.$store.state.panels.panelOrder;\n\t\tconst idx = panelOrder.indexOf(this.currentPanel);\n\t\treturn idx < panelOrder.length - 1;\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./panels.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./panels.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./panels.vue?vue&type=template&id=dcf771d0&scoped=true&\"\nimport script from \"./panels.vue?vue&type=script&lang=ts&\"\nexport * from \"./panels.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./panels.vue?vue&type=style&index=0&id=dcf771d0&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"dcf771d0\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\"},[_c('h1',[_vm._v(\"Notification\")]),(_vm.textEditor)?_c('text-editor',{attrs:{\"title\":\"Notification Text\"},on:{\"leave\":function($event){_vm.textEditor = false}},model:{value:(_vm.text),callback:function ($$v) {_vm.text=$$v},expression:\"text\"}}):[_c('div',{attrs:{\"id\":\"notification_text\"}},[_c('label',{attrs:{\"for\":\"notification_text\"}},[_vm._v(\"Text:\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"}],attrs:{\"id\":\"notification_text\"},domProps:{\"value\":(_vm.text)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.text=$event.target.value}}}),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){_vm.textEditor = true}}},[_vm._v(\"Formatting\")])]),_c('position-and-size',{attrs:{\"obj\":_vm.sprite}}),_c('toggle',{attrs:{\"label\":\"Auto line wrap?\"},model:{value:(_vm.autoWrap),callback:function ($$v) {_vm.autoWrap=$$v},expression:\"autoWrap\"}}),_c('layers',{attrs:{\"obj\":_vm.sprite}}),_c('opacity',{attrs:{\"obj\":_vm.sprite}}),_c('toggle',{attrs:{\"label\":\"Flip?\"},model:{value:(_vm.flip),callback:function ($$v) {_vm.flip=$$v},expression:\"flip\"}}),_c('toggle',{attrs:{\"label\":\"Show backdrop?\"},model:{value:(_vm.renderBackdrop),callback:function ($$v) {_vm.renderBackdrop=$$v},expression:\"renderBackdrop\"}}),_c('delete',{attrs:{\"obj\":_vm.sprite}})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Mixins } from 'vue-property-decorator';\nimport { isWebPSupported } from '@/asset-manager';\nimport { Character } from '@/renderables/character';\nimport Toggle from '@/components/toggle.vue';\nimport PositionAndSize from '@/components/toolbox/commonsFieldsets/positionAndSize.vue';\nimport Layers from '@/components/toolbox/commonsFieldsets/layers.vue';\nimport Opacity from '@/components/toolbox/commonsFieldsets/opacity.vue';\nimport Delete from '@/components/toolbox/commonsFieldsets/delete.vue';\nimport { IRenderable } from '@/renderables/renderable';\nimport { Sprite } from '@/renderables/sprite';\nimport { ISprite } from '@/store/objectTypes/sprite';\nimport { ICommand } from '@/eventbus/command';\nimport eventBus from '@/eventbus/event-bus';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport {\n\tIObjectSetOnTopAction,\n\tISetObjectFlipMutation,\n\tISetObjectPositionMutation,\n\tISetObjectOpacityMutation,\n\tIObjectShiftLayerAction,\n} from '@/store/objects';\nimport { PanelMixin } from './panelMixin';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport {\n\tIChoices,\n\tIRemoveChoiceAction,\n} from '../../../store/objectTypes/choices';\nimport {\n\tIChoice,\n\tIAddChoiceAction,\n\tISetChoiceTextAction,\n} from '../../../store/objectTypes/choices';\nimport { DeepReadonly } from '../../../util/readonly';\nimport TextEditor from '../subpanels/text/text.vue';\nimport {\n\tINotification,\n\tISetNotificationTextMutation,\n\tISetNotificationBackdropMutation,\n} from '../../../store/objectTypes/notification';\nimport { ISetAutoWrappingMutation } from '../../../store/objectTypes/textbox';\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t\tPositionAndSize,\n\t\tLayers,\n\t\tOpacity,\n\t\tDelete,\n\t\tTextEditor,\n\t},\n})\nexport default class NotificationPanel extends Mixins(PanelMixin) {\n\tpublic $store!: Store<IRootState>;\n\n\tprivate vuexHistory!: IHistorySupport;\n\tprivate textEditor: boolean = false;\n\n\tprivate get sprite(): INotification {\n\t\tconst obj = this.$store.state.objects.objects[\n\t\t\tthis.$store.state.ui.selection!\n\t\t];\n\t\tif (obj.type !== 'notification') return undefined!;\n\t\treturn obj as INotification;\n\t}\n\n\tprivate get flip() {\n\t\treturn this.sprite.flip;\n\t}\n\n\tprivate set flip(newValue: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setFlip', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\tflip: newValue,\n\t\t\t} as ISetObjectFlipMutation);\n\t\t});\n\t}\n\n\tprivate get autoWrap(): boolean {\n\t\treturn this.sprite.autoWrap;\n\t}\n\n\tprivate set autoWrap(autoWrap: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setAutoWrapping', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\tautoWrap,\n\t\t\t} as ISetAutoWrappingMutation);\n\t\t});\n\t}\n\n\tprivate get text() {\n\t\treturn this.sprite.text;\n\t}\n\n\tprivate set text(newValue: string) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setNotificationText', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\ttext: newValue,\n\t\t\t} as ISetNotificationTextMutation);\n\t\t});\n\t}\n\n\tprivate get renderBackdrop() {\n\t\treturn this.sprite.backdrop;\n\t}\n\n\tprivate set renderBackdrop(newValue: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setNotificationBackdrop', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\tbackdrop: newValue,\n\t\t\t} as ISetNotificationBackdropMutation);\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./notification.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./notification.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./notification.vue?vue&type=template&id=efac3e1e&scoped=true&\"\nimport script from \"./notification.vue?vue&type=script&lang=ts&\"\nexport * from \"./notification.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./notification.vue?vue&type=style&index=0&id=efac3e1e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"efac3e1e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"panel\"},[_c('h1',[_vm._v(_vm._s(_vm.sprite.subType === 'poem' ? 'Poem' : 'Console'))]),(_vm.textEditor)?_c('text-editor',{attrs:{\"title\":\"Poem Text\"},on:{\"leave\":function($event){_vm.textEditor = false}},model:{value:(_vm.text),callback:function ($$v) {_vm.text=$$v},expression:\"text\"}}):[_c('div',{attrs:{\"id\":\"notification_text\"}},[_c('label',{attrs:{\"for\":\"notification_text\"}},[_vm._v(\"Text:\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"}],attrs:{\"id\":\"notification_text\"},domProps:{\"value\":(_vm.text)},on:{\"keydown\":function($event){$event.stopPropagation();},\"input\":function($event){if($event.target.composing){ return; }_vm.text=$event.target.value}}}),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){_vm.textEditor = true}}},[_vm._v(\"Formatting\")])]),_c('toggle',{attrs:{\"label\":\"Auto line wrap?\"},model:{value:(_vm.autoWrap),callback:function ($$v) {_vm.autoWrap=$$v},expression:\"autoWrap\"}}),(_vm.sprite.subType === 'poem')?[_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.poemBackground),expression:\"poemBackground\"}],on:{\"keydown\":function($event){$event.stopPropagation();},\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.poemBackground=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.backgrounds),function(background,idx){return _c('option',{key:idx,domProps:{\"value\":idx}},[_vm._v(_vm._s(background.name))])}),0),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.poemStyle),expression:\"poemStyle\"}],on:{\"keydown\":function($event){$event.stopPropagation();},\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.poemStyle=$event.target.multiple ? $$selectedVal : $$selectedVal[0]}}},_vm._l((_vm.poemTextStyles),function(style,idx){return _c('option',{key:idx,domProps:{\"value\":idx}},[_vm._v(_vm._s(style.name))])}),0)]:_vm._e(),_c('position-and-size',{attrs:{\"obj\":_vm.sprite}}),_c('layers',{attrs:{\"obj\":_vm.sprite}}),_c('opacity',{attrs:{\"obj\":_vm.sprite}}),_c('toggle',{attrs:{\"label\":\"Flip?\"},model:{value:(_vm.flip),callback:function ($$v) {_vm.flip=$$v},expression:\"flip\"}}),_c('delete',{attrs:{\"obj\":_vm.sprite}})]],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Mixins } from 'vue-property-decorator';\nimport { isWebPSupported } from '@/asset-manager';\nimport { Character } from '@/renderables/character';\nimport Toggle from '@/components/toggle.vue';\nimport PositionAndSize from '@/components/toolbox/commonsFieldsets/positionAndSize.vue';\nimport Layers from '@/components/toolbox/commonsFieldsets/layers.vue';\nimport Opacity from '@/components/toolbox/commonsFieldsets/opacity.vue';\nimport Delete from '@/components/toolbox/commonsFieldsets/delete.vue';\nimport { IRenderable } from '@/renderables/renderable';\nimport { Sprite } from '@/renderables/sprite';\nimport { ISprite } from '@/store/objectTypes/sprite';\nimport { ICommand } from '@/eventbus/command';\nimport eventBus from '@/eventbus/event-bus';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport {\n\tIObjectSetOnTopAction,\n\tISetObjectFlipMutation,\n\tISetObjectPositionMutation,\n\tISetObjectOpacityMutation,\n\tIObjectShiftLayerAction,\n} from '@/store/objects';\nimport { PanelMixin } from './panelMixin';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport { DeepReadonly } from '@/util/readonly';\nimport TextEditor from '../subpanels/text/text.vue';\nimport {\n\tIPoem,\n\tISetBackgroundMutation,\n\tISetFontMutation,\n\tISetTextMutation,\n} from '@/store/objectTypes/poem';\nimport {\n\tpoemBackgrounds,\n\tpoemTextStyles,\n\tIPoemTextStyle,\n} from '../../../constants/poem';\nimport { ISetAutoWrappingMutation } from '../../../store/objectTypes/textbox';\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t\tPositionAndSize,\n\t\tLayers,\n\t\tOpacity,\n\t\tDelete,\n\t\tTextEditor,\n\t},\n})\nexport default class PoemPanel extends Mixins(PanelMixin) {\n\tpublic $store!: Store<IRootState>;\n\n\tprivate vuexHistory!: IHistorySupport;\n\tprivate textEditor: boolean = false;\n\n\tprivate get backgrounds(): Array<{ name: string; file: string }> {\n\t\treturn poemBackgrounds;\n\t}\n\n\tprivate get poemTextStyles(): IPoemTextStyle[] {\n\t\treturn poemTextStyles;\n\t}\n\n\tprivate get sprite(): IPoem {\n\t\tconst obj = this.$store.state.objects.objects[\n\t\t\tthis.$store.state.ui.selection!\n\t\t];\n\t\tif (obj.type !== 'poem') return undefined!;\n\t\treturn obj as IPoem;\n\t}\n\n\tprivate get flip() {\n\t\treturn this.sprite.flip;\n\t}\n\n\tprivate set flip(newValue: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setFlip', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\tflip: newValue,\n\t\t\t} as ISetObjectFlipMutation);\n\t\t});\n\t}\n\n\tprivate get text() {\n\t\treturn this.sprite.text;\n\t}\n\n\tprivate set text(newValue: string) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setPoemText', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\ttext: newValue,\n\t\t\t} as ISetTextMutation);\n\t\t});\n\t}\n\n\tprivate get autoWrap(): boolean {\n\t\treturn this.sprite.autoWrap;\n\t}\n\n\tprivate set autoWrap(autoWrap: boolean) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setAutoWrapping', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\tautoWrap,\n\t\t\t} as ISetAutoWrappingMutation);\n\t\t});\n\t}\n\n\tprivate get poemStyle() {\n\t\treturn this.sprite.font;\n\t}\n\n\tprivate set poemStyle(newValue: number) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setPoemFont', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\tfont: newValue,\n\t\t\t} as ISetFontMutation);\n\t\t});\n\t}\n\n\tprivate get poemBackground() {\n\t\treturn this.sprite.background;\n\t}\n\n\tprivate set poemBackground(newValue: number) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tthis.$store.commit('objects/setPoemBackground', {\n\t\t\t\tid: this.sprite.id,\n\t\t\t\tbackground: newValue,\n\t\t\t} as ISetBackgroundMutation);\n\t\t});\n\t}\n}\n","import mod from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./poem.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../../node_modules/thread-loader/dist/cjs.js!../../../../node_modules/babel-loader/lib/index.js!../../../../node_modules/ts-loader/index.js??ref--13-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./poem.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./poem.vue?vue&type=template&id=2ac7befd&scoped=true&\"\nimport script from \"./poem.vue?vue&type=script&lang=ts&\"\nexport * from \"./poem.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./poem.vue?vue&type=style&index=0&id=2ac7befd&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2ac7befd\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// App.vue has currently so many responsiblities that it's best to break it into chunks\n// tslint:disable:member-ordering\nimport { Component, Vue, Watch, Prop } from 'vue-property-decorator';\nimport { State } from 'vuex-class-decorator';\n\nimport SettingsPanel from './panels/settings.vue';\nimport AddPanel from './panels/add.vue';\nimport CharacterPanel from './panels/character.vue';\nimport SpritePanel from './panels/sprite.vue';\nimport TextBoxPanel from './panels/textbox.vue';\nimport ChoicePanel from './panels/choice.vue';\nimport CreditsPanel from './panels/credits.vue';\nimport BackgroundsPanel from './panels/backgrounds.vue';\nimport ContentPacksPanel from './panels/content-pack.vue';\nimport PanelsPanel from './panels/panels.vue';\nimport NotificationPanel from './panels/notification.vue';\nimport PoemPanel from './panels/poem.vue';\nimport { IObject } from '@/store/objects';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport environment from '@/environments/environment';\n\ntype PanelNames =\n\t| 'add'\n\t| 'backgrounds'\n\t| 'help_credits'\n\t| 'selection'\n\t| 'packs'\n\t| 'settings'\n\t| 'panels'\n\t| 'notification'\n\t| 'poem';\n\n@Component({\n\tcomponents: {\n\t\tSettingsPanel,\n\t\tAddPanel,\n\t\tBackgroundsPanel,\n\t\tCreditsPanel,\n\t\tCharacterPanel,\n\t\tTextBoxPanel,\n\t\tChoicePanel,\n\t\tSpritePanel,\n\t\tContentPacksPanel,\n\t\tPanelsPanel,\n\t\tNotificationPanel,\n\t\tPoemPanel,\n\t},\n})\nexport default class ToolBox extends Vue {\n\tpublic $store!: Store<IRootState>;\n\n\t@State('vertical', { namespace: 'ui' }) private readonly vertical!: boolean;\n\n\tprivate create() {\n\t\tenvironment.onPanelChange((panel: string) => {\n\t\t\tthis.panelSelection = panel as PanelNames;\n\t\t});\n\t}\n\n\tprivate get selection(): string | null {\n\t\treturn this.$store.state.ui.selection;\n\t}\n\n\tprivate panelSelection: PanelNames = 'add';\n\n\tprivate get panel() {\n\t\tif (this.panelSelection === 'selection') {\n\t\t\tif (this.selection === null) {\n\t\t\t\tthis.panelSelection = 'add';\n\t\t\t} else {\n\t\t\t\tconst obj = this.$store.state.objects.objects[this.selection];\n\t\t\t\treturn obj.type;\n\t\t\t}\n\t\t}\n\t\treturn this.panelSelection;\n\t}\n\n\tprivate get hasPrevRender(): boolean {\n\t\treturn this.$store.state.ui.lastDownload !== null;\n\t}\n\n\tprivate setPanel(name: PanelNames) {\n\t\tif (name === this.panelSelection) name = 'add';\n\t\tthis.panelSelection = name;\n\t\tif (this.selection) {\n\t\t\tif (this.$store.state.ui.selection === null) return;\n\t\t\tthis.$store.commit('ui/setSelection', null);\n\t\t}\n\t}\n\n\t@Watch('selection')\n\tprivate onSelectionChange(newSelection: IObject | null) {\n\t\tif (newSelection) {\n\t\t\tthis.panelSelection = 'selection';\n\t\t\treturn;\n\t\t}\n\t\tif (this.panelSelection === 'selection') {\n\t\t\tthis.panelSelection = 'add';\n\t\t}\n\t}\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toolbox.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./toolbox.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./toolbox.vue?vue&type=template&id=360c9364&\"\nimport script from \"./toolbox.vue?vue&type=script&lang=ts&\"\nexport * from \"./toolbox.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./toolbox.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ vertical: _vm.vertical },attrs:{\"id\":\"messageConsole\"}},[(_vm.showLoading)?_c('p',[_vm._v(\"Loading...\")]):_vm._e(),_vm._l((_vm.messages),function(message,i){return _c('p',{key:message + '_' + i},[_vm._v(_vm._s(message))])})],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\nimport { State } from 'vuex-class-decorator';\nimport EventBus, {\n\tAssetFailureEvent,\n\tCustomAssetFailureEvent,\n\tShowMessageEvent,\n\tVueErrorEvent,\n} from '@/eventbus/event-bus';\n\nconst shortHidingTime = 5000;\nconst longHidingTime = 20000;\n\nconst hideShowTimeouts = 100;\n\n@Component({\n\tcomponents: {},\n})\nexport default class MessageConsole extends Vue {\n\t@Prop({ default: false, type: Boolean }) private readonly loading!: boolean;\n\n\t@State('vertical', { namespace: 'ui' }) private readonly vertical!: boolean;\n\tprivate messages: string[] = [];\n\tprivate showLoading: boolean = false;\n\tprivate showLoadingTimeout: number = 0;\n\tprivate hideLoadingTimeout: number = 0;\n\n\tprivate created() {\n\t\tthis.onLoadingChange(this.loading);\n\t\tEventBus.subscribe(AssetFailureEvent, ev => {\n\t\t\tthis.messages.push(`Failed to load asset '${ev.path}'`);\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.messages.shift();\n\t\t\t}, shortHidingTime);\n\t\t});\n\n\t\tEventBus.subscribe(CustomAssetFailureEvent, ev => {\n\t\t\tthis.messages.push(\n\t\t\t\t'Failed to load custom asset. Try to download it manually and then upload it.'\n\t\t\t);\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.messages.shift();\n\t\t\t}, longHidingTime);\n\t\t});\n\n\t\tEventBus.subscribe(ShowMessageEvent, ev => {\n\t\t\tthis.messages.push(ev.message);\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.messages.shift();\n\t\t\t}, longHidingTime);\n\t\t});\n\n\t\tEventBus.subscribe(VueErrorEvent, ev => {\n\t\t\tthis.messages.push(ev.error.name);\n\t\t\tthis.messages.push(JSON.stringify(ev.error.stack));\n\t\t\tthis.messages.push(ev.info);\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.messages.shift();\n\t\t\t\tthis.messages.shift();\n\t\t\t\tthis.messages.shift();\n\t\t\t}, longHidingTime);\n\t\t});\n\t}\n\n\t@Watch('loading')\n\tprivate onLoadingChange(newValue: boolean) {\n\t\tif (newValue) {\n\t\t\tif (this.hideLoadingTimeout) {\n\t\t\t\tclearTimeout(this.hideLoadingTimeout);\n\t\t\t\tthis.hideLoadingTimeout = 0;\n\t\t\t}\n\t\t\tif (!this.showLoading && !this.showLoadingTimeout) {\n\t\t\t\tthis.showLoadingTimeout = setTimeout(() => {\n\t\t\t\t\tthis.showLoading = true;\n\t\t\t\t\tthis.showLoadingTimeout = 0;\n\t\t\t\t}, hideShowTimeouts);\n\t\t\t}\n\t\t} else {\n\t\t\tif (this.showLoadingTimeout) {\n\t\t\t\tclearTimeout(this.showLoadingTimeout);\n\t\t\t\tthis.showLoadingTimeout = 0;\n\t\t\t}\n\t\t\tif (this.showLoading && !this.hideLoadingTimeout) {\n\t\t\t\tthis.hideLoadingTimeout = setTimeout(() => {\n\t\t\t\t\tthis.showLoading = false;\n\t\t\t\t\tthis.hideLoadingTimeout = 0;\n\t\t\t\t}, hideShowTimeouts);\n\t\t\t}\n\t\t}\n\t}\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./message-console.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./message-console.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./message-console.vue?vue&type=template&id=449eca3e&scoped=true&\"\nimport script from \"./message-console.vue?vue&type=script&lang=ts&\"\nexport * from \"./message-console.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./message-console.vue?vue&type=style&index=0&id=449eca3e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"449eca3e\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('canvas',{ref:\"sd\",style:({ width: _vm.canvasWidth + 'px', height: _vm.canvasHeight + 'px' }),attrs:{\"id\":\"scaled_display\",\"height\":_vm.bitmapHeight,\"width\":_vm.bitmapWidth,\"draggable\":\"\"},on:{\"click\":_vm.onUiClick,\"touchstart\":_vm.onTouchStart,\"dragstart\":_vm.onDragStart,\"touchmove\":_vm.onSpriteDragMove,\"mousemove\":_vm.onSpriteDragMove,\"touchend\":_vm.onSpriteDrop,\"mouseup\":_vm.onSpriteDrop,\"dragover\":_vm.onDragOver,\"drop\":_vm.onDrop,\"mouseenter\":_vm.onMouseEnter}},[_vm._v(\"HTML5 is required to use the Doki Doki Dialog Generator.\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// App.vue has currently so many responsiblities that it's best to break it into chunks\n// tslint:disable:member-ordering\nimport { Component, Vue, Watch, Prop } from 'vue-property-decorator';\nimport { State } from 'vuex-class-decorator';\nimport { Store, MutationPayload } from 'vuex';\nimport { IRootState } from '@/store';\nimport { Renderer } from '@/renderer/renderer';\nimport { IRenderable } from '@/renderables/renderable';\nimport { color, Background } from '@/renderables/background';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport { RenderContext } from '@/renderer/rendererContext';\nimport { getAsset, registerAsset } from '@/asset-manager';\nimport eventBus, { InvalidateRenderEvent } from '@/eventbus/event-bus';\nimport { ICreateTextBoxAction, ITextBox } from '@/store/objectTypes/textbox';\nimport {\n\tIObject,\n\tISetObjectPositionMutation,\n\tIRemoveObjectAction,\n\tIObjectsState,\n} from '@/store/objects';\nimport { ICreateSpriteAction, ISprite } from '@/store/objectTypes/sprite';\nimport { Character } from '@/renderables/character';\nimport {\n\tIShiftCharacterSlotAction,\n\tICharacter,\n} from '@/store/objectTypes/characters';\nimport { Sprite } from '@/renderables/sprite';\nimport { TextBox } from '@/renderables/textbox';\nimport { ISetCurrentMutation, IPanel } from '@/store/panels';\nimport content from '@/store/content';\nimport { SceneRenderer } from '../renderables/scene-renderer';\nimport { DeepReadonly } from '../util/readonly';\nimport { screenHeight, screenWidth } from '@/constants/base';\n\n@Component({})\nexport default class Render extends Vue {\n\tpublic $store!: Store<DeepReadonly<IRootState>>;\n\n\tprivate sdCtx: CanvasRenderingContext2D | undefined;\n\n\tprivate get selection(): string | null {\n\t\treturn this.$store.state.ui.selection;\n\t}\n\n\tprivate currentlyRendering: boolean = false;\n\n\tprivate queuedRender: number | null = null;\n\tprivate showingLast: boolean = false;\n\n\tprivate dropSpriteCount = 0;\n\tprivate dropPreventClick = false;\n\n\t@Prop({ type: Number, default: 0 }) private readonly canvasWidth!: number;\n\t@Prop({ type: Number, default: 0 }) private readonly canvasHeight!: number;\n\n\t@State('lqRendering', { namespace: 'ui' })\n\tprivate readonly lqRendering!: boolean;\n\n\tprivate vuexHistory!: IHistorySupport;\n\n\tprivate get sceneRender() {\n\t\treturn new SceneRenderer(\n\t\t\tthis.$store,\n\t\t\tthis.$store.state.panels.currentPanel,\n\t\t\tthis.bitmapWidth,\n\t\t\tthis.bitmapHeight\n\t\t);\n\t}\n\n\tprivate get bitmapHeight(): number {\n\t\treturn screenHeight;\n\t}\n\tprivate get bitmapWidth(): number {\n\t\treturn screenWidth;\n\t}\n\n\tpublic async blendOver(imageUrl: string): Promise<void> {}\n\n\tpublic async download(): Promise<void> {\n\t\tconst url = await this.sceneRender.download();\n\n\t\tthis.vuexHistory.transaction(async () => {\n\t\t\tconst oldUrl = this.$store.state.ui.lastDownload;\n\n\t\t\tthis.$store.commit('ui/setLastDownload', url);\n\t\t\tif (oldUrl) {\n\t\t\t\tURL.revokeObjectURL(oldUrl);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate invalidateRender() {\n\t\tif (this.queuedRender) return;\n\t\tthis.queuedRender = requestAnimationFrame(() => this.render_());\n\t}\n\n\tprivate async render_(): Promise<void> {\n\t\tif (this.queuedRender) {\n\t\t\tcancelAnimationFrame(this.queuedRender);\n\t\t\tthis.queuedRender = null;\n\t\t}\n\n\t\tif (this.$store.state.unsafe) return;\n\n\t\tawait this.sceneRender.render(!this.lqRendering);\n\t\tthis.display();\n\t}\n\n\tprivate async created(): Promise<void> {\n\t\teventBus.subscribe(InvalidateRenderEvent, command => this.invalidateRender);\n\t\tthis.$store.subscribe((mut: MutationPayload) => {\n\t\t\tif (mut.type === 'panels/setPanelPreview') return;\n\t\t\tif (mut.type === 'panels/currentPanel') return;\n\t\t\tthis.invalidateRender();\n\t\t});\n\t}\n\n\tprivate mounted(): void {\n\t\tconst sd = this.$refs.sd as HTMLCanvasElement;\n\t\tthis.sdCtx = sd.getContext('2d') || undefined;\n\n\t\tthis.renderLoadingScreen();\n\t\tthis.invalidateRender();\n\t}\n\n\tprivate renderLoadingScreen() {\n\t\tif (!this.sdCtx) return;\n\t\tconst loadingScreen = document.createElement('canvas');\n\t\tloadingScreen.height = this.bitmapHeight;\n\t\tloadingScreen.width = this.bitmapWidth;\n\t\tconst rctx = new RenderContext(\n\t\t\tloadingScreen.getContext('2d')!,\n\t\t\ttrue,\n\t\t\tfalse\n\t\t);\n\t\trctx.drawText({\n\t\t\ttext: 'Starting...',\n\t\t\tx: loadingScreen.width / 2,\n\t\t\ty: loadingScreen.height / 2,\n\t\t\talign: 'center',\n\t\t\toutline: {\n\t\t\t\twidth: 5,\n\t\t\t\tstyle: '#b59',\n\t\t\t},\n\t\t\tfont: '32px riffic',\n\t\t\tfill: {\n\t\t\t\tstyle: 'white',\n\t\t\t},\n\t\t});\n\t\tthis.sdCtx!.drawImage(loadingScreen, this.canvasWidth, this.canvasHeight);\n\t}\n\n\t@Watch('canvasWidth')\n\t@Watch('canvasHeight')\n\tprivate display(): void {\n\t\tif (!this.sdCtx) return;\n\t\tthis.showingLast = false;\n\t\tthis.sceneRender.paintOnto(\n\t\t\tthis.sdCtx,\n\t\t\t0,\n\t\t\t0,\n\t\t\tthis.bitmapWidth,\n\t\t\tthis.bitmapHeight\n\t\t);\n\t}\n\n\tprivate toRendererCoordinate(x: number, y: number): [number, number] {\n\t\tconst sd = this.$refs.sd as HTMLCanvasElement;\n\t\tconst rx = x - sd.offsetLeft;\n\t\tconst ry = y - sd.offsetTop;\n\t\tconst sx = (rx / sd.offsetWidth) * sd.width;\n\t\tconst sy = (ry / sd.offsetWidth) * sd.width;\n\t\treturn [sx, sy];\n\t}\n\n\tprivate onUiClick(e: MouseEvent): void {\n\t\tif (this.dropPreventClick) {\n\t\t\tthis.dropPreventClick = false;\n\t\t\treturn;\n\t\t}\n\n\t\tconst [sx, sy] = this.toRendererCoordinate(e.clientX, e.clientY);\n\n\t\tconst objects = this.sceneRender.objectsAt(sx, sy);\n\n\t\tconst currentObjectIdx = objects.findIndex(id => id === this.selection);\n\t\tlet selectedObject: string | null;\n\n\t\tif (currentObjectIdx === 0) {\n\t\t\tselectedObject = null;\n\t\t} else if (currentObjectIdx !== -1) {\n\t\t\t// Select the next lower character\n\t\t\tselectedObject = objects[currentObjectIdx - 1];\n\t\t} else {\n\t\t\tselectedObject = objects[objects.length - 1] || null;\n\t\t}\n\n\t\tif (this.$store.state.ui.selection === selectedObject) return;\n\t\tthis.$store.commit('ui/setSelection', selectedObject);\n\t}\n\n\tprivate draggedObject: IObject | null = null;\n\tprivate dragXOffset: number = 0;\n\tprivate dragYOffset: number = 0;\n\tprivate dragXOriginal: number = 0;\n\tprivate dragYOriginal: number = 0;\n\n\tprivate onDragStart(e: DragEvent) {\n\t\te.preventDefault();\n\t\tif (!this.selection) return;\n\t\tthis.draggedObject = this.$store.state.objects.objects[this.selection];\n\t\tconst [x, y] = this.toRendererCoordinate(e.clientX, e.clientY);\n\t\tthis.dragXOffset = x - this.draggedObject.x;\n\t\tthis.dragYOffset = y - this.draggedObject.y;\n\t\tthis.dragXOriginal = this.draggedObject.x;\n\t\tthis.dragYOriginal = this.draggedObject.y;\n\t}\n\n\tprivate onTouchStart(e: TouchEvent) {\n\t\tif (!this.selection) return;\n\t\tthis.draggedObject = this.$store.state.objects.objects[this.selection];\n\t\tconst [x, y] = this.toRendererCoordinate(\n\t\t\te.touches[0].clientX,\n\t\t\te.touches[0].clientY\n\t\t);\n\t\tthis.dragXOffset = x - this.draggedObject.x;\n\t\tthis.dragYOffset = y - this.draggedObject.y;\n\t\tthis.dragXOriginal = this.draggedObject.x;\n\t\tthis.dragYOriginal = this.draggedObject.y;\n\t}\n\n\tprivate onDragOver(e: DragEvent) {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t\te.dataTransfer!.dropEffect = 'copy';\n\t}\n\n\tprivate onSpriteDragMove(e: MouseEvent | TouchEvent) {\n\t\tif (this.draggedObject) {\n\t\t\te.preventDefault();\n\n\t\t\t// Formatter quirk\n\t\t\t// tslint:disable:indent\n\t\t\tlet [x, y] =\n\t\t\t\te instanceof MouseEvent\n\t\t\t\t\t? this.toRendererCoordinate(e.clientX, e.clientY)\n\t\t\t\t\t: this.toRendererCoordinate(\n\t\t\t\t\t\t\te.touches[0].clientX,\n\t\t\t\t\t\t\te.touches[0].clientY\n\t\t\t\t\t  );\n\t\t\t// tslint:enable:indent\n\t\t\tx -= this.dragXOffset;\n\t\t\ty -= this.dragYOffset;\n\n\t\t\tconst deltaX = Math.abs(x - this.dragXOriginal);\n\t\t\tconst deltaY = Math.abs(y - this.dragYOriginal);\n\n\t\t\tif (deltaX + deltaY > 1) this.dropPreventClick = true;\n\n\t\t\tif (e.shiftKey) {\n\t\t\t\tif (deltaX > deltaY) {\n\t\t\t\t\ty = this.dragYOriginal;\n\t\t\t\t} else {\n\t\t\t\t\tx = this.dragXOriginal;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.vuexHistory.transaction(() => {\n\t\t\t\tthis.$store.dispatch('objects/setPosition', {\n\t\t\t\t\tid: this.draggedObject!.id,\n\t\t\t\t\tx,\n\t\t\t\t\ty,\n\t\t\t\t} as ISetObjectPositionMutation);\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate async onDrop(e: DragEvent) {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\n\t\tif (!e.dataTransfer) return;\n\n\t\tfor (const item of e.dataTransfer.items) {\n\t\t\tif (item.kind === 'file' && item.type.match(/image.*/)) {\n\t\t\t\tconst name = 'dropCustomAsset' + ++this.dropSpriteCount;\n\t\t\t\tconst url = registerAsset(name, item.getAsFile()!);\n\n\t\t\t\tthis.vuexHistory.transaction(async () => {\n\t\t\t\t\tawait this.$store.dispatch('objects/createSprite', {\n\t\t\t\t\t\tassets: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\thq: url,\n\t\t\t\t\t\t\t\tlq: url,\n\t\t\t\t\t\t\t\tsourcePack: 'dddg.generated.uploaded-sprites',\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t],\n\t\t\t\t\t} as ICreateSpriteAction);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onSpriteDrop(e: MouseEvent | TouchEvent) {\n\t\tif (this.draggedObject) {\n\t\t\tif ('TouchEvent' in window && e instanceof TouchEvent) {\n\t\t\t\tthis.dropPreventClick = false;\n\t\t\t}\n\t\t\tthis.draggedObject = null;\n\t\t}\n\t}\n\n\tprivate onMouseEnter(e: MouseEvent) {\n\t\tif (e.buttons !== 1) {\n\t\t\tthis.draggedObject = null;\n\t\t}\n\t}\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./render.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./render.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./render.vue?vue&type=template&id=40448178&\"\nimport script from \"./render.vue?vue&type=script&lang=ts&\"\nexport * from \"./render.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"dialog-wrapper\",on:{\"click\":function($event){return _vm.$emit('leave')}}},[_c('dialog',{attrs:{\"open\":\"\"},on:{\"click\":function($event){$event.stopPropagation();}}},[_vm._t(\"default\")],2)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\nimport { Component, Prop, Vue } from 'vue-property-decorator';\n\n@Component({})\nexport default class ModalDialog extends Vue {}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalDialog.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalDialog.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./ModalDialog.vue?vue&type=template&id=18f0bcd0&scoped=true&\"\nimport script from \"./ModalDialog.vue?vue&type=script&lang=ts&\"\nexport * from \"./ModalDialog.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./ModalDialog.vue?vue&type=style&index=0&id=18f0bcd0&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"18f0bcd0\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// App.vue has currently so many responsiblities that it's best to break it into chunks\nimport { Component, Vue } from 'vue-property-decorator';\nimport { State } from 'vuex-class-decorator';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport { IRenderable } from '@/renderables/renderable';\nimport { IHistorySupport } from '@/plugins/vuex-history';\nimport { ICreateTextBoxAction } from '@/store/objectTypes/textbox';\nimport {\n\tIObject,\n\tISetObjectPositionMutation,\n\tIRemoveObjectAction,\n} from '@/store/objects';\nimport { Character } from '@/renderables/character';\nimport {\n\tIShiftCharacterSlotAction,\n\tICharacter,\n} from '@/store/objectTypes/characters';\nimport ToolBox from '@/components/toolbox/toolbox.vue';\nimport MessageConsole from '@/components/message-console.vue';\nimport Render from '@/components/render.vue';\nimport ModalDialog from '@/components/ModalDialog.vue';\nimport { ISetCurrentMutation } from '@/store/panels';\nimport SingleBox from '@/components/repo/layouts/SingleBox.vue';\nimport ExpressionBuilder from '@/components/content-pack-builder/expression-builder/index.vue';\nimport eventBus from './eventbus/event-bus';\n\n// tslint:disable-next-line: no-magic-numbers\nconst aspectRatio = 16 / 9;\nconst arrowMoveStepSize = 20;\nconst packDialogWaitMs = 50;\n\n@Component({\n\tcomponents: {\n\t\tToolBox,\n\t\tMessageConsole,\n\t\tRender,\n\t\tModalDialog,\n\t\tSingleBox: () => import('@/components/repo/layouts/SingleBox.vue'),\n\t\tExpressionBuilder: () =>\n\t\t\timport('@/components/content-pack-builder/expression-builder/index.vue'),\n\t},\n})\nexport default class App extends Vue {\n\tpublic $store!: Store<IRootState>;\n\tpublic canvasWidth: number = 0;\n\tpublic canvasHeight: number = 0;\n\tprivate vuexHistory!: IHistorySupport;\n\tprivate blendOver: string | null = null;\n\n\tprivate uiSize: number = 192;\n\tprivate currentlyRendering: boolean = false;\n\n\tprivate panel: string = '';\n\tprivate dialogVisable: boolean = false;\n\n\tprivate expressionBuilderVisible: boolean = false;\n\tprivate expressionBuilderCharacter: string = '';\n\tprivate expressionBuilderHeadGroup: string | undefined;\n\n\tprivate drawLastDownload(): void {\n\t\tconst last = this.$store.state.ui.lastDownload;\n\t\tif (!last) return;\n\t\t(this.$refs.render as Render).blendOver(last);\n\t}\n\n\tprivate setBlendOver(): void {\n\t\tthis.blendOver = this.$store.state.ui.lastDownload;\n\t}\n\n\tprivate async created(): Promise<void> {\n\t\t// Moving this to the \"mounted\"-handler crashes safari over version 12.\n\t\t// My best guess is because it runs in a microtask, which have been added in that Version.\n\t\tthis.updateArea();\n\t\twindow.addEventListener('resize', this.updateArea);\n\t\twindow.removeEventListener('keydown', this.onKeydown);\n\t\twindow.addEventListener('keydown', this.onKeydown);\n\n\t\t(window as any).store = this.$store;\n\n\t\tdocument.body.addEventListener(\n\t\t\t'drop',\n\t\t\t(event: Event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\t\tdocument.body.addEventListener(\n\t\t\t'dragover',\n\t\t\t(event: Event) => {\n\t\t\t\tevent.preventDefault();\n\t\t\t},\n\t\t\ttrue\n\t\t);\n\n\t\tthis.vuexHistory.transaction(async () => {\n\t\t\tawait this.$store.dispatch('content/loadContentPacks', [\n\t\t\t\t`${process.env.BASE_URL}packs/buildin.base.backgrounds.json`,\n\t\t\t\t`${process.env.BASE_URL}packs/buildin.base.monika.json`,\n\t\t\t\t`${process.env.BASE_URL}packs/buildin.base.sayori.json`,\n\t\t\t\t`${process.env.BASE_URL}packs/buildin.base.natsuki.json`,\n\t\t\t\t`${process.env.BASE_URL}packs/buildin.base.yuri.json`,\n\t\t\t\t`${process.env.BASE_URL}packs/buildin.extra.mc.json`,\n\t\t\t\t`${process.env.BASE_URL}packs/buildin.extra.mc_chad.json`,\n\t\t\t\t`${process.env.BASE_URL}packs/buildin.extra.mc_classic.json`,\n\t\t\t\t`${process.env.BASE_URL}packs/buildin.extra.femc.json`,\n\t\t\t\t`${process.env.BASE_URL}packs/buildin.extra.classic_amy.json`,\n\t\t\t\t`${process.env.BASE_URL}packs/buildin.extra.amy.json`,\n\t\t\t]);\n\n\t\t\tawait this.$store.dispatch('panels/createPanel');\n\t\t\tif (Object.keys(this.$store.state.objects.objects).length === 0) {\n\t\t\t\tthis.$store.dispatch(\n\t\t\t\t\t'objects/createTextBox',\n\t\t\t\t\t{} as ICreateTextBoxAction\n\t\t\t\t);\n\t\t\t}\n\t\t\tawait this.$store.commit('panels/setCurrentBackground', {\n\t\t\t\tcurrent: 'dddg.buildin.backgrounds:ddlc.clubroom',\n\t\t\t\tpanelId: this.$store.state.panels.currentPanel,\n\t\t\t} as ISetCurrentMutation);\n\t\t});\n\t}\n\n\tprivate destroyed(): void {\n\t\twindow.removeEventListener('keydown', this.onKeydown);\n\t}\n\n\tprivate mounted(): void {\n\t\twindow.addEventListener('keypress', e => {\n\t\t\tif (e.key === 'Escape') {\n\t\t\t\tthis.vuexHistory.transaction(() => {\n\t\t\t\t\tif (this.$store.state.ui.selection === null) return;\n\t\t\t\t\tthis.$store.commit('ui/setSelection', null);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate optimum(sw: number, sh: number): [number, number] {\n\t\tlet rh = sw / aspectRatio;\n\t\tlet rw = sh * aspectRatio;\n\n\t\tif (rh > sh) {\n\t\t\trh = sh;\n\t\t} else {\n\t\t\trw = sw;\n\t\t}\n\n\t\treturn [rw, rh];\n\t}\n\n\tprivate optimizeWithMenu(sw: number, sh: number): [number, number, boolean] {\n\t\tconst opth = this.optimum(sw, sh - this.uiSize);\n\t\tconst optv = this.optimum(sw - this.uiSize, sh);\n\n\t\tif (opth[0] * opth[1] > optv[0] * optv[1]) {\n\t\t\treturn [opth[0], opth[1], false];\n\t\t} else {\n\t\t\treturn [optv[0], optv[1], true];\n\t\t}\n\t}\n\n\tprivate updateArea(): void {\n\t\tconst [cw, ch, v] = this.optimizeWithMenu(\n\t\t\tdocument.documentElement.clientWidth,\n\t\t\tdocument.documentElement.clientHeight\n\t\t);\n\n\t\tthis.canvasWidth = cw;\n\t\tthis.canvasHeight = ch;\n\t\tif (this.$store.state.ui.vertical === v) return;\n\t\tthis.$store.commit('ui/setVertical', v);\n\t}\n\n\tprivate showDialog(search: string | undefined) {\n\t\tthis.dialogVisable = true;\n\t\tif (search) {\n\t\t\tconst wait = () => {\n\t\t\t\tif (this.$refs.packDialog) {\n\t\t\t\t\t(this.$refs.packDialog as SingleBox).setSearch(search);\n\t\t\t\t} else {\n\t\t\t\t\tsetTimeout(wait, packDialogWaitMs);\n\t\t\t\t}\n\t\t\t};\n\t\t\tthis.$nextTick(wait);\n\t\t}\n\t}\n\n\tprivate showExpressionDialog(e: IShowExpressionDialogEvent) {\n\t\tthis.expressionBuilderVisible = true;\n\t\tthis.expressionBuilderCharacter = e.character;\n\t\tthis.expressionBuilderHeadGroup = e.headGroup;\n\t}\n\n\tprivate onKeydown(e: KeyboardEvent) {\n\t\tthis.vuexHistory.transaction(() => {\n\t\t\tconst selection = this.$store.state.objects.objects[\n\t\t\t\tthis.$store.state.ui.selection!\n\t\t\t];\n\t\t\tif (!selection) return;\n\t\t\tif (e.key === 'Delete') {\n\t\t\t\tthis.$store.dispatch('objects/removeObject', {\n\t\t\t\t\tid: selection.id,\n\t\t\t\t} as IRemoveObjectAction);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (e.key === 'z' && e.ctrlKey) {\n\t\t\t\t// this.$store.commit('history/undo');\n\t\t\t\te.preventDefault();\n\t\t\t\treturn;\n\t\t\t} else if (e.key === 'y' && e.ctrlKey) {\n\t\t\t\t// this.$store.commit('history/redo');\n\t\t\t\te.preventDefault();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (selection.type === 'character') {\n\t\t\t\tconst character = selection as ICharacter;\n\t\t\t\tif (character.freeMove) {\n\t\t\t\t\tif (e.key === 'ArrowLeft') {\n\t\t\t\t\t\tthis.$store.dispatch('objects/shiftCharacterSlot', {\n\t\t\t\t\t\t\tid: character.id,\n\t\t\t\t\t\t\tdelta: -1,\n\t\t\t\t\t\t} as IShiftCharacterSlotAction);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tif (e.key === 'ArrowRight') {\n\t\t\t\t\t\tthis.$store.dispatch('objects/shiftCharacterSlot', {\n\t\t\t\t\t\t\tid: character.id,\n\t\t\t\t\t\t\tdelta: 1,\n\t\t\t\t\t\t} as IShiftCharacterSlotAction);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet { x, y } = selection;\n\t\t\tif (e.key === 'ArrowLeft') {\n\t\t\t\tx -= e.shiftKey ? 1 : arrowMoveStepSize;\n\t\t\t} else if (selection && e.key === 'ArrowRight') {\n\t\t\t\tx += e.shiftKey ? 1 : arrowMoveStepSize;\n\t\t\t} else if (selection && e.key === 'ArrowUp') {\n\t\t\t\ty -= e.shiftKey ? 1 : arrowMoveStepSize;\n\t\t\t} else if (selection && e.key === 'ArrowDown') {\n\t\t\t\ty += e.shiftKey ? 1 : arrowMoveStepSize;\n\t\t\t} else {\n\t\t\t\tconsole.log(e);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.$store.dispatch('objects/setPosition', {\n\t\t\t\tid: selection.id,\n\t\t\t\tx,\n\t\t\t\ty,\n\t\t\t} as ISetObjectPositionMutation);\n\t\t\tconsole.log(e);\n\t\t\treturn;\n\t\t});\n\t}\n}\n\nexport interface IShowExpressionDialogEvent {\n\tcharacter: string;\n\theadGroup?: string;\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=4dfe24cd&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import { ICommand } from '@/eventbus/command';\nimport { getAAsset } from '@/asset-manager';\nimport { IObjectsState, ICreateObjectMutation, IObject } from '@/store/objects';\nimport { MutationTree, ActionTree } from 'vuex';\nimport { IRootState } from '..';\nimport { IAsset } from '../content';\n\nexport interface ISprite extends IObject {\n\ttype: 'sprite';\n\tassets: IAsset[];\n}\n\nexport const spriteMutations: MutationTree<IObjectsState> = {};\n\nlet lastSpriteId = 0;\n\nexport const spriteActions: ActionTree<IObjectsState, IRootState> = {\n\tasync createSprite(\n\t\t{ state, commit, rootState },\n\t\tcommand: ICreateSpriteAction\n\t) {\n\t\tconst asset = await getAAsset(command.assets[0], false);\n\t\tif (!(asset instanceof HTMLImageElement)) return;\n\t\tcommit('create', {\n\t\t\tobject: {\n\t\t\t\tassets: command.assets,\n\t\t\t\tflip: false,\n\t\t\t\theight: asset.height,\n\t\t\t\twidth: asset.width,\n\t\t\t\tid: 'sprite_' + ++lastSpriteId,\n\t\t\t\tpanelId: rootState.panels.currentPanel,\n\t\t\t\tonTop: false,\n\t\t\t\topacity: 100,\n\t\t\t\tpreserveRatio: true,\n\t\t\t\tratio: asset.width / asset.height,\n\t\t\t\ttype: 'sprite',\n\t\t\t\tversion: 0,\n\t\t\t\tx: 640,\n\t\t\t\ty: 0,\n\t\t\t} as ISprite,\n\t\t} as ICreateObjectMutation);\n\t},\n};\n\nexport interface ICreateSpriteAction extends ICommand {\n\treadonly assets: IAsset[];\n}\n","import { ICommand } from '@/eventbus/command';\nimport { IObjectsState, ICreateObjectMutation, IObject } from '@/store/objects';\nimport { MutationTree, ActionTree } from 'vuex';\nimport { TextBoxWidth, TextBoxHeight } from '@/constants/textBox';\nimport { IRootState } from '..';\nimport {\n\tChoiceSpacing,\n\tChoiceButtonColor,\n\tChoiceY,\n\tChoiceButtonWidth,\n} from '@/constants/choices';\nimport { ISetAutoWrappingMutation } from './textbox';\n\nexport interface IChoice {\n\ttext: string;\n\tselected: boolean;\n}\n\nexport interface IChoices extends IObject {\n\ttype: 'choice';\n\tcustomColor: string;\n\tchoices: IChoice[];\n\tchoiceDistance: number;\n\tautoWrap: boolean;\n}\n\nexport const choiceMutations: MutationTree<IObjectsState> = {\n\tsetChoices(state, command: ISetChoicesMutation) {\n\t\tconst obj = state.objects[command.id] as IChoices;\n\t\tobj.choices = command.choices;\n\t\t++obj.version;\n\t},\n\tsetChoiceColor(state, command: ISetChoiceColorMutation) {\n\t\tconst obj = state.objects[command.id] as IChoices;\n\t\tobj.customColor = command.customColor;\n\t\t++obj.version;\n\t},\n\tsetChoiceDistance(state, command: ISetChoiceDistanceMutation) {\n\t\tconst obj = state.objects[command.id] as IChoices;\n\t\tobj.choiceDistance = command.choiceDistance;\n\t\t++obj.version;\n\t},\n\tsetAutoWrapping(state, command: ISetAutoWrappingMutation) {\n\t\tconst obj = state.objects[command.id] as IChoices;\n\t\tobj.autoWrap = command.autoWrap;\n\t\t++obj.version;\n\t},\n};\n\nlet lastChoiceId = 0;\n\nexport const choiceActions: ActionTree<IObjectsState, IRootState> = {\n\tcreateChoice({ commit, rootState }, command: ICreateChoicesAction): string {\n\t\tconst id = 'choice_' + ++lastChoiceId;\n\t\tcommit('create', {\n\t\t\tobject: {\n\t\t\t\tx: 640,\n\t\t\t\ty: ChoiceY,\n\t\t\t\twidth: ChoiceButtonWidth,\n\t\t\t\theight: 0,\n\t\t\t\tpanelId: rootState.panels.currentPanel,\n\t\t\t\tflip: false,\n\t\t\t\tid,\n\t\t\t\tonTop: true,\n\t\t\t\tautoWrap: true,\n\t\t\t\topacity: 100,\n\t\t\t\ttype: 'choice',\n\t\t\t\tversion: 0,\n\t\t\t\tpreserveRatio: false,\n\t\t\t\tratio: TextBoxWidth / TextBoxHeight,\n\t\t\t\tchoiceDistance: ChoiceSpacing,\n\t\t\t\tchoices: [\n\t\t\t\t\t{\n\t\t\t\t\t\tselected: false,\n\t\t\t\t\t\ttext: 'Click here to edit choice',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t\tcustomColor: ChoiceButtonColor,\n\t\t\t} as IChoices,\n\t\t} as ICreateObjectMutation);\n\t\treturn id;\n\t},\n\n\taddChoice({ state, commit }, command: IAddChoiceAction) {\n\t\tconst obj = state.objects[command.id] as IChoices;\n\t\tcommit('setChoices', {\n\t\t\tid: command.id,\n\t\t\tchoices: [\n\t\t\t\t...obj.choices,\n\t\t\t\t{\n\t\t\t\t\tselected: false,\n\t\t\t\t\ttext: command.text,\n\t\t\t\t},\n\t\t\t],\n\t\t} as ISetChoicesMutation);\n\t},\n\n\tremoveChoise({ state, commit }, command: IRemoveChoiceAction) {\n\t\tconst obj = state.objects[command.id] as IChoices;\n\t\tconst choices = [...obj.choices];\n\t\tif (!choices[command.choiceIdx]) return;\n\t\tchoices.splice(command.choiceIdx, 1);\n\t\tcommit('setChoices', {\n\t\t\tid: command.id,\n\t\t\tchoices,\n\t\t} as ISetChoicesMutation);\n\t},\n\n\tsetChoiceText({ state, commit }, command: ISetChoiceTextAction) {\n\t\tconst obj = state.objects[command.id] as IChoices;\n\t\tconst choices = [...obj.choices];\n\t\tif (!choices[command.choiceIdx]) return;\n\t\tchoices[command.choiceIdx].text = command.text;\n\t\tcommit('setChoices', {\n\t\t\tid: command.id,\n\t\t\tchoices,\n\t\t} as ISetChoicesMutation);\n\t},\n};\n\nexport interface ISetChoicesMutation extends ICommand {\n\treadonly choices: IChoices['choices'];\n}\n\nexport interface ISetChoiceColorMutation extends ICommand {\n\treadonly customColor: IChoices['customColor'];\n}\n\nexport interface ISetChoiceDistanceMutation extends ICommand {\n\treadonly choiceDistance: IChoices['choiceDistance'];\n}\n\nexport interface ICreateChoicesAction extends ICommand {}\n\nexport interface IAddChoiceAction extends ICommand {\n\treadonly text: string;\n}\n\nexport interface ISetChoiceTextAction extends ICommand {\n\treadonly choiceIdx: number;\n\treadonly text: string;\n}\n\nexport interface IRemoveChoiceAction extends ICommand {\n\treadonly choiceIdx: number;\n}\n","import { ICommand } from '@/eventbus/command';\nimport {\n\tIObjectsState,\n\tICreateObjectMutation,\n\tIObject,\n\tISetObjectPositionMutation,\n\tISetObjectFlipMutation,\n} from '@/store/objects';\nimport { MutationTree, ActionTree } from 'vuex';\nimport { NameboxY, TextBoxWidth, TextBoxHeight } from '@/constants/textBox';\nimport { ISetSpriteSizeMutation } from './characters';\nimport { IRootState } from '..';\n\nexport interface ITextBox extends IObject {\n\ttype: 'textBox';\n\ttext: string;\n\ttalkingDefault:\n\t\t| 'No-one'\n\t\t| 'Sayori'\n\t\t| 'Monika'\n\t\t| 'Natsuki'\n\t\t| 'Yuri'\n\t\t| 'MC'\n\t\t| 'FeMC'\n\t\t| 'Chad'\n\t\t| 'Amy'\n\t\t| 'Other';\n\ttalkingOther: string;\n\tstyle: 'normal' | 'corrupt' | 'custom' | 'none';\n\tcustomColor: string;\n\tderiveCustomColors: boolean;\n\tcustomControlsColor: string;\n\tcustomNameboxColor: string;\n\tcustomNameboxStroke: string;\n\tcustomNameboxWidth: number;\n\tcontrols: boolean;\n\tskip: boolean;\n\tautoQuoting: boolean;\n\tautoWrap: boolean;\n\tcontinue: boolean;\n\tresetBounds: {\n\t\tx: number;\n\t\ty: number;\n\t\twidth: number;\n\t\theight: number;\n\t};\n}\n\nconst splitTextboxSpacing = 4;\n\nexport const textBoxMutations: MutationTree<IObjectsState> = {\n\tsetText(state, command: ISetTextBoxTextMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.text = command.text;\n\t\t++obj.version;\n\t},\n\tsetTalkingDefault(state, command: ISetTextBoxTalkingDefaultMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.talkingDefault = command.talkingDefault;\n\t\t++obj.version;\n\t},\n\tsetTalkingOther(state, command: ISetTextBoxTalkingOtherMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.talkingOther = command.talkingOther;\n\t\tobj.talkingDefault = 'Other';\n\t\t++obj.version;\n\t},\n\tsetStyle(state, command: ISetTextBoxStyleMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.style = command.style;\n\t\t++obj.version;\n\t},\n\tsetControlsVisible(state, command: ISetTextBoxControlsVisibleMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.controls = command.controls;\n\t\t++obj.version;\n\t},\n\tsetControlsColor(state, command: ISetTextBoxCustomControlsColorMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.customControlsColor = command.customControlsColor;\n\t\t++obj.version;\n\t},\n\tsetDeriveCustomColors(state, command: ISetTextBoxDeriveCustomColorMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.deriveCustomColors = command.deriveCustomColors;\n\t\t++obj.version;\n\t},\n\tsetNameboxColor(state, command: ISetTextBoxNameboxColorMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.customNameboxColor = command.customNameboxColor;\n\t\t++obj.version;\n\t},\n\tsetNameboxStroke(state, command: ISetTextBoxNameboxStrokeMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.customNameboxStroke = command.customNameboxStroke;\n\t\t++obj.version;\n\t},\n\tsetNameboxWidth(state, command: ISetTextBoxNameboxWidthMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.customNameboxWidth = command.customNameboxWidth;\n\t\t++obj.version;\n\t},\n\tsetSkipable(state, command: ISetTextBoxControlsSkipMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.skip = command.skip;\n\t\t++obj.version;\n\t},\n\tsetContinueArrow(state, command: ISetTextBoxControlsContinueMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.continue = command.continue;\n\t\t++obj.version;\n\t},\n\tsetCustomColor(state, command: ISetTextBoxCustomColorMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.customColor = command.color;\n\t\t++obj.version;\n\t},\n\tsetAutoQuoting(state, command: ISetTextBoxAutoQuotingMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.autoQuoting = command.autoQuoting;\n\t\t++obj.version;\n\t},\n\tsetAutoWrapping(state, command: ISetAutoWrappingMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.autoWrap = command.autoWrap;\n\t\t++obj.version;\n\t},\n\tsetResetBounds(state, command: ISetResetBoundsMutation) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tobj.resetBounds = command.resetBounds;\n\t\tobj.x = command.resetBounds.x;\n\t\tobj.y = command.resetBounds.y;\n\t\tobj.height = command.resetBounds.height;\n\t\tobj.width = command.resetBounds.width;\n\t\t++obj.version;\n\t},\n};\n\nlet lastTextBoxId = 0;\n\nexport const textBoxActions: ActionTree<IObjectsState, IRootState> = {\n\tcreateTextBox({ commit, rootState }, command: ICreateTextBoxAction): string {\n\t\tconst id = 'textBox_' + ++lastTextBoxId;\n\t\tconst resetBounds = command.resetBounds || {\n\t\t\tx: 640,\n\t\t\ty: NameboxY,\n\t\t\twidth: TextBoxWidth,\n\t\t\theight: TextBoxHeight,\n\t\t};\n\t\tcommit('create', {\n\t\t\tobject: {\n\t\t\t\t...resetBounds,\n\t\t\t\tpanelId: rootState.panels.currentPanel,\n\t\t\t\tflip: false,\n\t\t\t\tid,\n\t\t\t\tonTop: true,\n\t\t\t\topacity: 100,\n\t\t\t\ttype: 'textBox',\n\t\t\t\tversion: 0,\n\t\t\t\tpreserveRatio: false,\n\t\t\t\tratio: TextBoxWidth / TextBoxHeight,\n\t\t\t\tcontinue: true,\n\t\t\t\tcontrols: true,\n\t\t\t\tskip: true,\n\t\t\t\tautoQuoting: true,\n\t\t\t\tautoWrap: true,\n\t\t\t\tstyle: 'normal',\n\t\t\t\tcustomColor: '#ffa8d2',\n\t\t\t\tderiveCustomColors: true,\n\t\t\t\tcustomControlsColor: '#552222',\n\t\t\t\tcustomNameboxColor: '#ffeef6',\n\t\t\t\tcustomNameboxWidth: 168,\n\t\t\t\tcustomNameboxStroke: '#bb5599',\n\t\t\t\ttalkingDefault: 'No-one',\n\t\t\t\ttalkingOther: '',\n\t\t\t\ttext: '',\n\t\t\t\tresetBounds,\n\t\t\t} as ITextBox,\n\t\t} as ICreateObjectMutation);\n\t\treturn id;\n\t},\n\n\tsetStyle({ commit }, command: ISetTextBoxStyleAction) {\n\t\tcommit('setStyle', {\n\t\t\tid: command.id,\n\t\t\tstyle: command.style,\n\t\t} as ISetTextBoxStyleMutation);\n\t},\n\n\tresetTextboxBounds(\n\t\t{ commit, state, dispatch },\n\t\tcommand: IResetTextboxBounds\n\t) {\n\t\tconst obj = state.objects[command.id] as ITextBox;\n\t\tcommit('setPosition', {\n\t\t\tid: command.id,\n\t\t\tx: obj.resetBounds.x,\n\t\t\ty: obj.resetBounds.y,\n\t\t} as ISetObjectPositionMutation);\n\t\tcommit('setSize', {\n\t\t\tid: command.id,\n\t\t\theight: obj.resetBounds.height,\n\t\t\twidth: obj.resetBounds.width,\n\t\t} as ISetSpriteSizeMutation);\n\t},\n\n\tasync splitTextbox({ commit, state, dispatch }, command: ISplitTextbox) {\n\t\tconst obj = state.objects[command.id];\n\t\tconst newWidth = (obj.width - splitTextboxSpacing) / 2;\n\t\tcommit('setResetBounds', {\n\t\t\tid: command.id,\n\t\t\tresetBounds: {\n\t\t\t\tx: obj.x - newWidth / 2,\n\t\t\t\ty: obj.y,\n\t\t\t\twidth: newWidth,\n\t\t\t\theight: obj.height,\n\t\t\t},\n\t\t} as ISetResetBoundsMutation);\n\t\tcommit('setStyle', {\n\t\t\tid: command.id,\n\t\t\tstyle: 'custom',\n\t\t} as ISetTextBoxStyleMutation);\n\t\tconst id = (await dispatch('createTextBox', {\n\t\t\tresetBounds: {\n\t\t\t\tx: obj.x + newWidth + splitTextboxSpacing / 2,\n\t\t\t\ty: obj.y,\n\t\t\t\twidth: newWidth,\n\t\t\t\theight: obj.height,\n\t\t\t},\n\t\t} as ICreateTextBoxAction)) as string;\n\t\tcommit('setStyle', {\n\t\t\tid,\n\t\t\tstyle: 'custom',\n\t\t} as ISetTextBoxStyleMutation);\n\t\tif (obj.flip) {\n\t\t\tcommit('setFlip', {\n\t\t\t\tid,\n\t\t\t\tflip: obj.flip,\n\t\t\t} as ISetObjectFlipMutation);\n\t\t}\n\t},\n};\n\nexport interface ISetTextBoxTextMutation extends ICommand {\n\treadonly text: string;\n}\n\nexport interface ISetTextBoxTalkingDefaultMutation extends ICommand {\n\treadonly talkingDefault: ITextBox['talkingDefault'];\n}\n\nexport interface ISetTextBoxTalkingOtherMutation extends ICommand {\n\treadonly talkingOther: string;\n}\n\nexport interface ISetTextBoxStyleMutation extends ICommand {\n\treadonly style: ITextBox['style'];\n}\n\nexport interface ISetTextBoxControlsVisibleMutation extends ICommand {\n\treadonly controls: boolean;\n}\n\nexport interface ISetTextBoxDeriveCustomColorMutation extends ICommand {\n\treadonly deriveCustomColors: boolean;\n}\n\nexport interface ISetTextBoxCustomControlsColorMutation extends ICommand {\n\treadonly customControlsColor: string;\n}\n\nexport interface ISetTextBoxNameboxColorMutation extends ICommand {\n\treadonly customNameboxColor: string;\n}\n\nexport interface ISetTextBoxNameboxStrokeMutation extends ICommand {\n\treadonly customNameboxStroke: string;\n}\n\nexport interface ISetTextBoxNameboxWidthMutation extends ICommand {\n\treadonly customNameboxWidth: number;\n}\n\nexport interface ISetTextBoxAutoQuotingMutation extends ICommand {\n\treadonly autoQuoting: boolean;\n}\n\nexport interface ISetAutoWrappingMutation extends ICommand {\n\treadonly autoWrap: boolean;\n}\n\nexport interface ISetResetBoundsMutation extends ICommand {\n\treadonly resetBounds: ITextBox['resetBounds'];\n}\n\nexport interface ISetTextBoxControlsSkipMutation extends ICommand {\n\treadonly skip: boolean;\n}\n\nexport interface ISetTextBoxControlsContinueMutation extends ICommand {\n\treadonly continue: boolean;\n}\n\nexport interface ISetTextBoxCustomColorMutation extends ICommand {\n\treadonly color: string;\n}\n\nexport interface ICreateTextBoxAction extends ICommand {\n\treadonly resetBounds?: ITextBox['resetBounds'];\n}\n\nexport interface ISetTextBoxStyleAction extends ICommand {\n\treadonly style: ITextBox['style'];\n}\n\nexport interface ISplitTextbox extends ICommand {}\n\nexport interface IResetTextboxBounds extends ICommand {}\n","import { ICommand } from '@/eventbus/command';\nimport { IObjectsState, ICreateObjectMutation, IObject } from '@/store/objects';\nimport { MutationTree, ActionTree } from 'vuex';\nimport { TextBoxWidth, TextBoxHeight } from '@/constants/textBox';\nimport { IRootState } from '..';\nimport {\n\tChoiceButtonColor,\n\tChoiceY,\n\tChoiceButtonWidth,\n} from '@/constants/choices';\nimport { screenHeight, screenWidth } from '@/constants/base';\nimport { ISetAutoWrappingMutation } from './textbox';\n\nexport interface INotification extends IObject {\n\ttype: 'notification';\n\tcustomColor: string;\n\ttext: string;\n\tbackdrop: boolean;\n\tautoWrap: boolean;\n}\n\nexport const notificationMutations: MutationTree<IObjectsState> = {\n\tsetNotificationColor(state, command: ISetChoiceColorMutation) {\n\t\tconst obj = state.objects[command.id] as INotification;\n\t\tobj.customColor = command.customColor;\n\t\t++obj.version;\n\t},\n\tsetNotificationText(state, { id, text }: ISetNotificationTextMutation) {\n\t\tconst obj = state.objects[id] as INotification;\n\t\tobj.text = text;\n\t\t++obj.version;\n\t},\n\tsetNotificationBackdrop(\n\t\tstate,\n\t\t{ id, backdrop }: ISetNotificationBackdropMutation\n\t) {\n\t\tconst obj = state.objects[id] as INotification;\n\t\tobj.backdrop = backdrop;\n\t\t++obj.version;\n\t},\n\tsetAutoWrapping(state, command: ISetAutoWrappingMutation) {\n\t\tconst obj = state.objects[command.id] as INotification;\n\t\tobj.autoWrap = command.autoWrap;\n\t\t++obj.version;\n\t},\n};\n\nlet lastNotificationId = 0;\n\nexport const notificationActions: ActionTree<IObjectsState, IRootState> = {\n\tcreateNotification(\n\t\t{ commit, rootState },\n\t\tcommand: ICreateNotificationAction\n\t): string {\n\t\tconst id = 'notification_' + ++lastNotificationId;\n\t\tcommit('create', {\n\t\t\tobject: {\n\t\t\t\tx: screenWidth / 2,\n\t\t\t\ty: screenHeight / 2,\n\t\t\t\twidth: ChoiceButtonWidth,\n\t\t\t\theight: 0,\n\t\t\t\tpanelId: rootState.panels.currentPanel,\n\t\t\t\tflip: false,\n\t\t\t\tautoWrap: false,\n\t\t\t\tid,\n\t\t\t\tonTop: true,\n\t\t\t\topacity: 100,\n\t\t\t\ttype: 'notification',\n\t\t\t\tversion: 0,\n\t\t\t\tpreserveRatio: false,\n\t\t\t\tratio: TextBoxWidth / TextBoxHeight,\n\t\t\t\tcustomColor: ChoiceButtonColor,\n\t\t\t\ttext: 'Click here to edit notification',\n\t\t\t\tbackdrop: true,\n\t\t\t} as INotification,\n\t\t} as ICreateObjectMutation);\n\t\treturn id;\n\t},\n};\n\nexport interface ISetNotificationTextMutation extends ICommand {\n\treadonly text: INotification['text'];\n}\n\nexport interface ISetNotificationBackdropMutation extends ICommand {\n\treadonly backdrop: INotification['backdrop'];\n}\n\nexport interface ISetChoiceColorMutation extends ICommand {\n\treadonly customColor: INotification['customColor'];\n}\n\nexport interface ICreateNotificationAction extends ICommand {}\n","import { ICommand } from '@/eventbus/command';\nimport { IObjectsState, ICreateObjectMutation, IObject } from '@/store/objects';\nimport { MutationTree, ActionTree } from 'vuex';\nimport { IRootState } from '..';\nimport {\n\tdefaultPoemBackground,\n\tdefaultX,\n\tdefaultY,\n\tdefaultPoemWidth,\n\tdefaultPoemHeight,\n\tconsoleHeight,\n\tconsoleWidth,\n\tdefaultPoemStyle,\n\tdefaultConsoleBackground,\n\tdefaultConsoleStyle,\n} from '@/constants/poem';\nimport { ISetAutoWrappingMutation } from './textbox';\n\nexport interface IPoem extends IObject {\n\ttype: 'poem';\n\tsubType: 'poem' | 'console';\n\tbackground: number;\n\tfont: number;\n\ttext: string;\n\tautoWrap: boolean;\n}\n\nexport const poemMutations: MutationTree<IObjectsState> = {\n\tsetPoemBackground(state, { id, background }: ISetBackgroundMutation) {\n\t\tconst obj = state.objects[id] as IPoem;\n\t\tobj.background = background;\n\t\t++obj.version;\n\t},\n\tsetPoemFont(state, { id, font }: ISetFontMutation) {\n\t\tconst obj = state.objects[id] as IPoem;\n\t\tobj.font = font;\n\t\t++obj.version;\n\t},\n\tsetPoemText(state, { id, text }: ISetTextMutation) {\n\t\tconst obj = state.objects[id] as IPoem;\n\t\tobj.text = text;\n\t\t++obj.version;\n\t},\n\tsetAutoWrapping(state, command: ISetAutoWrappingMutation) {\n\t\tconst obj = state.objects[command.id] as IPoem;\n\t\tobj.autoWrap = command.autoWrap;\n\t\t++obj.version;\n\t},\n};\n\nlet lastPoemId = 0;\n\nexport const poemActions: ActionTree<IObjectsState, IRootState> = {\n\tcreatePoem({ commit, rootState }, command: ICreatePoemAction): string {\n\t\tconst id = 'poem_' + ++lastPoemId;\n\t\tcommit('create', {\n\t\t\tobject: {\n\t\t\t\tsubType: 'poem',\n\t\t\t\tx: defaultX,\n\t\t\t\ty: defaultY,\n\t\t\t\twidth: defaultPoemWidth,\n\t\t\t\theight: defaultPoemHeight,\n\t\t\t\tpanelId: rootState.panels.currentPanel,\n\t\t\t\tflip: false,\n\t\t\t\tid,\n\t\t\t\tonTop: true,\n\t\t\t\topacity: 100,\n\t\t\t\ttype: 'poem',\n\t\t\t\tversion: 0,\n\t\t\t\tpreserveRatio: false,\n\t\t\t\tautoWrap: true,\n\t\t\t\tratio: defaultPoemWidth / defaultPoemHeight,\n\t\t\t\tbackground: defaultPoemBackground,\n\t\t\t\tfont: defaultPoemStyle,\n\t\t\t\ttext: 'New poem\\n\\nClick here to edit poem',\n\t\t\t} as IPoem,\n\t\t} as ICreateObjectMutation);\n\t\treturn id;\n\t},\n\tcreateConsole({ commit, rootState }, command: ICreatePoemAction): string {\n\t\tconst id = 'poem_' + ++lastPoemId;\n\t\tcommit('create', {\n\t\t\tobject: {\n\t\t\t\tsubType: 'console',\n\t\t\t\tx: consoleWidth / 2,\n\t\t\t\ty: consoleHeight / 2,\n\t\t\t\twidth: consoleWidth,\n\t\t\t\theight: consoleHeight,\n\t\t\t\tpanelId: rootState.panels.currentPanel,\n\t\t\t\tflip: false,\n\t\t\t\tid,\n\t\t\t\tonTop: true,\n\t\t\t\topacity: 100,\n\t\t\t\ttype: 'poem',\n\t\t\t\tversion: 0,\n\t\t\t\tpreserveRatio: false,\n\t\t\t\tratio: consoleWidth / consoleHeight,\n\t\t\t\tbackground: defaultConsoleBackground,\n\t\t\t\tfont: defaultConsoleStyle,\n\t\t\t\ttext: '> _\\n  \\n  Console command\\n  Click here to edit',\n\t\t\t} as IPoem,\n\t\t} as ICreateObjectMutation);\n\t\treturn id;\n\t},\n};\n\nexport interface ISetBackgroundMutation extends ICommand {\n\treadonly background: IPoem['background'];\n}\n\nexport interface ISetFontMutation extends ICommand {\n\treadonly font: IPoem['font'];\n}\n\nexport interface ISetTextMutation extends ICommand {\n\treadonly text: IPoem['text'];\n}\n\nexport interface ICreatePoemAction extends ICommand {}\n","import { Module } from 'vuex';\nimport { ICommand } from '@/eventbus/command';\nimport { spriteMutations, spriteActions } from './objectTypes/sprite';\nimport {\n\tcharacterActions,\n\tcharacterMutations,\n\tfixContentPackRemovalFromCharacter,\n} from './objectTypes/characters';\nimport { choiceMutations, choiceActions } from './objectTypes/choices';\nimport { textBoxActions, textBoxMutations } from './objectTypes/textbox';\nimport {\n\tnotificationMutations,\n\tnotificationActions,\n} from './objectTypes/notification';\nimport { poemMutations, poemActions } from './objectTypes/poem';\nimport { IRootState } from '.';\nimport { ContentPack } from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\nimport { IAsset } from './content';\nimport Vue from 'vue';\n\nexport interface IPanel {\n\tid: string;\n\torder: string[];\n\tonTopOrder: string[];\n}\n\nexport interface IObjectsState {\n\tobjects: { [id: string]: IObject };\n\tpanels: { [id: string]: IPanel };\n}\n\nexport interface IObject {\n\ttype: ObjectTypes;\n\tpanelId: string;\n\tid: string;\n\tx: number;\n\ty: number;\n\twidth: number;\n\theight: number;\n\tpreserveRatio: boolean;\n\tratio: number;\n\topacity: number;\n\tversion: number;\n\tflip: boolean;\n\tonTop: boolean;\n}\n\nexport type ObjectTypes =\n\t| 'sprite'\n\t| 'character'\n\t| 'textBox'\n\t| 'choice'\n\t| 'notification'\n\t| 'poem';\n\nlet lastCopyId = 0;\n\nexport default {\n\tnamespaced: true,\n\tstate: {\n\t\tobjects: {},\n\t\tpanels: {},\n\t},\n\tmutations: {\n\t\tcreate(state, { object }: ICreateObjectMutation) {\n\t\t\tif (!state.panels[object.panelId]) {\n\t\t\t\tVue.set(state.panels, object.panelId, {\n\t\t\t\t\tid: object.panelId,\n\t\t\t\t\tonTopOrder: [],\n\t\t\t\t\torder: [],\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst panel = state.panels[object.panelId];\n\t\t\tconst collection = object.onTop ? panel.onTopOrder : panel.order;\n\t\t\tVue.set(state.objects, object.id, object);\n\t\t\tcollection.push(object.id);\n\t\t},\n\t\tremoveFromList(state, command: IRemoveFromListMutation) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tconst panel = state.panels[obj.panelId];\n\t\t\tconst collection = command.onTop ? panel.onTopOrder : panel.order;\n\t\t\tconst idx = collection.indexOf(command.id);\n\t\t\tcollection.splice(idx, 1);\n\t\t},\n\t\taddToList(state, command: IAddToListMutation) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tconst panel = state.panels[obj.panelId];\n\t\t\tconst collection = command.onTop ? panel.onTopOrder : panel.order;\n\t\t\tcollection.splice(command.position, 0, command.id);\n\t\t},\n\t\tsetOnTop(state, command: ISetOnTopMutation) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tobj.onTop = command.onTop;\n\t\t},\n\t\tsetPosition(state, command: ISetObjectPositionMutation) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tobj.x = command.x;\n\t\t\tobj.y = command.y;\n\t\t},\n\t\tsetFlip(state, command: ISetObjectFlipMutation) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tobj.flip = command.flip;\n\t\t},\n\t\tsetOpacity(state, command: ISetObjectOpacityMutation) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tobj.opacity = command.opacity;\n\t\t},\n\t\tsetSize(state, command: ISetSpriteSizeMutation) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tobj.width = command.width;\n\t\t\tobj.height = command.height;\n\t\t},\n\t\tsetRatio(state, command: ISetSpriteRatioMutation) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tobj.preserveRatio = command.preserveRatio;\n\t\t\tobj.ratio = command.ratio;\n\t\t},\n\t\tremoveObject(state, command: IRemoveObjectMutation) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tdelete state.objects[command.id];\n\t\t\tconst panel = state.panels[obj.panelId];\n\t\t\tif (panel.onTopOrder.length === 0 && panel.order.length === 0) {\n\t\t\t\tdelete state.panels[obj.panelId];\n\t\t\t}\n\t\t},\n\t\t...spriteMutations,\n\t\t...characterMutations,\n\t\t...textBoxMutations,\n\t\t...choiceMutations,\n\t\t...notificationMutations,\n\t\t...poemMutations,\n\t},\n\tactions: {\n\t\tremoveObject({ state, commit, rootState }, command: IRemoveObjectAction) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tif (rootState.ui.selection === command.id) {\n\t\t\t\tcommit('ui/setSelection', null, { root: true });\n\t\t\t}\n\t\t\tcommit('removeFromList', {\n\t\t\t\tid: command.id,\n\t\t\t\tonTop: obj.onTop,\n\t\t\t} as IRemoveFromListMutation);\n\t\t\tcommit('removeObject', {\n\t\t\t\tid: command.id,\n\t\t\t} as IRemoveObjectMutation);\n\t\t},\n\t\tsetPosition({ state, commit, dispatch }, command: ISetPositionAction) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tif (obj.type === 'character') {\n\t\t\t\tdispatch('setCharacterPosition', command as ISetPositionAction);\n\t\t\t} else {\n\t\t\t\tcommit('setPosition', command as ISetObjectPositionMutation);\n\t\t\t}\n\t\t},\n\t\tsetOnTop({ state, commit }, command: IObjectSetOnTopAction) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tconst panel = state.panels[obj.panelId];\n\t\t\tif (obj.onTop === command.onTop) return;\n\t\t\tcommit('removeFromList', {\n\t\t\t\tid: command.id,\n\t\t\t\tonTop: obj.onTop,\n\t\t\t} as IRemoveFromListMutation);\n\t\t\tcommit('addToList', {\n\t\t\t\tid: command.id,\n\t\t\t\tposition: (command.onTop ? panel.onTopOrder : panel.order).length,\n\t\t\t\tonTop: command.onTop,\n\t\t\t} as IRemoveFromListMutation);\n\t\t\tcommit('setOnTop', {\n\t\t\t\tid: command.id,\n\t\t\t\tonTop: command.onTop,\n\t\t\t} as ISetOnTopMutation);\n\t\t},\n\t\tshiftLayer({ state, commit }, command: IObjectShiftLayerAction) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tconst panel = state.panels[obj.panelId];\n\t\t\tconst collection = obj.onTop ? panel.onTopOrder : panel.order;\n\t\t\tconst position = collection.indexOf(obj.id);\n\n\t\t\tlet newPosition = position + command.delta;\n\t\t\tif (newPosition < 0) {\n\t\t\t\tnewPosition = 0;\n\t\t\t}\n\t\t\tif (newPosition > collection.length) {\n\t\t\t\tnewPosition = collection.length;\n\t\t\t}\n\t\t\tcommit('removeFromList', {\n\t\t\t\tid: command.id,\n\t\t\t\tonTop: obj.onTop,\n\t\t\t} as IRemoveFromListMutation);\n\t\t\tcommit('addToList', {\n\t\t\t\tid: command.id,\n\t\t\t\tposition: newPosition,\n\t\t\t\tonTop: obj.onTop,\n\t\t\t} as IAddToListMutation);\n\t\t},\n\t\tsetPreserveRatio({ commit, state }, command: ISetRatioAction) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tconst ratio = command.preserveRatio ? obj.width / obj.height : 0;\n\t\t\tcommit('setRatio', {\n\t\t\t\tid: command.id,\n\t\t\t\tpreserveRatio: command.preserveRatio,\n\t\t\t\tratio,\n\t\t\t} as ISetSpriteRatioMutation);\n\t\t},\n\t\tsetWidth({ commit, state }, command: ISetWidthAction) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tconst height = !obj.preserveRatio\n\t\t\t\t? obj.height\n\t\t\t\t: command.width / obj.ratio;\n\t\t\tcommit('setSize', {\n\t\t\t\tid: command.id,\n\t\t\t\theight,\n\t\t\t\twidth: command.width,\n\t\t\t} as ISetSpriteSizeMutation);\n\t\t},\n\t\tsetHeight({ commit, state }, command: ISetHeightAction) {\n\t\t\tconst obj = state.objects[command.id];\n\t\t\tconst width = !obj.preserveRatio ? obj.width : command.height * obj.ratio;\n\t\t\tcommit('setSize', {\n\t\t\t\tid: command.id,\n\t\t\t\theight: command.height,\n\t\t\t\twidth,\n\t\t\t} as ISetSpriteSizeMutation);\n\t\t},\n\t\tfixContentPackRemoval(context, oldContent: ContentPack<IAsset>) {\n\t\t\tObject.values(context.state.objects).map((obj) => {\n\t\t\t\tswitch (obj.type) {\n\t\t\t\t\tcase 'character':\n\t\t\t\t\t\tfixContentPackRemovalFromCharacter(context, obj.id, oldContent);\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'sprite':\n\t\t\t\t\t\treturn;\n\t\t\t\t\tcase 'textBox':\n\t\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tcopyObjects(\n\t\t\t{ commit, state },\n\t\t\t{ sourcePanelId, targetPanelId }: ICopyObjectsAction\n\t\t) {\n\t\t\tconst sourceOrders = state.panels[sourcePanelId];\n\t\t\tif (!sourceOrders) return;\n\t\t\tfor (const id of [...sourceOrders.onTopOrder, ...sourceOrders.order]) {\n\t\t\t\tconst oldObject = state.objects[id];\n\t\t\t\tcommit('create', {\n\t\t\t\t\tobject: {\n\t\t\t\t\t\t...JSON.parse(JSON.stringify(oldObject)),\n\t\t\t\t\t\tid: `copy_${oldObject.id}_${++lastCopyId}`,\n\t\t\t\t\t\tpanelId: targetPanelId,\n\t\t\t\t\t},\n\t\t\t\t} as ICreateObjectMutation);\n\t\t\t}\n\t\t},\n\t\tdeleteAllOfPanel({ state, dispatch }, { panelId }: IDeleteAllOfPanel) {\n\t\t\tconst panel = state.panels[panelId];\n\t\t\tfor (const id of [...panel.onTopOrder, ...panel.order]) {\n\t\t\t\tdispatch('removeObject', { id } as IRemoveObjectAction);\n\t\t\t}\n\t\t},\n\t\t...spriteActions,\n\t\t...characterActions,\n\t\t...textBoxActions,\n\t\t...choiceActions,\n\t\t...notificationActions,\n\t\t...poemActions,\n\t},\n} as Module<IObjectsState, IRootState>;\n\nexport interface ICreateObjectMutation {\n\treadonly object: IObject;\n}\n\nexport interface IDeleteAllOfPanel {\n\treadonly panelId: string;\n}\n\nexport interface IObjectMutation {\n\treadonly id: string;\n}\n\nexport interface ISetSpriteSizeMutation extends ICommand {\n\treadonly width: number;\n\treadonly height: number;\n}\n\nexport interface ISetSpriteRatioMutation extends ICommand {\n\treadonly preserveRatio: boolean;\n\treadonly ratio: number;\n}\n\nexport interface ISetObjectPositionMutation extends IObjectMutation {\n\treadonly x: number;\n\treadonly y: number;\n}\n\nexport interface ISetOnTopMutation extends IObjectMutation {\n\treadonly onTop: boolean;\n}\n\nexport interface ISetObjectFlipMutation extends IObjectMutation {\n\treadonly flip: boolean;\n}\n\nexport interface ISetObjectOpacityMutation extends IObjectMutation {\n\treadonly opacity: number;\n}\n\nexport interface IRemoveFromListMutation extends IObjectMutation {\n\treadonly onTop: boolean;\n}\n\nexport interface IAddToListMutation extends IObjectMutation {\n\treadonly onTop: boolean;\n\treadonly position: number;\n}\n\nexport interface IObjectShiftLayerAction extends ICommand {\n\treadonly delta: number;\n}\n\nexport interface IObjectSetOnTopAction extends ICommand {\n\treadonly onTop: boolean;\n}\n\nexport interface ISetWidthAction extends ICommand {\n\treadonly width: number;\n}\n\nexport interface ISetHeightAction extends ICommand {\n\treadonly height: number;\n}\n\nexport interface ISetRatioAction extends ICommand {\n\treadonly preserveRatio: boolean;\n}\n\nexport interface IRemoveObjectMutation extends ICommand {}\nexport interface IRemoveObjectAction extends ICommand {}\n\nexport interface ISetPositionAction extends ICommand {\n\treadonly x: number;\n\treadonly y: number;\n}\n\nexport interface IObjectContentPackRemovalAction extends ICommand {\n\treadonly oldPack: ContentPack<IAsset>;\n}\n\nexport interface ICopyObjectsAction {\n\treadonly sourcePanelId: string;\n\treadonly targetPanelId: string;\n}\n","import { Module } from 'vuex';\nimport { IRootState } from '.';\n\nexport interface IUiState {\n\tvertical: boolean;\n\tnsfw: boolean;\n\tselection: string | null;\n\tlqRendering: boolean;\n\tlastDownload: string | null;\n}\n\nexport default {\n\tnamespaced: true,\n\tstate: {\n\t\tvertical: false,\n\t\tlqRendering: true,\n\t\tnsfw: false,\n\t\tselection: null,\n\t\tlastDownload: null,\n\t},\n\tmutations: {\n\t\tsetVertical(state, vertical: boolean) {\n\t\t\tstate.vertical = vertical;\n\t\t},\n\t\tsetNsfw(state, nsfw: boolean) {\n\t\t\tstate.nsfw = nsfw;\n\t\t},\n\t\tsetLqRendering(state, lqRendering: boolean) {\n\t\t\tstate.lqRendering = lqRendering;\n\t\t},\n\t\tsetSelection(state, selection: string | null) {\n\t\t\tstate.selection = selection;\n\t\t},\n\t\tsetLastDownload(state, download: string) {\n\t\t\tstate.lastDownload = download;\n\t\t},\n\t},\n} as Module<IUiState, IRootState>;\n","import {\n\tContentPack,\n\tBackground,\n\tCharacter,\n\tHeadCollections,\n\tPose,\n\tStyle,\n\tStyleClasses,\n\tStyleComponent,\n} from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\nimport { IAsset } from '.';\n\nexport function mergeContentPacks(\n\tx: ContentPack<IAsset>,\n\ty: ContentPack<IAsset>\n): ContentPack<IAsset> {\n\treturn {\n\t\tbackgrounds: mergeBackgrounds(x.backgrounds, y.backgrounds),\n\t\tcharacters: mergeCharacters<IAsset>(x.characters, y.characters),\n\t\tdependencies: mergeArrayUnique(x.dependencies, y.dependencies),\n\t\tfonts: mergeIdArrays(\n\t\t\tx.fonts,\n\t\t\ty.fonts,\n\t\t\t(obj) => obj.id,\n\t\t\t(xObj, yObj) => ({\n\t\t\t\t...xObj,\n\t\t\t\tfiles: mergeArrayUnique(xObj.files, yObj.files),\n\t\t\t})\n\t\t),\n\t\tpoemStyles: mergeIdArrays(\n\t\t\tx.poemStyles,\n\t\t\ty.poemStyles,\n\t\t\t(obj) => obj.label,\n\t\t\t() => {\n\t\t\t\tthrow new Error();\n\t\t\t}\n\t\t),\n\t\tpoemBackgrounds: [...x.poemBackgrounds, ...y.poemBackgrounds],\n\t\tsprites: mergeIdArrays(\n\t\t\tx.sprites,\n\t\t\ty.sprites,\n\t\t\t(obj) => obj.id,\n\t\t\t(xObj, yObj) => ({\n\t\t\t\tid: xObj.id,\n\t\t\t\tlabel: xObj.label,\n\t\t\t\tvariants: [...xObj.variants, ...yObj.variants],\n\t\t\t})\n\t\t),\n\t\tcolors: mergeIdArrays(\n\t\t\tx.colors,\n\t\t\ty.colors,\n\t\t\t(obj) => obj.color,\n\t\t\t(xObj) => xObj\n\t\t),\n\t};\n}\n\nfunction mergeBackgrounds<A>(\n\tx: Array<Background<A>>,\n\ty: Array<Background<A>>\n): Array<Background<A>> {\n\treturn mergeIdArrays(x, y, (obj) => obj.id, mergeBackground);\n}\n\nfunction mergeBackground<A>(x: Background<A>, y: Background<A>): Background<A> {\n\treturn {\n\t\tid: x.id,\n\t\tlabel: x.label,\n\t\tvariants: [...x.variants, ...y.variants],\n\t};\n}\n\nfunction mergeCharacters<A>(\n\tx: Array<Character<A>>,\n\ty: Array<Character<A>>\n): Array<Character<A>> {\n\treturn mergeIdArrays(x, y, (obj) => obj.id, mergeCharacter);\n}\n\nfunction mergeCharacter<A>(x: Character<A>, y: Character<A>): Character<A> {\n\treturn {\n\t\tchibi: x.chibi,\n\t\tid: x.id,\n\t\tlabel: x.label,\n\t\theads: mergeHeadCollections(x.heads, y.heads),\n\t\tstyleGroups: mergeIdArrays(\n\t\t\tx.styleGroups,\n\t\t\ty.styleGroups,\n\t\t\t(obj) => obj.id,\n\t\t\t(xStyleGroup, yStyleGroup) => {\n\t\t\t\treturn {\n\t\t\t\t\tid: xStyleGroup.id,\n\t\t\t\t\tstyleComponents: mergeIdArrays(\n\t\t\t\t\t\txStyleGroup.styleComponents,\n\t\t\t\t\t\tyStyleGroup.styleComponents,\n\t\t\t\t\t\t(obj) => obj.id,\n\t\t\t\t\t\t(xClasses, yClasses) => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tid: xClasses.id,\n\t\t\t\t\t\t\t\tlabel: xClasses.label,\n\t\t\t\t\t\t\t\tvariants: mergeStyleClasses(\n\t\t\t\t\t\t\t\t\txClasses.variants,\n\t\t\t\t\t\t\t\t\tyClasses.variants\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t),\n\t\t\t\t\tstyles: mergeIdArrays(\n\t\t\t\t\t\txStyleGroup.styles,\n\t\t\t\t\t\tyStyleGroup.styles,\n\t\t\t\t\t\t(obj) => JSON.stringify(obj.components),\n\t\t\t\t\t\t(xStyle, yStyle) => ({\n\t\t\t\t\t\t\tcomponents: xStyle.components,\n\t\t\t\t\t\t\tposes: mergeIdArrays(\n\t\t\t\t\t\t\t\txStyle.poses,\n\t\t\t\t\t\t\t\tyStyle.poses,\n\t\t\t\t\t\t\t\t(obj) => obj.id,\n\t\t\t\t\t\t\t\tmergePose\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t})\n\t\t\t\t\t),\n\t\t\t\t};\n\t\t\t}\n\t\t),\n\t};\n}\n\nfunction mergeStyleClasses<A>(\n\tx: StyleClasses<A>,\n\ty: StyleClasses<A>\n): StyleClasses<A> {\n\tconst ret: StyleClasses<A> = { ...x };\n\n\tfor (const classKey in y) {\n\t\tif (!y.hasOwnProperty(classKey)) continue;\n\t\tif (ret.hasOwnProperty(classKey)) continue;\n\t\tret[classKey] = y[classKey];\n\t}\n\n\treturn ret;\n}\n\nfunction mergePose<A>(x: Pose<A>, y: Pose<A>): Pose<A> {\n\tconst positions: Pose<A>['positions'] = { ...x.positions };\n\n\tfor (const key in y.positions) {\n\t\tif (positions[key]) {\n\t\t\tpositions[key] = [...positions[key], ...y.positions[key]] as A[][];\n\t\t} else {\n\t\t\tpositions[key] = y.positions[key];\n\t\t}\n\t}\n\n\treturn {\n\t\tid: x.id,\n\t\tcompatibleHeads: mergeArrayUnique(x.compatibleHeads, y.compatibleHeads),\n\t\tpreviewOffset: x.previewOffset,\n\t\tpreviewSize: x.previewSize,\n\t\tscale: x.scale,\n\t\tsize: x.size,\n\t\trenderCommands: x.renderCommands,\n\t\tpositions,\n\t};\n}\n\nfunction mergeHeadCollections<A>(\n\tx: HeadCollections<A>,\n\ty: HeadCollections<A>\n): HeadCollections<A> {\n\tconst ret = { ...x };\n\n\tfor (const headGroupKey in y) {\n\t\tif (!y.hasOwnProperty(headGroupKey)) continue;\n\t\tconst headGroup = y[headGroupKey];\n\t\tif (ret[headGroupKey]) {\n\t\t\tconst oldHeadGroup = ret[headGroupKey];\n\t\t\tret[headGroupKey] = {\n\t\t\t\tpreviewOffset: oldHeadGroup.previewOffset,\n\t\t\t\tpreviewSize: oldHeadGroup.previewSize,\n\t\t\t\tvariants: [...oldHeadGroup.variants, ...headGroup.variants],\n\t\t\t};\n\t\t} else {\n\t\t\tret[headGroupKey] = headGroup;\n\t\t}\n\t}\n\n\treturn ret;\n}\n\nfunction mergeArrayUnique<A>(x: A[], y: A[]): A[] {\n\tconst ret = [...x];\n\tfor (const yObj of y) {\n\t\tif (!ret.includes(yObj)) {\n\t\t\tret.push(yObj);\n\t\t}\n\t}\n\treturn ret;\n}\n\nfunction mergeIdArrays<A, B>(\n\tx: A[],\n\ty: A[],\n\tgetId: (obj: A) => B,\n\tmerge: (x: A, y: A) => A\n): A[] {\n\tconst ret = [...x];\n\tconst definedIds = new Map<B, number>(\n\t\tx.map((xObj, idx) => [getId(xObj), idx])\n\t);\n\n\tfor (const yObj of y) {\n\t\tconst yId = getId(yObj);\n\t\tif (definedIds.has(yId)) {\n\t\t\tconst existingIdx = definedIds.get(yId)!;\n\t\t\tconst existing = ret[existingIdx];\n\t\t\tret.splice(existingIdx, 1, merge(existing, yObj));\n\t\t} else {\n\t\t\tdefinedIds.set(yId, ret.length);\n\t\t\tret.push(yObj);\n\t\t}\n\t}\n\n\treturn ret;\n}\n","import { Module } from 'vuex';\nimport {\n\tContentPack,\n\tCharacter,\n\tBackground,\n} from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\nimport {\n\tassetWalker,\n\tnormalizePath,\n} from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/util';\nimport { normalizeContentPack } from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/parser';\nimport { convert as convertV1 } from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/convertV1';\n// tslint:disable-next-line: max-line-length\nimport { normalizeCharacter as normalizeCharacterV1 } from '@edave64/doki-doki-dialog-generator-pack-format/dist/v1/parser';\nimport { isWebPSupported } from '@/asset-manager';\nimport { mergeContentPacks } from './merge';\nimport { IRootState } from '..';\n\nexport interface IContentState {\n\tcontentPacks: Array<ContentPack<IAsset>>;\n\tcurrent: ContentPack<IAsset>;\n}\n\nexport interface IAsset {\n\thq: string;\n\tlq: string;\n\tsourcePack: string;\n}\n\nfunction baseDir(url: string): string {\n\treturn (\n\t\turl\n\t\t\t.split('/')\n\t\t\t.slice(0, -1)\n\t\t\t.join('/') + '/'\n\t);\n}\n\n// These types are assumed to always be supported\nconst baseTypes = new Set(['png', 'gif', 'bmp', 'svg']);\n\nexport type BackgroundLookup = Map<\n\tBackground<IAsset>['id'],\n\tBackground<IAsset>\n>;\n\nexport default {\n\tnamespaced: true,\n\tstate: {\n\t\tcontentPacks: [],\n\t\tcurrent: {\n\t\t\tdependencies: [],\n\t\t\tbackgrounds: [],\n\t\t\tcharacters: [],\n\t\t\tfonts: [],\n\t\t\tpoemStyles: [],\n\t\t\tpoemBackgrounds: [],\n\t\t\tsprites: [],\n\t\t\tcolors: [],\n\t\t},\n\t},\n\tmutations: {\n\t\tsetContentPacks(state: IContentState, packs: Array<ContentPack<IAsset>>) {\n\t\t\tstate.contentPacks = packs;\n\t\t},\n\t\tsetCurrentContent(state: IContentState, content: ContentPack<IAsset>) {\n\t\t\tstate.current = content;\n\t\t},\n\t},\n\tactions: {\n\t\tasync contentPack({ commit, state }, contentPack: ContentPack<string>) {\n\t\t\tconst convertedPack = (await convertContentPack(\n\t\t\t\tcontentPack\n\t\t\t)) as ContentPack<IAsset>;\n\t\t\tcommit('setContentPacks', [...state.contentPacks, convertedPack]);\n\t\t\tcommit(\n\t\t\t\t'setCurrentContent',\n\t\t\t\tmergeContentPacks(state.current, convertedPack)\n\t\t\t);\n\t\t},\n\n\t\tasync removeContentPacks({ commit, state }, packIds: Set<string>) {\n\t\t\tconst newContentPacks = state.contentPacks.filter(\n\t\t\t\tpack => !packIds.has(pack.packId!)\n\t\t\t);\n\t\t\tcommit('setContentPacks', newContentPacks);\n\t\t\tcommit(\n\t\t\t\t'setCurrentContent',\n\t\t\t\t(newContentPacks as Array<ContentPack<IAsset>>).reduce((acc, value) =>\n\t\t\t\t\tmergeContentPacks(acc, value)\n\t\t\t\t)\n\t\t\t);\n\t\t},\n\n\t\tasync replaceContentPack(\n\t\t\t{ commit, state },\n\t\t\taction: ReplaceContentPackAction\n\t\t) {\n\t\t\tconst convertedPack = action.processed\n\t\t\t\t? action.contentPack\n\t\t\t\t: await convertContentPack(action.contentPack);\n\t\t\tconst packs = state.contentPacks;\n\t\t\tconst packIdx = packs.findIndex(\n\t\t\t\tpack => pack.packId === action.contentPack.packId\n\t\t\t);\n\t\t\tif (packIdx === -1) {\n\t\t\t\tpacks.push(convertedPack);\n\t\t\t} else {\n\t\t\t\tpacks.splice(packIdx, 1, convertedPack);\n\t\t\t}\n\t\t\tcommit('setContentPacks', packs);\n\t\t\tcommit(\n\t\t\t\t'setCurrentContent',\n\t\t\t\t(packs as Array<ContentPack<IAsset>>).reduce((acc, value) =>\n\t\t\t\t\tmergeContentPacks(acc, value)\n\t\t\t\t)\n\t\t\t);\n\t\t},\n\n\t\tasync loadContentPacks({ dispatch }, urls: string | string[]) {\n\t\t\tif (typeof urls === 'string') {\n\t\t\t\turls = [urls];\n\t\t\t}\n\t\t\tconst contentPacks = await Promise.all(\n\t\t\t\turls.map(async url => {\n\t\t\t\t\tconst response = await fetch(url);\n\t\t\t\t\tif (!response.ok) {\n\t\t\t\t\t\terror(\n\t\t\t\t\t\t\t`Could not load content pack. Server responded with: ${response.statusText}`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tlet json;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tjson = await response.json();\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\terror('Content pack is not valid json!');\n\t\t\t\t\t}\n\n\t\t\t\t\tlet contentPack: ContentPack<string>;\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst paths = {\n\t\t\t\t\t\t\t'./': baseDir(url),\n\t\t\t\t\t\t\t'/': baseDir(location.href) + 'assets/',\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif (json.version === '2.0') {\n\t\t\t\t\t\t\tcontentPack = normalizeContentPack(json, paths) as ContentPack<\n\t\t\t\t\t\t\t\tstring\n\t\t\t\t\t\t\t>;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tcontentPack = convertV1(\n\t\t\t\t\t\t\t\tnormalizeCharacterV1(json, paths),\n\t\t\t\t\t\t\t\tpaths,\n\t\t\t\t\t\t\t\tfalse\n\t\t\t\t\t\t\t) as ContentPack<string>;\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\terror('Content pack is not in a valid format!', e);\n\t\t\t\t\t}\n\t\t\t\t\treturn contentPack;\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tfor (const contentPack of contentPacks) {\n\t\t\t\tawait dispatch('contentPack', contentPack);\n\t\t\t}\n\n\t\t\treturn contentPacks.map(x => x.packId);\n\t\t},\n\t},\n\tgetters: {\n\t\tgetCharacters({\n\t\t\tcurrent,\n\t\t}): Map<Character<IAsset>['id'], Character<IAsset>> {\n\t\t\tconst ret = new Map<Character<IAsset>['id'], Character<IAsset>>();\n\t\t\tfor (const character of current.characters) {\n\t\t\t\tret.set(character.id, character);\n\t\t\t}\n\t\t\treturn ret;\n\t\t},\n\t\tgetBackgrounds({ current }): BackgroundLookup {\n\t\t\tconst ret = new Map<Background<IAsset>['id'], Background<IAsset>>();\n\t\t\tfor (const background of current.backgrounds) {\n\t\t\t\tret.set(background.id, background);\n\t\t\t}\n\t\t\treturn ret;\n\t\t},\n\t},\n} as Module<IContentState, IRootState>;\n\nasync function convertContentPack(\n\tpack: ContentPack<string>\n): Promise<ContentPack<IAsset>> {\n\tconst types: ReadonlySet<string> = new Set(\n\t\t(await isWebPSupported()) ? ['webp', ...baseTypes] : baseTypes\n\t);\n\n\tconst replacementMap = new Map([\n\t\t['ext', '{lq:.lq:}.{format:webp:webp:png:png}'],\n\t]);\n\n\tconst ret = assetWalker(\n\t\tpack,\n\t\t(path: string, type: 'image' | 'font'): IAsset => {\n\t\t\tconst hq = normalizePath(path, replacementMap, types, false);\n\t\t\tconst lq = normalizePath(path, replacementMap, types, true);\n\n\t\t\treturn {\n\t\t\t\thq,\n\t\t\t\tlq,\n\t\t\t\tsourcePack: pack.packId || 'buildIn',\n\t\t\t};\n\t\t}\n\t) as ContentPack<IAsset>;\n\treturn ret;\n}\n\nfunction error(msg: string, payload?: any): never {\n\tconsole.error(msg, payload);\n\tthrow new Error(msg);\n}\n\n// tslint:disable: indent\nexport type ReplaceContentPackAction =\n\t| {\n\t\t\tcontentPack: ContentPack<string>;\n\t\t\tprocessed: false;\n\t  }\n\t| {\n\t\t\tcontentPack: ContentPack<IAsset>;\n\t\t\tprocessed: true;\n\t  };\n// tslint:enable: indent\n","import Vue from 'vue';\nimport Vuex from 'vuex';\nimport objects, { IObjectsState } from './objects';\nimport ui, { IUiState } from './ui';\nimport panels, { IPanels } from './panels';\nimport content, { IContentState, IAsset } from './content';\nimport { ContentPack } from '@edave64/doki-doki-dialog-generator-pack-format/dist/v2/model';\n\nVue.use(Vuex);\n\nexport interface IRootState {\n\tobjects: IObjectsState;\n\tui: IUiState;\n\tpanels: IPanels;\n\tcontent: IContentState;\n\tunsafe: boolean;\n}\n\nexport default new Vuex.Store<IRootState>({\n\tmodules: {\n\t\tobjects,\n\t\tui,\n\t\tpanels,\n\t\tcontent,\n\t},\n\tstate: {\n\t\tunsafe: false,\n\t} as any,\n\tmutations: {\n\t\tsetUnsafe(state, unsafe: boolean) {},\n\t},\n\tactions: {\n\t\tasync removePacks(\n\t\t\t{ dispatch, commit, state },\n\t\t\t{ packs }: IRemovePacksAction\n\t\t) {\n\t\t\tconst oldState: ContentPack<IAsset> = JSON.parse(\n\t\t\t\tJSON.stringify(state.content.current)\n\t\t\t);\n\n\t\t\tcommit('setUnsafe', true);\n\t\t\tawait dispatch('content/removeContentPacks', packs);\n\t\t\tawait dispatch('panels/fixContentPackRemoval', oldState);\n\t\t\tawait dispatch('objects/fixContentPackRemoval', oldState);\n\t\t\tcommit('setUnsafe', false);\n\t\t},\n\t},\n});\n\nexport interface IRemovePacksAction {\n\tpacks: Set<string>;\n}\n","import { IHistoryOptions } from '@/plugins/vuex-history';\n\nexport default {\n\tmutations: {},\n} as IHistoryOptions;\n","import { IHistoryOptions } from '@/plugins/vuex-history';\nimport SpriteHistoryOptions from './objectTypes/sprite_history_properties';\n\nexport default {\n\tmutations: {\n\t\t'objects/*': {\n\t\t\tcombinable: (oldMut, newMut) =>\n\t\t\t\toldMut.type === newMut.type && oldMut.payload.id === newMut.payload.id,\n\t\t},\n\t\t'objects/create': {\n\t\t\tcombinable: () => false,\n\t\t},\n\t\t'objects/removeObject': {\n\t\t\tcombinable: () => false,\n\t\t},\n\t\t...SpriteHistoryOptions.mutations,\n\t},\n} as IHistoryOptions;\n","import Vue from 'vue';\r\nimport Vuex from 'vuex';\r\nimport History from './plugins/vuex-history';\r\nimport App from './App.vue';\r\nimport store from '@/store';\r\n// import './registerServiceWorker';\r\nimport ObjectsHistoryProperties from './store/objects_history_properties';\r\nimport { VueErrorEvent } from '@/eventbus/event-bus';\r\n\r\nVue.config.productionTip = false;\r\n/*\r\nVue.config.errorHandler = async (err, vm, info) => {\r\n\t// handle error\r\n\t// `info` is a Vue-specific error info, e.g. which lifecycle hook\r\n\t// the error was found in. Only available in 2.2.0+\r\n\tconst eventBus = (await import('./eventbus/event-bus')).default;\r\n\teventBus.fire(new VueErrorEvent(err, info));\r\n};*/\r\n\r\nVue.use(Vuex);\r\nVue.use(History, {\r\n\tmutations: {\r\n\t\t...ObjectsHistoryProperties.mutations,\r\n\t},\r\n});\r\n\r\nnew Vue({\r\n\tstore: store as any,\r\n\trender: h => h(App),\r\n}).$mount('#app');\r\n","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./choice.vue?vue&type=style&index=0&id=22068303&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./choice.vue?vue&type=style&index=0&id=22068303&lang=scss&scoped=true&\"","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./opacity.vue?vue&type=style&index=0&id=28c7d1e4&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./opacity.vue?vue&type=style&index=0&id=28c7d1e4&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.visible)?_c('div',{class:{ vertical: _vm.vertical },on:{\"dragleave\":function($event){_vm.visible = false},\"drop\":_vm.drop}},[_vm._t(\"default\")],2):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\nimport { Component, Mixins, Vue, Prop } from 'vue-property-decorator';\nimport { Store } from 'vuex';\nimport { IRootState } from '@/store';\nimport { State } from 'vuex-class-decorator';\n\n@Component({})\nexport default class Drop extends Vue {\n\tpublic $store!: Store<IRootState>;\n\n\t@State('vertical', { namespace: 'ui' }) private readonly vertical!: boolean;\n\n\tprivate visible = false;\n\n\tpublic show(): void {\n\t\tthis.visible = true;\n\t}\n\n\tpublic hide(): void {\n\t\tthis.visible = false;\n\t}\n\n\tprivate drop(e: DragEvent): void {\n\t\tthis.hide();\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\n\t\tif (!e.dataTransfer) return;\n\n\t\tfor (const item of e.dataTransfer.items) {\n\t\t\tif (item.kind === 'file' && item.type.match(/image.*/)) {\n\t\t\t\tthis.$emit('drop', item.getAsFile());\n\t\t\t}\n\t\t}\n\t}\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drop-target.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./drop-target.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./drop-target.vue?vue&type=template&id=637fa60f&scoped=true&\"\nimport script from \"./drop-target.vue?vue&type=script&lang=ts&\"\nexport * from \"./drop-target.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./drop-target.vue?vue&type=style&index=0&id=637fa60f&lang=css&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"637fa60f\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./backgrounds.vue?vue&type=style&index=0&id=2a0aba90&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./backgrounds.vue?vue&type=style&index=0&id=2a0aba90&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalDialog.vue?vue&type=style&index=0&id=18f0bcd0&scoped=true&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ModalDialog.vue?vue&type=style&index=0&id=18f0bcd0&scoped=true&lang=scss&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./text.vue?vue&type=style&index=0&id=dc167444&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./text.vue?vue&type=style&index=0&id=dc167444&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./message-console.vue?vue&type=style&index=0&id=449eca3e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./message-console.vue?vue&type=style&index=0&id=449eca3e&lang=scss&scoped=true&\"","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sliderGroup.vue?vue&type=style&index=0&id=00efe5f9&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sliderGroup.vue?vue&type=style&index=0&id=00efe5f9&lang=scss&scoped=true&\"","import { RenderContext } from './rendererContext';\nimport { RenderAbortedException } from './renderAbortedException';\nimport environment from '@/environments/environment';\nimport { screenWidth, screenHeight } from '@/constants/base';\n\nexport class Renderer {\n\tprivate previewCanvas: HTMLCanvasElement;\n\tprivate runningContext: RenderContext | null = null;\n\n\tpublic constructor(w: number = screenWidth, h: number = screenHeight) {\n\t\tthis.previewCanvas = document.createElement('canvas');\n\t\tthis.previewCanvas.width = w;\n\t\tthis.previewCanvas.height = h;\n\t}\n\n\tpublic async render(\n\t\trenderCallback: (rc: RenderContext) => Promise<void>,\n\t\thq: boolean = true\n\t): Promise<boolean> {\n\t\tif (this.runningContext) {\n\t\t\tthis.runningContext.abort();\n\t\t}\n\n\t\tconst ctx = this.previewCanvas.getContext('2d')!;\n\t\tctx.clearRect(0, 0, this.previewCanvas.width, this.previewCanvas.height);\n\t\tconst context = (this.runningContext = new RenderContext(ctx, hq, true));\n\t\ttry {\n\t\t\tawait renderCallback(this.runningContext);\n\t\t} catch (e) {\n\t\t\tif (e instanceof RenderAbortedException) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthrow e;\n\t\t} finally {\n\t\t\tif (context === this.runningContext) {\n\t\t\t\tthis.runningContext = null;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tpublic get width(): number {\n\t\treturn this.previewCanvas.width;\n\t}\n\n\tpublic get height(): number {\n\t\treturn this.previewCanvas.height;\n\t}\n\n\tpublic paintOnto(\n\t\tc: CanvasRenderingContext2D,\n\t\tx: number,\n\t\ty: number,\n\t\tw?: number,\n\t\th?: number\n\t) {\n\t\tif (w && h) {\n\t\t\tc.drawImage(this.previewCanvas, x, y, w, h);\n\t\t} else {\n\t\t\tc.drawImage(this.previewCanvas, x, y);\n\t\t}\n\t}\n\n\tpublic async download(\n\t\trenderCallback: (rc: RenderContext) => Promise<void>,\n\t\tfilename: string\n\t): Promise<string> {\n\t\tconst downloadCanvas = document.createElement('canvas');\n\t\tdownloadCanvas.width = this.previewCanvas.width;\n\t\tdownloadCanvas.height = this.previewCanvas.height;\n\n\t\tconst ctx = downloadCanvas.getContext('2d')!;\n\t\tctx.clearRect(0, 0, this.previewCanvas.width, this.previewCanvas.height);\n\t\tawait renderCallback(new RenderContext(ctx, true, false));\n\n\t\treturn environment.saveToFile(downloadCanvas, filename);\n\t}\n\n\tpublic async renderToBlob(\n\t\trenderCallback: (rc: RenderContext) => Promise<void>\n\t): Promise<Blob> {\n\t\tconst downloadCanvas = document.createElement('canvas');\n\t\tdownloadCanvas.width = this.previewCanvas.width;\n\t\tdownloadCanvas.height = this.previewCanvas.height;\n\n\t\tconst ctx = downloadCanvas.getContext('2d')!;\n\t\tctx.clearRect(0, 0, this.previewCanvas.width, this.previewCanvas.height);\n\t\tawait renderCallback(new RenderContext(ctx, true, false));\n\t\treturn await new Promise<Blob>((resolve, reject) => {\n\t\t\tdownloadCanvas.toBlob(blob => {\n\t\t\t\tif (blob) resolve(blob);\n\t\t\t\telse reject();\n\t\t\t});\n\t\t});\n\t}\n\n\tpublic getDataAt(x: number, y: number): Uint8ClampedArray {\n\t\tconst ctx = this.previewCanvas.getContext('2d');\n\n\t\treturn ctx!.getImageData(x, y, 1, 1).data;\n\t}\n}\n","// tslint:disable: no-magic-numbers\nexport const screenWidth = 1280;\nexport const screenHeight = 720;\n\nexport const positions = [\n\t'4-1',\n\t'3-1',\n\t'2-1',\n\t'4-2',\n\t'center',\n\t'4-3',\n\t'2-2',\n\t'3-3',\n\t'4-4',\n];\n\nexport const characterPositions = [\n\t200,\n\t240,\n\t400,\n\t493,\n\t640,\n\t786,\n\t880,\n\t1040,\n\t1080,\n];\n"],"sourceRoot":""}