{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/components/panels/character.vue?ef28","webpack:///./src/components/panels/add.vue?fbdc","webpack:///./src/components/panels/sprite.vue?0b11","webpack:///./src/App.vue?926f","webpack:///./src/components/panels/backgrounds.vue?721e","webpack:///./src/components/panels/general.vue?b445","webpack:///./src/components/DokiButton.vue?d8da","webpack:///./src/App.vue?afa1","webpack:///./src/components/DokiButton.vue?6945","webpack:///./src/components/DokiButton.vue?b2fb","webpack:///./src/components/DokiButton.vue?4a2f","webpack:///./src/components/DokiButton.vue","webpack:///./src/components/panels/general.vue?3075","webpack:///./src/components/Toggle.vue?5c1f","webpack:///./src/components/Toggle.vue?459d","webpack:///./src/components/Toggle.vue?2b98","webpack:///./src/components/Toggle.vue","webpack:///./src/components/panels/general.vue?9cc8","webpack:///./src/asset-manager.ts","webpack:///./src/components/panels/general.vue?db34","webpack:///./src/components/panels/general.vue","webpack:///./src/components/panels/add.vue?dca8","webpack:///./src/models/background.ts","webpack:///./src/models/variant-background.ts","webpack:///./src/components/panels/add.vue?1ebe","webpack:///./src/components/panels/add.vue?f816","webpack:///./src/components/panels/add.vue","webpack:///./src/components/panels/character.vue?7cca","webpack:///./src/models/constants.ts","webpack:///./src/renderer/renderAbortedException.ts","webpack:///./src/renderer/rendererContext.ts","webpack:///./src/renderer/renderer.ts","webpack:///./src/models/character.ts","webpack:///./src/components/panels/character.vue?e10f","webpack:///./src/components/panels/character.vue?a2c7","webpack:///./src/components/panels/character.vue","webpack:///./src/components/panels/sprite.vue?fa18","webpack:///./src/models/sprite.ts","webpack:///./src/components/panels/sprite.vue?31ef","webpack:///./src/components/panels/sprite.vue?35a0","webpack:///./src/components/panels/sprite.vue","webpack:///./src/components/panels/credits.vue?0eea","webpack:///./src/components/panels/credits.vue?7293","webpack:///./src/components/panels/credits.vue?9bdc","webpack:///./src/components/panels/credits.vue","webpack:///./src/components/panels/backgrounds.vue?e2a0","webpack:///./src/components/panels/backgrounds.vue?aa62","webpack:///./src/components/panels/backgrounds.vue?ceea","webpack:///./src/components/panels/backgrounds.vue","webpack:///./src/models/textbox.ts","webpack:///./src/App.vue?ec60","webpack:///./src/App.vue?640d","webpack:///./src/App.vue","webpack:///./src/main.ts","webpack:///./src/components/Toggle.vue?720b"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","ref","style","width","canvasWidth","height","canvasHeight","on","onUiClick","onTouchStart","onDragStart","onSpriteDragMove","onSpriteDrop","onDragOver","onDrop","onMouseEnter","_v","class","vertical","active","panel","$event","download","textbox","lqRendering","_e","onCharacterCreate","onAssetCreate","invalidateRender","model","callback","$$v","currentBackground","expression","selectedCharacter","onObjectLayerShift","selectedSprite","staticRenderFns","staticClass","$emit","_t","components","component","options","$set","directives","rawName","$$selectedVal","Array","filter","target","selected","map","val","_value","multiple","domProps","composing","_m","_uid","onChange","_s","label","event","$refs","checkbox","checked","type","String","Boolean","default","talking","required","Toggle","webpSupportPromise","undefined","isWebPSupported","_l","character","id","toLowerCase","assetPath","upload","click","onFileUpload","path","custom","rx","getAsset","hq","image","x","y","drawImage","color","render","drawRect","w","h","fill","transparent","preview","basefolder","variants","variantI","variant","img","replace","Promise","all","assets","asset","characterOrder","resolve","reject","losslessCode","document","createElement","addEventListener","src","assetCache","customAssets","url","Image","crossOrigin","display","body","appendChild","registerAsset","file","URL","createObjectURL","backgrounds","customAssetCount","internalId","e","uploadInput","files","nr","hasMultiplePoses","parts","posel","poser","part","partl","captialize","partr","allowFreeMove","modifiers","_n","$forceUpdate","pos","move","characterPositions","fsCtx","aborted","text","align","col","ocol","font","fillStyle","strokeStyle","lineWidth","textAlign","lineJoin","strokeText","fillText","params","flip","save","shadow","shadowColor","blur","shadowBlur","offsetX","shadowOffsetX","offsetY","shadowOffsetY","translate","scale","paintOnto","restore","outline","beginPath","rect","stroke","str","measureText","runningContext","previewCanvas","renderCallback","abort","ctx","getContext","clearRect","context","filename","downloadCanvas","toDataURL","navigator","msSaveOrOpenBlob","setAttribute","removeChild","msSaveBlob","dataURItoBlob","getImageData","dataURI","binary","atob","split","array","charCodeAt","Blob","Uint8Array","invalidator","infront","close","lq","poseId","posePositions","left","right","head","headType","localRenderer","dirty","hitDetectionFallback","freeMove","pPos","pX","pY","pose","compatibleHeads","partKeys","getParts","poseFolder","folder","headFolder","currentHeads","static","headAsset","bodyParts","drawHead","headAnchor","headInForeground","bodyPart","updateLocalCanvas","zoom","size","hx","hy","getDataAt","DOMException","message","includes","Math","abs","headl","headr","oldHeadCollection","poses","newHeadCollectionNr","indexOf","sorted","idx","sort","a","b","heads","allow","closestCharacterSlot","charAt","toUpperCase","substring","sprite","assetName","then","catch","err","console","error","hitX","hitY","colorBackground","background","backgroundImage","customPathLookup","customBGCount","corrupted","showControls","allowSkipping","showContinueArrow","customName","dialog","drawText","renderText","line","cl","f","ct","cb","characters","characterSelectorOpen","backgroundSelectorOpen","editDialog","renderer","showUI","loaded","uiSize","queuedRender","dropSpriteCount","dropPreventClick","draggedObject","dragXOffset","dragYOffset","dragXOriginal","dragYOriginal","newCharacter","oldCharacter","unselect","select","newSprite","oldSprite","newPanel","requestAnimationFrame","render_","cancelAnimationFrame","completed","cats","removeEventListener","onKeydown","sd","sdCtx","updateArea","keyCode","alert","sw","sh","rh","rw","opth","optimum","optv","optimizeWithMenu","innerWidth","innerHeight","cw","ch","v","$nextTick","offsetLeft","ry","offsetTop","sx","offsetWidth","sy","selectedObject","toRendererCoordinate","clientX","clientY","objectsAt","currentCharacterIdx","Error","hitTest","targetIdx","unshift","preventDefault","touches","stopPropagation","dataTransfer","dropEffect","MouseEvent","deltaX","deltaY","shiftKey","items","item","kind","match","getAsFile","TouchEvent","buttons","log","deep","DokiButton","GeneralPanel","AddPanel","BackgroundsPanel","CreditsPanel","CharacterPanel","SpritePanel","config","productionTip","$mount"],"mappings":"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","file":"js/app.2f56e29b.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/Doki-Doki-Dialog-Generator/beta/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./character.vue?vue&type=style&index=0&id=07229d90&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./character.vue?vue&type=style&index=0&id=07229d90&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=style&index=0&id=95f33d28&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=style&index=0&id=95f33d28&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sprite.vue?vue&type=style&index=0&id=4cc23cc2&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sprite.vue?vue&type=style&index=0&id=4cc23cc2&lang=scss&scoped=true&\"","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=scss&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./backgrounds.vue?vue&type=style&index=0&id=54d66c26&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./backgrounds.vue?vue&type=style&index=0&id=54d66c26&lang=scss&scoped=true&\"","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./general.vue?vue&type=style&index=0&id=295f8d4b&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./general.vue?vue&type=style&index=0&id=295f8d4b&lang=scss&scoped=true&\"","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DokiButton.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DokiButton.vue?vue&type=style&index=0&lang=scss&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('div',{attrs:{\"id\":\"container\"}},[_c('canvas',{ref:\"sd\",style:({width: _vm.canvasWidth+ 'px', height: _vm.canvasHeight + 'px'}),attrs:{\"id\":\"scaled_display\",\"height\":\"720\",\"width\":\"1280\",\"draggable\":\"\"},on:{\"click\":_vm.onUiClick,\"touchstart\":_vm.onTouchStart,\"dragstart\":_vm.onDragStart,\"touchmove\":_vm.onSpriteDragMove,\"mousemove\":_vm.onSpriteDragMove,\"touchend\":_vm.onSpriteDrop,\"mouseup\":_vm.onSpriteDrop,\"dragover\":_vm.onDragOver,\"drop\":_vm.onDrop,\"mouseenter\":_vm.onMouseEnter}},[_vm._v(\"HTML5 is required to use the Doki Doki Dialog Generator.\")])]),_c('div',{class:{ vertical: _vm.vertical },attrs:{\"id\":\"panels\"}},[_c('div',{attrs:{\"id\":\"toolbar\"}},[_c('button',{class:{ active: _vm.panel === 'add' },on:{\"click\":function($event){_vm.panel = _vm.panel === 'add' ? '' : 'add'}}},[_vm._v(\"A\")]),_c('button',{class:{ active: _vm.panel === 'backgrounds' },on:{\"click\":function($event){_vm.panel = _vm.panel === 'backgrounds' ? '' : 'backgrounds'}}},[_vm._v(\"B\")]),_c('button',{class:{ active: _vm.panel === 'credits' },on:{\"click\":function($event){_vm.panel = _vm.panel === 'credits' ? '' : 'credits'}}},[_vm._v(\"C\")]),_c('button',{on:{\"click\":_vm.download}},[_vm._v(\"D\")])]),_c('keep-alive',[(_vm.panel === '')?_c('general-panel',{attrs:{\"options\":_vm.textbox,\"vertical\":_vm.vertical,\"lqRendering\":_vm.lqRendering},on:{\"update:lqRendering\":function($event){_vm.lqRendering=$event},\"update:lq-rendering\":function($event){_vm.lqRendering=$event}}}):_vm._e(),(_vm.panel === 'add')?_c('add-panel',{attrs:{\"vertical\":_vm.vertical},on:{\"chosen\":_vm.onCharacterCreate,\"add-custom-asset\":_vm.onAssetCreate}}):_vm._e(),(_vm.panel === 'backgrounds')?_c('backgrounds-panel',{attrs:{\"vertical\":_vm.vertical},on:{\"invalidate-render\":_vm.invalidateRender},model:{value:(_vm.currentBackground),callback:function ($$v) {_vm.currentBackground=$$v},expression:\"currentBackground\"}}):_vm._e(),(_vm.panel === 'credits')?_c('credits-panel',{attrs:{\"vertical\":_vm.vertical}}):_vm._e(),(_vm.panel === 'character')?_c('character-panel',{attrs:{\"vertical\":_vm.vertical,\"character\":_vm.selectedCharacter},on:{\"shiftLayer\":_vm.onObjectLayerShift,\"invalidate-render\":_vm.invalidateRender}}):_vm._e(),(_vm.panel === 'sprite')?_c('sprite-panel',{attrs:{\"vertical\":_vm.vertical,\"sprite\":_vm.selectedSprite},on:{\"shiftLayer\":_vm.onObjectLayerShift,\"invalidate-render\":_vm.invalidateRender}}):_vm._e()],1)],1)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"btn\",on:{\"click\":function($event){return _vm.$emit('click')}}},[_vm._t(\"default\")],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\r\nimport { Component, Vue, Prop } from 'vue-property-decorator';\r\n\r\n@Component({\r\n\tcomponents: {},\r\n})\r\nexport default class DokiButton extends Vue {}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DokiButton.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DokiButton.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./DokiButton.vue?vue&type=template&id=4804457c&\"\nimport script from \"./DokiButton.vue?vue&type=script&lang=ts&\"\nexport * from \"./DokiButton.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./DokiButton.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ panel: true, vertical: _vm.vertical }},[_c('h1',[_vm._v(\"General\")]),_c('toggle',{attrs:{\"label\":\"Low quality preview?\",\"title\":\"Reduces the quality of the preview images to speed up the user experience and consume less data. Does not effect final render.\",\"value\":_vm.lqRendering},on:{\"input\":function($event){return _vm.$emit('update:lqRendering', $event)}}}),_c('toggle',{attrs:{\"label\":\"Textbox visible?\"},model:{value:(_vm.options.display),callback:function ($$v) {_vm.$set(_vm.options, \"display\", $$v)},expression:\"options.display\"}}),_c('toggle',{attrs:{\"label\":\"Textbox corrupt?\"},model:{value:(_vm.options.corrupted),callback:function ($$v) {_vm.$set(_vm.options, \"corrupted\", $$v)},expression:\"options.corrupted\"}}),_c('div',[_c('label',{attrs:{\"for\":\"current_talking\"}},[_vm._v(\"Person talking:\")]),_c('br'),_c('select',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.options.talking),expression:\"options.talking\"}],attrs:{\"id\":\"current_talking\"},on:{\"change\":function($event){var $$selectedVal = Array.prototype.filter.call($event.target.options,function(o){return o.selected}).map(function(o){var val = \"_value\" in o ? o._value : o.value;return val}); _vm.$set(_vm.options, \"talking\", $event.target.multiple ? $$selectedVal : $$selectedVal[0])}}},[_c('option',{attrs:{\"value\":\"\"}},[_vm._v(\"No-one\")]),_c('option',{attrs:{\"value\":\"Sayori\"}},[_vm._v(\"Sayori\")]),_c('option',{attrs:{\"value\":\"Yuri\"}},[_vm._v(\"Yuri\")]),_c('option',{attrs:{\"value\":\"Natsuki\"}},[_vm._v(\"Natsuki\")]),_c('option',{attrs:{\"value\":\"Monika\"}},[_vm._v(\"Monika\")]),_c('option',{attrs:{\"value\":\"FeMC\"}},[_vm._v(\"FeMC\")]),_c('option',{attrs:{\"value\":\"MC\"}},[_vm._v(\"MC\")]),_c('option',{attrs:{\"value\":\"Amy\"}},[_vm._v(\"Amy\")]),_c('option',{attrs:{\"value\":\"other\"}},[_vm._v(\"Other\")])])]),_c('div',[_c('label',{attrs:{\"for\":\"custom_name\"}},[_vm._v(\"Other name:\")]),_c('br'),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.options.customName),expression:\"options.customName\"}],attrs:{\"id\":\"custom_name\"},domProps:{\"value\":(_vm.options.customName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.options, \"customName\", $event.target.value)}}})]),_c('toggle',{attrs:{\"label\":\"Controls visible?\"},model:{value:(_vm.options.showControls),callback:function ($$v) {_vm.$set(_vm.options, \"showControls\", $$v)},expression:\"options.showControls\"}}),_c('toggle',{attrs:{\"label\":\"Able to skip?\"},model:{value:(_vm.options.allowSkipping),callback:function ($$v) {_vm.$set(_vm.options, \"allowSkipping\", $$v)},expression:\"options.allowSkipping\"}}),_c('toggle',{attrs:{\"label\":\"Continue arrow?\"},model:{value:(_vm.options.showContinueArrow),callback:function ($$v) {_vm.$set(_vm.options, \"showContinueArrow\", $$v)},expression:\"options.showContinueArrow\"}}),_c('div',{attrs:{\"id\":\"dialog_text_wrapper\"}},[_c('label',{attrs:{\"for\":\"dialog_text\"}},[_vm._v(\"Dialog:\")]),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.options.dialog),expression:\"options.dialog\"}],attrs:{\"id\":\"dialog_text\"},domProps:{\"value\":(_vm.options.dialog)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.$set(_vm.options, \"dialog\", $event.target.value)}}})]),_vm._m(0)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"Formatting:\"),_c('br'),_vm._v(\"\\n\\t\\t[In brackets] for editied style text\\n\\t\")])}]\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('input',{ref:\"checkbox\",attrs:{\"id\":_vm._uid,\"type\":\"checkbox\"},domProps:{\"checked\":_vm.value},on:{\"change\":_vm.onChange}}),_c('label',{attrs:{\"for\":_vm._uid}},[_vm._v(_vm._s(_vm.label))])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\r\nimport { Component, Vue, Prop } from 'vue-property-decorator';\r\n\r\n@Component({\r\n\tcomponents: {},\r\n})\r\nexport default class Toggle extends Vue {\r\n\t@Prop({ type: String }) private label!: string | undefined;\r\n\t@Prop({ type: Boolean, default: false }) private value!: boolean;\r\n\r\n\tprivate onChange(event: Event) {\r\n\t\tthis.$emit('input', !!(this.$refs.checkbox as HTMLInputElement).checked);\r\n\t}\r\n\r\n\tprivate get checkbox(): HTMLInputElement {\r\n\t\treturn this.$refs.checkbox as HTMLInputElement;\r\n\t}\r\n}\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Toggle.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Toggle.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Toggle.vue?vue&type=template&id=7e803566&scoped=true&\"\nimport script from \"./Toggle.vue?vue&type=script&lang=ts&\"\nexport * from \"./Toggle.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Toggle.vue?vue&type=style&index=0&id=7e803566&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7e803566\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop, Watch } from 'vue-property-decorator';\nimport { Textbox } from '../../models/textbox';\nimport Toggle from '../Toggle.vue';\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t},\n})\nexport default class GeneralPanel extends Vue {\n\t@Prop({ required: true }) private readonly options!: Textbox;\n\t@Prop({ required: true, type: Boolean }) private readonly vertical!: boolean;\n\t@Prop({ required: true, type: Boolean })\n\tprivate readonly lqRendering!: boolean;\n\n\t@Watch('options.customName')\n\tprivate talkingChange(): void {\n\t\tthis.options.talking = 'other';\n\t}\n}\n","import { Background, transparent } from './models/background';\nimport Sayori from './characters/sayori.json';\nimport Yuri from './characters/yuri.json';\nimport Monika from './characters/monika.json';\nimport Natsuki from './characters/natsuki.json';\nimport FeMC from './characters/femc.json';\nimport MC from './characters/mc.json';\nimport MCChad from './characters/mc_chad.json';\nimport MCClassic from './characters/mc_classic.json';\nimport Amy from './characters/amy.json';\nimport AmyClassic from './characters/amy_classic.json';\nimport { VariantBackground } from './models/variant-background';\n\nexport const characterOrder = ([\n\tMonika,\n\tNatsuki,\n\tSayori,\n\tYuri,\n\tFeMC,\n\tMC,\n\tMCChad,\n\tMCClassic,\n\tAmy,\n\tAmyClassic,\n] as any) as Array<ICharacter<any>>;\n\nexport const characters: { [name: string]: ICharacter<any> } = {\n\t[Sayori.id]: Sayori as any,\n\t[Yuri.id]: Yuri as any,\n\t[Natsuki.id]: Natsuki as any,\n\t[Monika.id]: Monika as any,\n\t[FeMC.id]: FeMC as any,\n\t[MC.id]: MC as any,\n\t[MCChad.id]: MCChad as any,\n\t[MCClassic.id]: MCClassic as any,\n\t[Amy.id]: Amy as any,\n\t[AmyClassic.id]: AmyClassic as any,\n};\n\nlet webpSupportPromise: Promise<boolean>;\n\nexport function isWebPSupported(): Promise<boolean> {\n\tif (!webpSupportPromise) {\n\t\twebpSupportPromise = new Promise((resolve, reject) => {\n\t\t\tconst losslessCode =\n\t\t\t\t'data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=';\n\t\t\tconst img = document.createElement('img');\n\t\t\timg.addEventListener('load', () => {\n\t\t\t\tresolve(img.width === 2 && img.height === 1);\n\t\t\t});\n\t\t\timg.addEventListener('error', () => {\n\t\t\t\tresolve(false);\n\t\t\t});\n\t\t\timg.src = losslessCode;\n\t\t});\n\t}\n\treturn webpSupportPromise;\n}\n\nconst assetCache: { [url: string]: Promise<HTMLImageElement> } = {};\nconst customAssets: { [id: string]: Promise<HTMLImageElement> } = {};\n\nexport async function getAsset(\n\tasset: string,\n\thq: boolean = true\n): Promise<HTMLImageElement> {\n\tif (customAssets[asset]) {\n\t\treturn customAssets[asset];\n\t}\n\n\tconst url = `${process.env.BASE_URL}/assets/${asset}${hq ? '' : '.lq'}${\n\t\t(await isWebPSupported()) ? '.webp' : '.png'\n\t}`.replace(/\\/+/, '/');\n\n\tif (!assetCache[url]) {\n\t\tassetCache[url] = new Promise((resolve, reject) => {\n\t\t\tconst img = new Image();\n\t\t\timg.addEventListener('load', () => {\n\t\t\t\tresolve(img);\n\t\t\t});\n\t\t\timg.addEventListener('error', () => {\n\t\t\t\treject(`Failed to load \"${url}\"`);\n\t\t\t});\n\t\t\timg.crossOrigin = 'Anonymous';\n\t\t\timg.src = url;\n\t\t\timg.style.display = 'none';\n\t\t\tdocument.body.appendChild(img);\n\t\t});\n\t}\n\n\treturn assetCache[url];\n}\n\nexport function registerAsset(asset: string, file: File): string {\n\tconst url = URL.createObjectURL(file);\n\tcustomAssets[asset] = new Promise((resolve, reject) => {\n\t\tconst img = new Image();\n\t\timg.addEventListener('load', () => {\n\t\t\tresolve(img);\n\t\t});\n\t\timg.addEventListener('error', () => {\n\t\t\treject(`Failed to load \"${url}\"`);\n\t\t});\n\t\timg.crossOrigin = 'Anonymous';\n\t\timg.src = url;\n\t\timg.style.display = 'none';\n\t\tdocument.body.appendChild(img);\n\t});\n\treturn url;\n}\n\nexport const backgrounds = [\n\tnew VariantBackground('Clubroom', '/backgrounds/', [\n\t\t['club'],\n\t\t['club-skill'],\n\t]),\n\tnew Background('closet', 'Closet'),\n\tnew Background('corridor', 'Corridor'),\n\tnew Background('class', 'Classroom'),\n\tnew Background('residential', 'Street'),\n\tnew Background('house', 'House'),\n\tnew Background('bedroom', 'Bedroom'),\n\tnew Background('kitchen', 'Kitchen'),\n\tnew Background('sayori_bedroom', \"Sayori's bedroom\"),\n\tnew Background('bsod', 'Blue screen of death'),\n\tnew Background('unused-house', 'Unused house found in game files'),\n\tnew VariantBackground('Natsuki reading manga', '/cg/natsuki1/', [\n\t\t['n_cg1_bg'],\n\t\t['n_cg1_bg', 'n_cg1_base'],\n\t\t['n_cg1_bg', 'n_cg1_base', 'n_cg1_exp1'],\n\t\t['n_cg1_bg', 'n_cg1_base', 'n_cg1_exp2'],\n\t\t['n_cg1_bg', 'n_cg1_base', 'n_cg1_exp3'],\n\t\t['n_cg1_bg', 'n_cg1_base', 'n_cg1_exp4'],\n\t\t['n_cg1_bg', 'n_cg1_base', 'n_cg1_exp5'],\n\t]),\n\tnew VariantBackground('Natsuki in the closet', '/cg/natsuki2/', [\n\t\t['n_cg2_bg'],\n\t\t['n_cg2_bg', 'n_cg2_base'],\n\t\t['n_cg2_bg', 'n_cg2_base', 'n_cg2_exp1'],\n\t\t['n_cg2_bg', 'n_cg2_base', 'n_cg2_exp2'],\n\t]),\n\tnew VariantBackground('Natsuki against the wall', '/cg/natsuki3/', [\n\t\t['n_cg3_base'],\n\t\t['n_cg3_base', 'n_cg3_exp1'],\n\t\t['n_cg3_base', 'n_cg3_exp2'],\n\t\t['n_cg3_base', 'n_cg3_exp1', 'n_cg3_cake'],\n\t\t['n_cg3_base', 'n_cg3_exp2', 'n_cg3_cake'],\n\t]),\n\ttransparent,\n];\n\nexport interface IHeads {\n\tfolder?: string;\n\tall: string[];\n}\n\nexport interface Heads {\n\t[id: string]: IHeads | string[];\n}\n\ninterface IPose<H> {\n\tcompatibleHeads: Array<keyof H>;\n\theadInForeground?: boolean;\n\tfolder?: string;\n\theadAnchor?: [number, number];\n}\n\ninterface IStaticPose<H> extends IPose<H> {\n\tstatic: string;\n}\n\ninterface ITwoSidedPose<H> extends IPose<H> {\n\tleft: string[];\n\tright: string[];\n}\n\nexport type Pose<H extends Heads> = IStaticPose<H> | ITwoSidedPose<H>;\n\nexport interface ICharacter<H extends Heads> {\n\tid: string;\n\tinternalId: string;\n\tname: string;\n\tfolder?: string;\n\theads: H;\n\tposes: Array<Pose<H>>;\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./general.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./general.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./general.vue?vue&type=template&id=295f8d4b&scoped=true&\"\nimport script from \"./general.vue?vue&type=script&lang=ts&\"\nexport * from \"./general.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./general.vue?vue&type=style&index=0&id=295f8d4b&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"295f8d4b\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isWebPSupported !== undefined)?_c('div',{class:{ panel: true, vertical: _vm.vertical }},[_c('h1',[_vm._v(\"Add character\")]),_vm._l((_vm.characters),function(character){return _c('div',{key:character.id,staticClass:\"character\",attrs:{\"title\":character.name},on:{\"click\":function($event){_vm.$emit('chosen', character.id.toLowerCase())}}},[_c('img',{attrs:{\"src\":_vm.assetPath(character),\"alt\":character.name}})])}),_c('div',{staticClass:\"btn custom-sprite\",on:{\"click\":function($event){return _vm.$refs.upload.click()}}},[_vm._v(\"\\n\\t\\tCustom sprite\\n\\t\\t\"),_c('input',{ref:\"upload\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.onFileUpload}})])],2):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { RenderContext } from '@/renderer/rendererContext';\nimport { getAsset } from '@/asset-manager';\nimport { IRenderable } from './renderable';\n\nexport interface IBackground {\n\tname: string;\n\trender(rx: RenderContext): Promise<void>;\n}\n\nexport class Background implements IBackground {\n\tpublic readonly path: string;\n\tpublic constructor(\n\t\tpath: string,\n\t\tpublic readonly name: string,\n\t\tpublic readonly custom: boolean = false\n\t) {\n\t\tthis.path = (custom ? '' : '/backgrounds/') + path;\n\t}\n\n\tpublic async render(rx: RenderContext): Promise<void> {\n\t\trx.drawImage({ image: await getAsset(this.path, rx.hq), x: 0, y: 0 });\n\t}\n}\n\nexport const color = {\n\tname: 'Static color',\n\tcolor: '#000000',\n\n\tasync render(rx: RenderContext): Promise<void> {\n\t\trx.drawRect({ x: 0, y: 0, w: 1280, h: 720, fill: { style: this.color } });\n\t},\n};\n\nexport const transparent = {\n\tname: 'Transparent',\n\tasync render(rx: RenderContext): Promise<void> {\n\t\tif (!rx.preview) return;\n\t\treturn await Background.prototype.render.call(this, rx);\n\t},\n};\n","import { IBackground } from './background';\r\nimport { RenderContext } from '@/renderer/rendererContext';\r\nimport { getAsset } from '@/asset-manager';\r\n\r\nexport class VariantBackground implements IBackground {\r\n\tpublic readonly path: string;\r\n\tprivate variantI: number = 0;\r\n\r\n\tpublic constructor(\r\n\t\tpublic readonly name: string,\r\n\t\treadonly basefolder: string,\r\n\t\tpublic readonly variants: string[][]\r\n\t) {\r\n\t\tthis.variants = variants.map(variant =>\r\n\t\t\tvariant.map(img => (basefolder + img).replace(/\\/+/g, '/'))\r\n\t\t);\r\n\t\tthis.path = this.variants[0][0];\r\n\t}\r\n\r\n\tpublic get variant(): number {\r\n\t\treturn this.variantI;\r\n\t}\r\n\r\n\tpublic set variant(val: number) {\r\n\t\tif (val < 0) {\r\n\t\t\tval = this.variants.length + val;\r\n\t\t}\r\n\t\tif (val >= this.variants.length) {\r\n\t\t\tval = this.variants.length - val;\r\n\t\t}\r\n\t\tthis.variantI = val;\r\n\t}\r\n\r\n\tpublic async render(rx: RenderContext): Promise<void> {\r\n\t\tconst assets = await Promise.all(\r\n\t\t\tthis.variants[this.variantI].map(img => getAsset(img, rx.hq))\r\n\t\t);\r\n\t\tfor (const asset of assets) {\r\n\t\t\trx.drawImage({ image: asset, x: 0, y: 0 });\r\n\t\t}\r\n\t}\r\n}\r\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport {\n\tisWebPSupported,\n\tICharacter,\n\tcharacterOrder,\n\tregisterAsset,\n} from '../../asset-manager';\n\n@Component({\n\tcomponents: {},\n})\nexport default class AddPanel extends Vue {\n\t@Prop({ required: true, type: Boolean }) private readonly vertical!: boolean;\n\n\tprivate isWebPSupported: boolean | null = null;\n\tprivate customAssetCount = 0;\n\n\tprivate async created() {\n\t\tthis.isWebPSupported = await isWebPSupported();\n\t}\n\n\tprivate get characters(): Array<ICharacter<any>> {\n\t\treturn characterOrder;\n\t}\n\n\tprivate assetPath(character: ICharacter<any>) {\n\t\treturn `${process.env.BASE_URL}/assets/chibis/${character.internalId}.lq.${\n\t\t\tthis.isWebPSupported ? 'webp' : 'png'\n\t\t}`.replace(/\\/+/, '/');\n\t}\n\n\tprivate onFileUpload(e: Event) {\n\t\tconst uploadInput = this.$refs.upload as HTMLInputElement;\n\t\tif (!uploadInput.files) return;\n\t\tfor (const file of uploadInput.files) {\n\t\t\t(nr => {\n\t\t\t\tconst name = 'customAsset' + nr;\n\t\t\t\tconst url = registerAsset(name, file);\n\t\t\t\tthis.$emit('add-custom-asset', name);\n\t\t\t})(++this.customAssetCount);\n\t\t}\n\t}\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./add.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./add.vue?vue&type=template&id=95f33d28&scoped=true&\"\nimport script from \"./add.vue?vue&type=script&lang=ts&\"\nexport * from \"./add.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./add.vue?vue&type=style&index=0&id=95f33d28&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"95f33d28\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ panel: true, vertical: _vm.vertical }},[_c('h1',[_vm._v(_vm._s(_vm.character.label))]),(_vm.hasMultiplePoses || _vm.parts.length > 0)?_c('fieldset',[_c('legend',[_vm._v(\"Pose:\")]),_c('table',[_c('tbody',[(_vm.hasMultiplePoses)?_c('tr',[_c('td',[_c('button',{on:{\"click\":function($event){return _vm.character.posel();}}},[_vm._v(\"<\")])]),_c('td',[_vm._v(\"Pose\")]),_c('td',[_c('button',{on:{\"click\":function($event){return _vm.character.poser();}}},[_vm._v(\">\")])])]):_vm._e(),_vm._l((_vm.parts),function(part){return _c('tr',{key:part},[_c('td',[_c('button',{on:{\"click\":function($event){return _vm.character.partl(part);}}},[_vm._v(\"<\")])]),_c('td',[_vm._v(_vm._s(_vm.captialize(part)))]),_c('td',[_c('button',{on:{\"click\":function($event){return _vm.character.partr(part);}}},[_vm._v(\">\")])])])})],2)])]):_vm._e(),_c('fieldset',[_c('legend',[_vm._v(\"Position:\")]),_c('toggle',{attrs:{\"label\":\"Move freely?\"},on:{\"input\":function($event){return _vm.$emit('invalidate-render')}},model:{value:(_vm.character.allowFreeMove),callback:function ($$v) {_vm.$set(_vm.character, \"allowFreeMove\", $$v)},expression:\"character.allowFreeMove\"}}),(!_vm.character.allowFreeMove)?_c('div',[_c('button',{on:{\"click\":function($event){--_vm.character.pos;_vm.$emit('invalidate-render')}}},[_vm._v(\"< left\")]),_c('button',{on:{\"click\":function($event){++_vm.character.pos;_vm.$emit('invalidate-render')}}},[_vm._v(\"> right\")])]):_c('div',[_c('label',{attrs:{\"for\":\"sprite_x\"}},[_vm._v(\"X:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.character.x),expression:\"character.x\",modifiers:{\"number\":true}}],attrs:{\"id\":\"sprite_x\",\"type\":\"number\"},domProps:{\"value\":(_vm.character.x)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.character, \"x\", _vm._n($event.target.value))},function($event){return _vm.$emit('invalidate-render')}],\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('br'),_c('label',{attrs:{\"for\":\"sprite_y\"}},[_vm._v(\"Y:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.character.y),expression:\"character.y\",modifiers:{\"number\":true}}],attrs:{\"id\":\"sprite_y\",\"type\":\"number\"},domProps:{\"value\":(_vm.character.y)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.character, \"y\", _vm._n($event.target.value))},function($event){return _vm.$emit('invalidate-render')}],\"blur\":function($event){return _vm.$forceUpdate()}}})])],1),_c('fieldset',{attrs:{\"id\":\"layerfs\"}},[_c('legend',[_vm._v(\"Layer:\")]),_c('button',{attrs:{\"title\":\"Move to back\"},on:{\"click\":function($event){return _vm.$emit('shiftLayer', {object: _vm.character, move: 'Back'})}}},[_vm._v(\"\")]),_c('button',{attrs:{\"title\":\"Move backwards\"},on:{\"click\":function($event){return _vm.$emit('shiftLayer', {object: _vm.character, move: 'Backward'})}}},[_vm._v(\"\")]),_c('button',{attrs:{\"title\":\"Move forwards\"},on:{\"click\":function($event){return _vm.$emit('shiftLayer', {object: _vm.character, move: 'Forward'})}}},[_vm._v(\"\")]),_c('button',{attrs:{\"title\":\"Move to front\"},on:{\"click\":function($event){return _vm.$emit('shiftLayer', {object: _vm.character, move: 'Front'})}}},[_vm._v(\"\")])]),_c('toggle',{attrs:{\"label\":\"In front of textbox?\"},on:{\"input\":function($event){return _vm.$emit('invalidate-render')}},model:{value:(_vm.character.infront),callback:function ($$v) {_vm.$set(_vm.character, \"infront\", $$v)},expression:\"character.infront\"}}),_c('toggle',{attrs:{\"label\":\"Close up?\"},on:{\"input\":function($event){return _vm.$emit('invalidate-render')}},model:{value:(_vm.character.close),callback:function ($$v) {_vm.$set(_vm.character, \"close\", $$v)},expression:\"character.close\"}}),_c('toggle',{attrs:{\"label\":\"Flipped?\"},on:{\"input\":function($event){return _vm.$emit('invalidate-render')}},model:{value:(_vm.character.flip),callback:function ($$v) {_vm.$set(_vm.character, \"flip\", $$v)},expression:\"character.flip\"}}),_c('button',{on:{\"click\":function($event){_vm.$emit('shiftLayer', {object: _vm.character, move: 'Delete'});_vm.$emit('close')}}},[_vm._v(\"Delete\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { Background } from './background';\r\n\r\nexport const backgrounds = [] as Background[];\r\n\r\nexport const characterPositions = [\r\n\t200,\r\n\t240,\r\n\t400,\r\n\t493,\r\n\t640,\r\n\t640,\r\n\t786,\r\n\t880,\r\n\t1040,\r\n\t1080,\r\n];\r\n\r\nexport const poses = {\r\n\tsayori: {\r\n\t\tleft: [] as HTMLImageElement[],\r\n\t\tright: [] as HTMLImageElement[],\r\n\t\thead: [] as HTMLImageElement[],\r\n\t},\r\n\tyuri: {\r\n\t\tleft: [] as HTMLImageElement[],\r\n\t\tright: [] as HTMLImageElement[],\r\n\t\thead: [] as HTMLImageElement[],\r\n\t},\r\n\tnatsuki: {\r\n\t\tleft: [] as HTMLImageElement[],\r\n\t\tright: [] as HTMLImageElement[],\r\n\t\thead: [] as HTMLImageElement[],\r\n\t},\r\n\tmonika: {\r\n\t\tleft: [] as HTMLImageElement[],\r\n\t\tright: [] as HTMLImageElement[],\r\n\t\thead: [] as HTMLImageElement[],\r\n\t},\r\n};\r\n","export class RenderAbortedException {}\n","import { RenderAbortedException } from './renderAbortedException';\nimport { Renderer } from './renderer';\n\nexport class RenderContext {\n\tprivate aborted: boolean = false;\n\n\tpublic constructor(\n\t\tprivate fsCtx: CanvasRenderingContext2D,\n\t\tpublic readonly hq: boolean,\n\t\tpublic readonly preview: boolean\n\t) {}\n\n\tpublic drawText(\n\t\ttext: string,\n\t\tx: number,\n\t\ty: number,\n\t\talign: CanvasTextAlign,\n\t\tw: number = 1,\n\t\tcol: string = 'white',\n\t\tocol: string | null = '#533643',\n\t\tfont: string = '20px aller'\n\t) {\n\t\tif (this.aborted) throw new RenderAbortedException();\n\t\tthis.fsCtx.fillStyle = col;\n\t\tif (ocol) this.fsCtx.strokeStyle = ocol;\n\t\tthis.fsCtx.lineWidth = 2 * w;\n\t\tthis.fsCtx.textAlign = align;\n\t\tthis.fsCtx.font = font;\n\t\tthis.fsCtx.lineJoin = 'round';\n\n\t\tif (ocol) this.fsCtx.strokeText(text, x, y);\n\t\tthis.fsCtx.fillText(text, x, y);\n\t}\n\n\tpublic drawImage(\n\t\tparams: { image: HTMLImageElement | Renderer; flip?: boolean } & IRPos &\n\t\t\tIOSize &\n\t\t\tIOShadow\n\t): void {\n\t\tif (this.aborted) throw new RenderAbortedException();\n\t\tconst { image, flip, x, y, w, h } = {\n\t\t\tflip: false,\n\t\t\tw: params.image.width,\n\t\t\th: params.image.height,\n\t\t\t...params,\n\t\t};\n\n\t\tthis.fsCtx.save();\n\n\t\tif (params.shadow) {\n\t\t\tconst shadow = params.shadow;\n\t\t\tif (shadow.color) {\n\t\t\t\tthis.fsCtx.shadowColor = shadow.color;\n\t\t\t}\n\t\t\tif (shadow.blur) {\n\t\t\t\tthis.fsCtx.shadowBlur = shadow.blur;\n\t\t\t}\n\t\t\tif (shadow.offsetX) {\n\t\t\t\tthis.fsCtx.shadowOffsetX = shadow.offsetX;\n\t\t\t}\n\t\t\tif (shadow.offsetY) {\n\t\t\t\tthis.fsCtx.shadowOffsetY = shadow.offsetY;\n\t\t\t}\n\t\t}\n\n\t\tthis.fsCtx.translate(x + w / 2, y + h / 2);\n\t\tthis.fsCtx.scale(flip ? -1 : 1, 1);\n\n\t\tif (image instanceof Renderer) {\n\t\t\timage.paintOnto(this.fsCtx, -w / 2, -h / 2, w, h);\n\t\t} else {\n\t\t\tthis.fsCtx.drawImage(image, -w / 2, -h / 2, w, h);\n\t\t}\n\n\t\tthis.fsCtx.restore();\n\t}\n\n\tpublic drawRect({\n\t\tx,\n\t\ty,\n\t\tw,\n\t\th,\n\t\toutline,\n\t\tfill,\n\t}: IRPos & IRSize & IOOutline & IOFill) {\n\t\tif (this.aborted) throw new RenderAbortedException();\n\t\tthis.fsCtx.save();\n\t\tthis.fsCtx.beginPath();\n\t\tthis.fsCtx.rect(x, y, w, h);\n\n\t\tif (fill) {\n\t\t\tthis.fsCtx.fillStyle = fill.style;\n\t\t\tthis.fsCtx.fill();\n\t\t}\n\t\tif (outline) {\n\t\t\tthis.fsCtx.strokeStyle = outline.style;\n\t\t\tthis.fsCtx.lineWidth = outline.width;\n\t\t\tthis.fsCtx.stroke();\n\t\t}\n\t\tthis.fsCtx.restore();\n\t}\n\n\tpublic measureText(str: string): TextMetrics {\n\t\tif (this.aborted) throw new RenderAbortedException();\n\t\treturn this.fsCtx.measureText(str);\n\t}\n\n\tpublic abort(): void {\n\t\tthis.aborted = true;\n\t}\n}\n\nconst optSize = { w: 0, h: 0 };\nconst optShadow = {\n\tblur: 0,\n\tcolor: 'none',\n\toffsetX: 0,\n\toffsetY: 0,\n};\n\nexport interface IShadow {\n\tblur?: number;\n\tcolor?: string;\n\toffsetX?: number;\n\toffsetY?: number;\n}\n\nexport interface IOutline {\n\tstyle: string;\n\twidth: number;\n}\n\nexport interface IFill {\n\tstyle: string;\n}\n\ninterface IOShadow {\n\tshadow?: IShadow;\n}\n\ninterface IRPos {\n\tx: number;\n\ty: number;\n}\n\ninterface IRSize {\n\tw: number;\n\th: number;\n}\n\ninterface IOSize {\n\tw?: number;\n\th?: number;\n}\n\ninterface IOOutline {\n\toutline?: IOutline;\n}\n\ninterface IOFill {\n\tfill?: IFill;\n}\n","import { RenderContext } from './rendererContext';\nimport { RenderAbortedException } from './renderAbortedException';\n\nexport class Renderer {\n\tprivate previewCanvas: HTMLCanvasElement;\n\tprivate runningContext: RenderContext | null = null;\n\n\tpublic constructor(w: number = 1280, h: number = 720) {\n\t\tthis.previewCanvas = document.createElement('canvas');\n\t\tthis.previewCanvas.width = w;\n\t\tthis.previewCanvas.height = h;\n\t}\n\n\tpublic async render(\n\t\trenderCallback: (rc: RenderContext) => Promise<void>,\n\t\thq: boolean = true\n\t): Promise<boolean> {\n\t\tif (this.runningContext) {\n\t\t\tthis.runningContext.abort();\n\t\t}\n\n\t\tconst ctx = this.previewCanvas.getContext('2d')!;\n\t\tctx.clearRect(0, 0, this.previewCanvas.width, this.previewCanvas.height);\n\t\tconst context = (this.runningContext = new RenderContext(ctx, hq, true));\n\t\ttry {\n\t\t\tawait renderCallback(this.runningContext);\n\t\t} catch (e) {\n\t\t\tif (e instanceof RenderAbortedException) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tthrow e;\n\t\t} finally {\n\t\t\tif (context === this.runningContext) {\n\t\t\t\tthis.runningContext = null;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\n\tpublic get width(): number {\n\t\treturn this.previewCanvas.width;\n\t}\n\n\tpublic get height(): number {\n\t\treturn this.previewCanvas.height;\n\t}\n\n\tpublic paintOnto(\n\t\tc: CanvasRenderingContext2D,\n\t\tx: number,\n\t\ty: number,\n\t\tw?: number,\n\t\th?: number\n\t) {\n\t\tif (w && h) {\n\t\t\tc.drawImage(this.previewCanvas, x, y, w, h);\n\t\t} else {\n\t\t\tc.drawImage(this.previewCanvas, x, y);\n\t\t}\n\t}\n\n\tpublic async download(\n\t\trenderCallback: (rc: RenderContext) => Promise<void>,\n\t\tfilename: string\n\t) {\n\t\tconst downloadCanvas = document.createElement('canvas');\n\t\tdownloadCanvas.width = this.previewCanvas.width;\n\t\tdownloadCanvas.height = this.previewCanvas.height;\n\n\t\tconst ctx = downloadCanvas.getContext('2d')!;\n\t\tctx.clearRect(0, 0, this.previewCanvas.width, this.previewCanvas.height);\n\t\tawait renderCallback(new RenderContext(ctx, true, false));\n\n\t\tconst url = downloadCanvas.toDataURL();\n\n\t\tif (undefined === window.navigator.msSaveOrOpenBlob) {\n\t\t\tconst e = document.createElement('a');\n\t\t\te.setAttribute('href', url);\n\t\t\te.setAttribute('download', filename);\n\t\t\tdocument.body.appendChild(e);\n\t\t\te.click();\n\t\t\tdocument.body.removeChild(e);\n\t\t} else {\n\t\t\t// IE-specific code\n\t\t\twindow.navigator.msSaveBlob(this.dataURItoBlob(url), filename);\n\t\t}\n\t}\n\n\tpublic getDataAt(x: number, y: number): Uint8ClampedArray {\n\t\tconst ctx = this.previewCanvas.getContext('2d');\n\n\t\treturn ctx!.getImageData(x, y, 1, 1).data;\n\t}\n\n\tprivate dataURItoBlob(dataURI: string) {\n\t\tconst binary = atob(dataURI.split(',')[1]);\n\t\tconst array = [];\n\t\tfor (let i = 0; i < binary.length; i++) {\n\t\t\tarray.push(binary.charCodeAt(i));\n\t\t}\n\t\treturn new Blob([new Uint8Array(array)], { type: 'image/png' });\n\t}\n}\n","import { characterPositions } from './constants';\nimport { RenderContext } from '../renderer/rendererContext';\nimport {\n\tcharacters,\n\tgetAsset,\n\tPose,\n\tICharacter,\n\tIHeads,\n} from '../asset-manager';\nimport { Renderer } from '../renderer/renderer';\nimport { IRenderable } from './renderable';\nimport { IDragable } from './dragable';\n\nexport type CharacterIds =\n\t| 'ddlc.monika'\n\t| 'ddlc.natsuki'\n\t| 'ddlc.sayori'\n\t| 'ddlc.yuri'\n\t| 'ddlc.fan.mc_classic'\n\t| 'ddlc.fan.femc';\nexport type Part = 'variant' | 'left' | 'right' | 'head';\n\nexport class Character implements IRenderable, IDragable {\n\tpublic infront: boolean = false;\n\tpublic close: boolean = false;\n\tpublic flip: boolean = false;\n\tprivate lq: boolean = true;\n\tprivate selected: boolean = false;\n\tprivate poseId: number = 0;\n\tprivate posePositions = {\n\t\tvariant: 0,\n\t\tleft: 0,\n\t\tright: 0,\n\t\thead: 0,\n\t\theadType: 0,\n\t};\n\tprivate localRenderer = new Renderer(960, 960);\n\tprivate dirty = true;\n\tprivate hitDetectionFallback = false;\n\n\tprivate freeMove: boolean = false;\n\tprivate pPos: number = 4;\n\tprivate pX: number = characterPositions[4]!;\n\tprivate pY: number = 0;\n\n\tpublic constructor(\n\t\tpublic readonly name: CharacterIds,\n\t\tprivate readonly invalidator: Invalidator\n\t) {}\n\n\tpublic get label() {\n\t\treturn this.data.name;\n\t}\n\n\tpublic select() {\n\t\tthis.selected = true;\n\t}\n\n\tpublic unselect() {\n\t\tthis.selected = false;\n\t}\n\n\tpublic get data(): ICharacter<any> {\n\t\treturn characters[this.name];\n\t}\n\n\tpublic get pose(): Pose<any> {\n\t\treturn this.data.poses[this.poseId];\n\t}\n\n\tpublic getParts(): Part[] {\n\t\tconst pose = this.pose;\n\t\tconst head: Array<'head'> =\n\t\t\tthis.pose.compatibleHeads.length > 0 ? ['head'] : [];\n\n\t\tif ('variant' in pose) {\n\t\t\treturn [...head, 'variant'];\n\t\t}\n\t\tif ('left' in pose) {\n\t\t\treturn [...head, 'left', 'right'];\n\t\t}\n\t\treturn head;\n\t}\n\n\tpublic get currentHeads(): IHeads | null {\n\t\tif (!this.pose.compatibleHeads || this.pose.compatibleHeads.length === 0) {\n\t\t\treturn null;\n\t\t}\n\t\tconst heads = this.data.heads[\n\t\t\tthis.pose.compatibleHeads[this.posePositions.headType]\n\t\t];\n\t\tif (heads instanceof Array) {\n\t\t\treturn {\n\t\t\t\tall: heads,\n\t\t\t};\n\t\t}\n\t\treturn heads;\n\t}\n\n\tpublic async updateLocalCanvas() {\n\t\tawait this.localRenderer.render(async rx => {\n\t\t\tconst pose = this.pose as Pose<any>;\n\t\t\tconst assets: string[] = [];\n\t\t\tconst partKeys = this.getParts();\n\n\t\t\tconst poseFolder =\n\t\t\t\t(this.data.folder ? this.data.folder + '/' : '') +\n\t\t\t\t(this.pose.folder ? this.pose.folder + '/' : '');\n\n\t\t\tconst headFolder =\n\t\t\t\t(this.data.folder ? this.data.folder + '/' : '') +\n\t\t\t\t(this.currentHeads && this.currentHeads.folder\n\t\t\t\t\t? this.currentHeads.folder + '/'\n\t\t\t\t\t: '');\n\n\t\t\tif ((pose as any).static) {\n\t\t\t\tassets.push(poseFolder + (pose as any).static);\n\t\t\t} else {\n\t\t\t\tfor (const key of partKeys) {\n\t\t\t\t\tif (key === 'head') continue;\n\t\t\t\t\tassets.push(poseFolder + (pose as any)[key][this.posePositions[key]]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst head = this.currentHeads\n\t\t\t\t? headFolder + this.currentHeads.all[this.posePositions.head]\n\t\t\t\t: null;\n\n\t\t\tconst [headAsset, ...bodyParts] = await Promise.all([\n\t\t\t\thead ? getAsset(head, rx.hq) : Promise.resolve(null),\n\t\t\t\t...assets.map(asset => getAsset(asset, rx.hq)),\n\t\t\t]);\n\n\t\t\tconst drawHead = () => {\n\t\t\t\tif (headAsset) {\n\t\t\t\t\tconst headAnchor = this.pose.headAnchor\n\t\t\t\t\t\t? this.pose.headAnchor\n\t\t\t\t\t\t: [0, 0];\n\n\t\t\t\t\trx.drawImage({\n\t\t\t\t\t\timage: headAsset,\n\t\t\t\t\t\tx: headAnchor[0],\n\t\t\t\t\t\ty: (this.name === 'ddlc.monika' ? 1 : 0) + headAnchor[1],\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (!this.pose.headInForeground) {\n\t\t\t\tdrawHead();\n\t\t\t}\n\n\t\t\tfor (const bodyPart of bodyParts) {\n\t\t\t\trx.drawImage({ image: bodyPart!, x: 0, y: 0 });\n\t\t\t}\n\n\t\t\tif (this.pose.headInForeground) {\n\t\t\t\tdrawHead();\n\t\t\t}\n\t\t});\n\t}\n\n\tpublic async render(rx: RenderContext) {\n\t\tif (this.dirty || this.lq !== !rx.hq) {\n\t\t\tawait this.updateLocalCanvas();\n\t\t}\n\n\t\tconst zoom = this.close ? 1.6 : 0.8;\n\t\tconst size = 960 * zoom;\n\t\tconst x = this.pX - size / 2;\n\t\tconst y = (this.close ? -100 : -26.0) + this.pY;\n\n\t\trx.drawImage({\n\t\t\timage: this.localRenderer,\n\t\t\tx,\n\t\t\ty,\n\t\t\tw: size,\n\t\t\th: size,\n\t\t\tflip: this.flip,\n\t\t\tshadow: this.selected ? { blur: 20, color: 'red' } : undefined,\n\t\t});\n\t}\n\n\tpublic hitTest(hx: number, hy: number): boolean {\n\t\tconst zoom = this.close ? 1.6 : 0.8;\n\t\tconst size = 960 * zoom;\n\t\tlet x = (hx - this.pX + size / 2) / zoom;\n\t\tconst y = (hy - (this.close ? -100 : 0) - this.pY) / zoom;\n\n\t\tif (this.flip) {\n\t\t\tx = 960 - x;\n\t\t}\n\t\tif (!this.hitDetectionFallback) {\n\t\t\ttry {\n\t\t\t\tconst data = this.localRenderer.getDataAt(x, y);\n\t\t\t\treturn data[3] !== 0;\n\t\t\t} catch (e) {\n\t\t\t\t// On chrome for android, the hit test tends to fail because of cross-origin shinanigans, even though\n\t\t\t\t// we only ever load from one origin. \\_()_/\n\t\t\t\t// So we have a fallback that doesn't read the contents of the canvas. This looses accuracy, but at\n\t\t\t\t// least works always.\n\t\t\t\tif (e instanceof DOMException && e.message.includes('cross-origin')) {\n\t\t\t\t\tthis.hitDetectionFallback = true;\n\t\t\t\t} else {\n\t\t\t\t\tthrow e;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (y < 50 || y > 680) return false;\n\t\treturn Math.abs(x - 480) < 150;\n\t}\n\n\tpublic headl(): void {\n\t\tif (!this.currentHeads) return;\n\t\t--this.posePositions.head;\n\t\tif (this.posePositions.head < 0) {\n\t\t\t--this.posePositions.headType;\n\t\t\tif (this.posePositions.headType < 0) {\n\t\t\t\tthis.posePositions.headType = this.pose.compatibleHeads.length - 1;\n\t\t\t}\n\t\t\tthis.posePositions.head = this.currentHeads.all.length - 1;\n\t\t}\n\t\tthis.dirty = true;\n\t\tthis.invalidator();\n\t}\n\n\tpublic headr(): void {\n\t\tif (!this.currentHeads) return;\n\t\t++this.posePositions.head;\n\t\tif (this.posePositions.head >= this.currentHeads.all.length) {\n\t\t\t++this.posePositions.headType;\n\t\t\tif (this.posePositions.headType >= this.pose.compatibleHeads.length) {\n\t\t\t\tthis.posePositions.headType = 0;\n\t\t\t}\n\t\t\tthis.posePositions.head = 0;\n\t\t}\n\t\tthis.dirty = true;\n\t\tthis.invalidator();\n\t}\n\n\tpublic partl(part: Part) {\n\t\tif (part === 'head') return this.headl();\n\t\tif (!(this.pose as any)[part]) return;\n\t\t--this.posePositions[part];\n\n\t\tif (this.posePositions[part] < 0) {\n\t\t\tthis.posePositions[part] = (this.pose as any)[part].length - 1;\n\t\t}\n\t\tthis.dirty = true;\n\t\tthis.invalidator();\n\t}\n\n\tpublic partr(part: Part) {\n\t\tif (part === 'head') return this.headr();\n\t\tif (!(this.pose as any)[part]) return;\n\t\t++this.posePositions[part];\n\n\t\tif (this.posePositions[part] >= (this.pose as any)[part].length) {\n\t\t\tthis.posePositions[part] = 0;\n\t\t}\n\t\tthis.dirty = true;\n\t\tthis.invalidator();\n\t}\n\n\tpublic posel() {\n\t\tconst oldHeadCollection = this.pose.compatibleHeads[\n\t\t\tthis.posePositions.headType\n\t\t];\n\t\t--this.poseId;\n\t\tif (this.poseId < 0) {\n\t\t\tthis.poseId = this.data.poses.length - 1;\n\t\t}\n\t\tconst newHeadCollectionNr = this.pose.compatibleHeads.indexOf(\n\t\t\toldHeadCollection\n\t\t);\n\t\tif (newHeadCollectionNr >= 0) {\n\t\t\tthis.posePositions.headType = newHeadCollectionNr;\n\t\t} else {\n\t\t\tthis.posePositions.headType = 0;\n\t\t\tthis.posePositions.head = 0;\n\t\t}\n\t\tthis.posePositions.left = 0;\n\t\tthis.posePositions.right = 0;\n\t\tthis.posePositions.variant = 0;\n\t\tthis.dirty = true;\n\t\tthis.invalidator();\n\t}\n\n\tpublic poser() {\n\t\tconst oldHeadCollection = this.pose.compatibleHeads[\n\t\t\tthis.posePositions.headType\n\t\t];\n\t\t++this.poseId;\n\t\tif (this.poseId >= this.data.poses.length) {\n\t\t\tthis.poseId = 0;\n\t\t}\n\t\tconst newHeadCollectionNr = this.pose.compatibleHeads.indexOf(\n\t\t\toldHeadCollection\n\t\t);\n\t\tif (newHeadCollectionNr >= 0) {\n\t\t\tthis.posePositions.headType = newHeadCollectionNr;\n\t\t} else {\n\t\t\tthis.posePositions.headType = 0;\n\t\t\tthis.posePositions.head = 0;\n\t\t}\n\t\tthis.posePositions.left = 0;\n\t\tthis.posePositions.right = 0;\n\t\tthis.posePositions.variant = 0;\n\t\tthis.dirty = true;\n\t\tthis.invalidator();\n\t}\n\n\tpublic get allowFreeMove(): boolean {\n\t\treturn this.freeMove;\n\t}\n\n\tpublic set allowFreeMove(allow: boolean) {\n\t\tif (allow) {\n\t\t\tthis.freeMove = true;\n\t\t} else {\n\t\t\tthis.freeMove = false;\n\t\t\tthis.pos = this.closestCharacterSlot(this.pX);\n\t\t\tthis.pY = 0;\n\t\t}\n\t}\n\n\tpublic get x(): number {\n\t\treturn this.pX;\n\t}\n\n\tpublic set x(pos: number) {\n\t\tif (this.allowFreeMove) {\n\t\t\tthis.pX = pos;\n\t\t} else {\n\t\t\tthis.pos = this.closestCharacterSlot(pos);\n\t\t}\n\t}\n\n\tpublic get y(): number {\n\t\treturn this.pY;\n\t}\n\n\tpublic set y(pos: number) {\n\t\tif (this.allowFreeMove) {\n\t\t\tthis.pY = pos;\n\t\t} else {\n\t\t\tthis.pY = 0;\n\t\t}\n\t}\n\n\tpublic get pos() {\n\t\treturn this.pPos;\n\t}\n\n\tpublic set pos(pos: number) {\n\t\tif (this.allowFreeMove) return;\n\t\tif (pos < 0) pos = 0;\n\t\tif (pos >= characterPositions.length) pos = characterPositions.length - 1;\n\n\t\tthis.pPos = pos;\n\t\tthis.pX = characterPositions[pos];\n\t}\n\n\tprivate closestCharacterSlot(pos: number): number {\n\t\tconst sorted = characterPositions\n\t\t\t.map((x, idx) => ({ pos: Math.abs(pos - x), idx }))\n\t\t\t.sort((a, b) => a.pos - b.pos);\n\t\treturn sorted[0].idx;\n\t}\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport { isWebPSupported } from '../../asset-manager';\nimport { Character } from '../../models/character';\nimport Toggle from '../Toggle.vue';\nimport { IRenderable } from '../../models/renderable';\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t},\n})\nexport default class CharacterPanel extends Vue {\n\t@Prop({ required: true, type: Boolean }) private readonly vertical!: boolean;\n\t@Prop({ type: Character, required: true }) private character!: Character;\n\n\tprivate isWebPSupported: boolean | null = null;\n\n\tprivate async created() {\n\t\tthis.isWebPSupported = await isWebPSupported();\n\t}\n\n\tprivate get parts(): string[] {\n\t\treturn this.character.getParts();\n\t}\n\n\tprivate get hasMultiplePoses(): boolean {\n\t\treturn this.character.data.poses.length > 1;\n\t}\n\n\tprivate captialize(str: string) {\n\t\treturn str.charAt(0).toUpperCase() + str.substring(1);\n\t}\n}\n\nexport interface MoveObject {\n\tobject: IRenderable;\n\tmove: 'Forward' | 'Backward' | 'Back' | 'Front' | 'Delete';\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./character.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./character.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./character.vue?vue&type=template&id=07229d90&scoped=true&\"\nimport script from \"./character.vue?vue&type=script&lang=ts&\"\nexport * from \"./character.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./character.vue?vue&type=style&index=0&id=07229d90&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"07229d90\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ panel: true, vertical: _vm.vertical }},[_c('h1',[_vm._v(\"Custom Sprite\")]),_c('fieldset',[_c('legend',[_vm._v(\"Position/Size:\")]),_c('label',{attrs:{\"for\":\"sprite_x\"}},[_vm._v(\"X:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.sprite.x),expression:\"sprite.x\",modifiers:{\"number\":true}}],attrs:{\"id\":\"sprite_x\",\"type\":\"number\"},domProps:{\"value\":(_vm.sprite.x)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.sprite, \"x\", _vm._n($event.target.value))},function($event){return _vm.$emit('invalidate-render')}],\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('br'),_c('label',{attrs:{\"for\":\"sprite_y\"}},[_vm._v(\"Y:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.sprite.y),expression:\"sprite.y\",modifiers:{\"number\":true}}],attrs:{\"id\":\"sprite_y\",\"type\":\"number\"},domProps:{\"value\":(_vm.sprite.y)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.sprite, \"y\", _vm._n($event.target.value))},function($event){return _vm.$emit('invalidate-render')}],\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('br'),_c('label',{attrs:{\"for\":\"sprite_w\"}},[_vm._v(\"Width:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.sprite.width),expression:\"sprite.width\",modifiers:{\"number\":true}}],attrs:{\"id\":\"sprite_w\",\"type\":\"number\"},domProps:{\"value\":(_vm.sprite.width)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.sprite, \"width\", _vm._n($event.target.value))},function($event){return _vm.$emit('invalidate-render')}],\"blur\":function($event){return _vm.$forceUpdate()}}}),_c('br'),_c('label',{attrs:{\"for\":\"sprite_h\"}},[_vm._v(\"Height:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model.number\",value:(_vm.sprite.height),expression:\"sprite.height\",modifiers:{\"number\":true}}],attrs:{\"id\":\"sprite_h\",\"type\":\"number\"},domProps:{\"value\":(_vm.sprite.height)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.sprite, \"height\", _vm._n($event.target.value))},function($event){return _vm.$emit('invalidate-render')}],\"blur\":function($event){return _vm.$forceUpdate()}}})]),_c('fieldset',{attrs:{\"id\":\"layerfs\"}},[_c('legend',[_vm._v(\"Layer:\")]),_c('button',{attrs:{\"title\":\"Move to back\"},on:{\"click\":function($event){return _vm.$emit('shiftLayer', {object: _vm.sprite, move: 'Back'})}}},[_vm._v(\"\")]),_c('button',{attrs:{\"title\":\"Move backwards\"},on:{\"click\":function($event){return _vm.$emit('shiftLayer', {object: _vm.sprite, move: 'Backward'})}}},[_vm._v(\"\")]),_c('button',{attrs:{\"title\":\"Move forwards\"},on:{\"click\":function($event){return _vm.$emit('shiftLayer', {object: _vm.sprite, move: 'Forward'})}}},[_vm._v(\"\")]),_c('button',{attrs:{\"title\":\"Move to front\"},on:{\"click\":function($event){return _vm.$emit('shiftLayer', {object: _vm.sprite, move: 'Front'})}}},[_vm._v(\"\")])]),_c('toggle',{attrs:{\"label\":\"In front of textbox?\"},on:{\"input\":function($event){return _vm.$emit('invalidate-render')}},model:{value:(_vm.sprite.infront),callback:function ($$v) {_vm.$set(_vm.sprite, \"infront\", $$v)},expression:\"sprite.infront\"}}),_c('toggle',{attrs:{\"label\":\"Flip?\"},on:{\"input\":function($event){return _vm.$emit('invalidate-render')}},model:{value:(_vm.sprite.flip),callback:function ($$v) {_vm.$set(_vm.sprite, \"flip\", $$v)},expression:\"sprite.flip\"}}),_c('button',{on:{\"click\":function($event){_vm.$emit('shiftLayer', {object: _vm.sprite, move: 'Delete'});_vm.$emit('close')}}},[_vm._v(\"Delete\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { RenderContext } from '../renderer/rendererContext';\nimport { getAsset } from '../asset-manager';\nimport { IRenderable } from './renderable';\nimport { IDragable } from './dragable';\n\nexport class Sprite implements IRenderable, IDragable {\n\tpublic infront: boolean = false;\n\tpublic x: number = 0;\n\tpublic y: number = 0;\n\tpublic width: number = 0;\n\tpublic height: number = 0;\n\tpublic flip: boolean = false;\n\tprivate asset: HTMLImageElement | null = null;\n\tprivate selected: boolean = false;\n\n\tpublic constructor(\n\t\tpublic readonly assetName: string,\n\t\tprivate readonly invalidator: Invalidator\n\t) {\n\t\tgetAsset(assetName)\n\t\t\t.then(asset => {\n\t\t\t\tthis.asset = asset;\n\t\t\t\tthis.width = asset.width;\n\t\t\t\tthis.height = asset.height;\n\t\t\t\tthis.invalidator();\n\t\t\t})\n\t\t\t.catch(err => {\n\t\t\t\tconsole.error(`Failed to load asset: ${err}`);\n\t\t\t});\n\t}\n\n\tpublic select() {\n\t\tthis.selected = true;\n\t}\n\n\tpublic unselect() {\n\t\tthis.selected = false;\n\t}\n\n\tpublic async render(rx: RenderContext) {\n\t\tif (!this.asset) return;\n\t\trx.drawImage({\n\t\t\timage: this.asset,\n\t\t\tx: this.x,\n\t\t\ty: this.y,\n\t\t\tw: this.width,\n\t\t\th: this.height,\n\t\t\tshadow: this.selected ? { blur: 20, color: 'red' } : undefined,\n\t\t\tflip: this.flip,\n\t\t});\n\t}\n\n\tpublic hitTest(hx: number, hy: number): boolean {\n\t\tconst hitX = hx - this.x;\n\t\tconst hitY = hy - this.y;\n\t\treturn hitX >= 0 && hitX <= this.width && hitY >= 0 && hitY <= this.height;\n\t}\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport { isWebPSupported } from '../../asset-manager';\nimport { Character } from '../../models/character';\nimport Toggle from '../Toggle.vue';\nimport { IRenderable } from '../../models/renderable';\nimport { Sprite } from '../../models/sprite';\n\n@Component({\n\tcomponents: {\n\t\tToggle,\n\t},\n})\nexport default class SpritePanel extends Vue {\n\t@Prop({ required: true, type: Boolean }) private readonly vertical!: boolean;\n\t@Prop({ type: Sprite, required: true }) private sprite!: Sprite;\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sprite.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./sprite.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./sprite.vue?vue&type=template&id=4cc23cc2&scoped=true&\"\nimport script from \"./sprite.vue?vue&type=script&lang=ts&\"\nexport * from \"./sprite.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./sprite.vue?vue&type=style&index=0&id=4cc23cc2&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4cc23cc2\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:{ panel: true, vertical: _vm.vertical }},[_c('h1',[_vm._v(\"Credits\")]),_c('p',[_vm._v(\"All assets used are IP of Team Salvato and created by them, unless noted otherwise.\")]),_vm._m(0),_vm._m(1),_vm._m(2),_vm._m(3),_vm._m(4),_c('p',[_vm._v(\"Classic Amy Sprite by Meddy-sin\")]),_c('p',[_vm._v(\"Amy Sprite by Meddy-sin and SlightlySimple\")]),_c('p',[_vm._v(\"Special thanks to SlightlySimple for testing and technical help\")])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"\\n\\t\\tDoki Doki Dialog Generator developed by EDave64\\n\\t\\t\"),_c('br'),_vm._v(\"Based on gemdude46's DDLC Shitpost generator\\n\\t\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"\\n\\t\\tMC Classic Sprite by Childish-N\\n\\t\\t\"),_c('br'),_vm._v(\"MC Classic Chibi by GyleToTheRescue\\n\\t\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"\\n\\t\\tMC Sprite by Childish-N\\n\\t\\t\"),_c('br'),_vm._v(\"MC Chibi by SlightlySimple\\n\\t\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"\\n\\t\\tMC Chad Sprite by Cylent-Nite\\n\\t\\t\"),_c('br'),_vm._v(\"MC Chad Poses and expressions by SlightlySimple\\n\\t\\t\"),_c('br'),_vm._v(\"MC Chad Poses and chibi by Meddy-sin\\n\\t\")])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('p',[_vm._v(\"\\n\\t\\tFeMC Sprite by Meddy-sin\\n\\t\\t\"),_c('br'),_vm._v(\"FeMC Casual Sprite by SlightlySimple\\n\\t\")])}]\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\n\n@Component({\n\tcomponents: {},\n})\nexport default class AddPanel extends Vue {\n\t@Prop({ required: true, type: Boolean }) private readonly vertical!: boolean;\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./credits.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./credits.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./credits.vue?vue&type=template&id=58fed492&scoped=true&\"\nimport script from \"./credits.vue?vue&type=script&lang=ts&\"\nexport * from \"./credits.vue?vue&type=script&lang=ts&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"58fed492\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isWebPSupported !== undefined)?_c('div',{class:{ panel: true, vertical: _vm.vertical }},[_c('h1',[_vm._v(\"Background\")]),(_vm.value === _vm.colorBackground)?_c('fieldset',[_c('legend',[_vm._v(\"Settings:\")]),_c('label',{attrs:{\"for\":\"bg_color\"}},[_vm._v(\"Color:\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.colorBackground.color),expression:\"colorBackground.color\"}],attrs:{\"id\":\"bg_color\",\"type\":\"color\"},domProps:{\"value\":(_vm.colorBackground.color)},on:{\"input\":[function($event){if($event.target.composing){ return; }_vm.$set(_vm.colorBackground, \"color\", $event.target.value)},function($event){return _vm.$emit('invalidate-render')}]}})]):_vm._e(),(_vm.isVariantBackground)?_c('fieldset',[_c('legend',[_vm._v(\"Settings:\")]),_c('table',[_c('tr',[_c('td',[_c('button',{on:{\"click\":function($event){--_vm.value.variant;_vm.$emit('invalidate-render')}}},[_vm._v(\"<\")])]),_c('td',[_vm._v(\"Variant\")]),_c('td',[_c('button',{on:{\"click\":function($event){++_vm.value.variant;_vm.$emit('invalidate-render')}}},[_vm._v(\">\")])])])])]):_vm._e(),_vm._l((_vm.backgrounds),function(background){return _c('div',{key:background.name,class:{background: true, active: background === _vm.value},style:({backgroundImage: 'url(' + (background.custom ? _vm.customPathLookup[background.path] : _vm.assetPath(background.path)) + ')'}),attrs:{\"title\":background.name},on:{\"click\":function($event){return _vm.$emit('input', background)}}},[_vm._v(_vm._s(background.name))])}),_vm._l((_vm.variantBackgrounds),function(background){return _c('div',{key:background.name,class:{background: true, active: background === _vm.value},style:({backgroundImage: 'url(' + _vm.assetPath(background.path) + ')'}),attrs:{\"title\":background.name},on:{\"click\":function($event){return _vm.$emit('input', background)}}},[_vm._v(_vm._s(background.name))])}),_c('div',{key:_vm.colorBackground.name,class:{background: true, active: _vm.colorBackground === _vm.value},style:({background: _vm.colorBackground.color }),attrs:{\"title\":_vm.colorBackground.name},on:{\"click\":function($event){return _vm.$emit('input', _vm.colorBackground)}}},[_vm._v(_vm._s(_vm.colorBackground.name))]),_c('div',{staticClass:\"btn upload-background\",on:{\"click\":function($event){return _vm.$refs.upload.click()}}},[_vm._v(\"\\n\\t\\tUpload\\n\\t\\t\"),_c('input',{ref:\"upload\",attrs:{\"type\":\"file\"},on:{\"change\":_vm.onFileUpload}})])],2):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Prop } from 'vue-property-decorator';\nimport {\n\tisWebPSupported,\n\tbackgrounds,\n\tregisterAsset,\n\tgetAsset,\n} from '../../asset-manager';\nimport { Background, IBackground, color } from '../../models/background';\nimport { VariantBackground } from '../../models/variant-background';\n\n@Component({\n\tcomponents: {},\n})\nexport default class BackgroundsPanel extends Vue {\n\t@Prop({ required: true, type: Boolean }) private readonly vertical!: boolean;\n\t@Prop({ required: true }) private readonly value!: IBackground;\n\n\tprivate isWebPSupported: boolean | null = null;\n\tprivate customPathLookup: { [name: string]: string } = {};\n\tprivate customBGCount = 0;\n\n\tprivate async created() {\n\t\tthis.isWebPSupported = await isWebPSupported();\n\t}\n\n\tprivate get colorBackground(): typeof color {\n\t\treturn color;\n\t}\n\n\tprivate get isVariantBackground(): boolean {\n\t\treturn this.value instanceof VariantBackground;\n\t}\n\n\tprivate get backgrounds(): Background[] {\n\t\t// this is just to force a recompute when a new custom background gets added.\n\t\tconst count = this.customBGCount;\n\t\treturn backgrounds.filter(\n\t\t\tbackground => background instanceof Background\n\t\t) as Background[];\n\t}\n\n\tprivate get variantBackgrounds(): VariantBackground[] {\n\t\t// this is just to force a recompute when a new custom background gets added.\n\t\treturn backgrounds.filter(\n\t\t\tbackground => background instanceof VariantBackground\n\t\t) as VariantBackground[];\n\t}\n\n\tprivate assetPath(background: string) {\n\t\treturn `${process.env.BASE_URL}/assets/${background.toLowerCase()}.lq.${\n\t\t\tthis.isWebPSupported ? 'webp' : 'png'\n\t\t}`.replace(/\\/+/, '/');\n\t}\n\n\tprivate onFileUpload(e: Event) {\n\t\tconst uploadInput = this.$refs.upload as HTMLInputElement;\n\t\tif (!uploadInput.files) return;\n\t\tfor (const file of uploadInput.files) {\n\t\t\t(nr => {\n\t\t\t\tconst name = 'customBg' + nr;\n\t\t\t\tconst url = registerAsset(name, file);\n\t\t\t\tbackgrounds.push(new Background(name, file.name, true));\n\t\t\t\tthis.customPathLookup[name] = url;\n\t\t\t})(++this.customBGCount);\n\t\t}\n\t}\n}\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./backgrounds.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/ts-loader/index.js??ref--13-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./backgrounds.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./backgrounds.vue?vue&type=template&id=54d66c26&scoped=true&\"\nimport script from \"./backgrounds.vue?vue&type=script&lang=ts&\"\nexport * from \"./backgrounds.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./backgrounds.vue?vue&type=style&index=0&id=54d66c26&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"54d66c26\",\n  null\n  \n)\n\nexport default component.exports","import { RenderContext } from '../renderer/rendererContext';\nimport { getAsset } from '../asset-manager';\n\nexport class Textbox {\n\tpublic display: boolean = true;\n\tpublic corrupted: boolean = false;\n\tpublic showControls: boolean = true;\n\tpublic allowSkipping: boolean = true;\n\tpublic showContinueArrow: boolean = true;\n\tpublic talking: string = '';\n\tpublic customName: string = '';\n\tpublic dialog: string = '';\n\n\tpublic async render(rx: RenderContext) {\n\t\tif (!this.display) return;\n\n\t\tif (this.corrupted) {\n\t\t\trx.drawImage({ image: await getAsset('textbox_monika'), x: 190, y: 565 });\n\t\t} else {\n\t\t\trx.drawImage({ image: await getAsset('textbox'), x: 232, y: 565 });\n\t\t}\n\n\t\tconst name = this.talking;\n\t\tif (name) {\n\t\t\trx.drawImage({ image: await getAsset('namebox'), x: 264, y: 565 - 39 });\n\t\t\trx.drawText(\n\t\t\t\tname === 'other' ? this.customName : name,\n\t\t\t\t264 + 84,\n\t\t\t\t565 - 10,\n\t\t\t\t'center',\n\t\t\t\t3,\n\t\t\t\t'white',\n\t\t\t\t'#b59',\n\t\t\t\t'24px riffic'\n\t\t\t);\n\t\t}\n\n\t\tthis.renderText(rx);\n\n\t\tif (this.showControls) {\n\t\t\trx.drawText(\n\t\t\t\t'Skip',\n\t\t\t\t566,\n\t\t\t\t700,\n\t\t\t\t'left',\n\t\t\t\t1,\n\t\t\t\tthis.allowSkipping ? '#522' : '#a66',\n\t\t\t\tnull,\n\t\t\t\t'13px aller'\n\t\t\t);\n\t\t\trx.drawText('History', 512, 700, 'left', 1, '#522', null, '13px aller');\n\t\t\trx.drawText(\n\t\t\t\t'Auto   Save   Load   Settings',\n\t\t\t\t600,\n\t\t\t\t700,\n\t\t\t\t'left',\n\t\t\t\t1,\n\t\t\t\t'#522',\n\t\t\t\tnull,\n\t\t\t\t'13px aller'\n\t\t\t);\n\t\t}\n\n\t\tif (this.showContinueArrow) {\n\t\t\trx.drawImage({ image: await getAsset('next'), x: 1020, y: 685 });\n\t\t}\n\t}\n\n\tprivate renderText(rx: RenderContext): void {\n\t\tconst text: DialogLetter[][] = [];\n\n\t\tlet b = false;\n\n\t\tfor (const line of this.dialog.split('\\n')) {\n\t\t\tlet cl;\n\t\t\ttext.push((cl = []));\n\t\t\tfor (const l of line) {\n\t\t\t\tif (l === '[') {\n\t\t\t\t\tb = true;\n\t\t\t\t} else if (l === ']') {\n\t\t\t\t\tb = false;\n\t\t\t\t} else {\n\t\t\t\t\tcl.push({ l, b });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet y = 620;\n\t\tfor (const line of text) {\n\t\t\tlet f = false;\n\t\t\tif (line.length) {\n\t\t\t\tlet x = 270;\n\t\t\t\tlet i = 0;\n\t\t\t\twhile (i < line.length) {\n\t\t\t\t\tlet ct = '';\n\t\t\t\t\tconst cb = line[i].b;\n\n\t\t\t\t\tf = f || cb;\n\n\t\t\t\t\twhile (i < line.length && line[i].b === cb) {\n\t\t\t\t\t\tct += line[i].l;\n\t\t\t\t\t\tif (cb) {\n\t\t\t\t\t\t\tct += ' ';\n\t\t\t\t\t\t}\n\t\t\t\t\t\ti++;\n\t\t\t\t\t}\n\n\t\t\t\t\trx.drawText(\n\t\t\t\t\t\tct,\n\t\t\t\t\t\tx,\n\t\t\t\t\t\ty,\n\t\t\t\t\t\t'left',\n\t\t\t\t\t\tcb ? 8 : 2,\n\t\t\t\t\t\t'#fff',\n\t\t\t\t\t\tcb ? '#000' : '#523140',\n\t\t\t\t\t\t'24px aller'\n\t\t\t\t\t);\n\t\t\t\t\tx += rx.measureText(ct).width;\n\t\t\t\t}\n\t\t\t}\n\t\t\ty += 26;\n\t\t}\n\t}\n}\n\ninterface DialogLetter {\n\tl: string;\n\tb: boolean;\n}\n","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Vue, Watch } from 'vue-property-decorator';\nimport DokiButton from './components/DokiButton.vue';\nimport GeneralPanel from './components/panels/general.vue';\nimport AddPanel from './components/panels/add.vue';\nimport CharacterPanel, { MoveObject } from './components/panels/character.vue';\nimport SpritePanel from './components/panels/sprite.vue';\nimport CreditsPanel from './components/panels/credits.vue';\nimport BackgroundsPanel from './components/panels/backgrounds.vue';\nimport { characterPositions } from './models/constants';\nimport { Textbox } from './models/textbox';\nimport { Character, CharacterIds } from './models/character';\nimport { backgrounds, getAsset, registerAsset } from './asset-manager';\nimport { Renderer } from './renderer/renderer';\nimport { RenderContext } from './renderer/rendererContext';\nimport { Background, IBackground } from './models/background';\nimport { IRenderable } from './models/renderable';\nimport { Sprite } from './models/sprite';\nimport { IDragable } from './models/dragable';\nimport { VariantBackground } from './models/variant-background';\n\n@Component({\n\tcomponents: {\n\t\tDokiButton,\n\t\tGeneralPanel,\n\t\tAddPanel,\n\t\tBackgroundsPanel,\n\t\tCreditsPanel,\n\t\tCharacterPanel,\n\t\tSpritePanel,\n\t},\n})\nexport default class App extends Vue {\n\tpublic canvasWidth: number = 0;\n\tpublic canvasHeight: number = 0;\n\tpublic currentBackground: IBackground | null = null;\n\n\tprivate sdCtx: CanvasRenderingContext2D | undefined;\n\tprivate characters: IRenderable[] = [];\n\tprivate selectedCharacter: Character | null = null;\n\tprivate selectedSprite: Sprite | null = null;\n\tprivate characterSelectorOpen: boolean = false;\n\tprivate backgroundSelectorOpen: boolean = false;\n\tprivate editDialog: boolean = false;\n\n\tprivate vertical: boolean = false;\n\tprivate textbox = new Textbox();\n\n\tprivate renderer: Renderer = new Renderer();\n\tprivate showUI: boolean = true;\n\tprivate loaded: boolean = false;\n\tprivate uiSize: number = 192;\n\tprivate lqRendering: boolean = true;\n\n\tprivate panel: string = '';\n\n\tprivate queuedRender: number | null = null;\n\n\tprivate dropSpriteCount = 0;\n\tprivate dropPreventClick = false;\n\n\t@Watch('selectedCharacter')\n\tpublic onSelectedCharacterChange(\n\t\tnewCharacter: Character,\n\t\toldCharacter: Character\n\t) {\n\t\tif (oldCharacter) oldCharacter.unselect();\n\t\tif (newCharacter) {\n\t\t\tnewCharacter.select();\n\t\t\tthis.panel = 'character';\n\t\t}\n\t\tthis.invalidateRender();\n\t}\n\n\t@Watch('selectedSprite')\n\tpublic onSelectedSpriteChange(newSprite: Sprite, oldSprite: Sprite) {\n\t\tif (oldSprite) oldSprite.unselect();\n\t\tif (newSprite) {\n\t\t\tnewSprite.select();\n\t\t\tthis.panel = 'sprite';\n\t\t}\n\t\tthis.invalidateRender();\n\t}\n\n\t@Watch('panel')\n\tpublic onPanel(newPanel: string) {\n\t\tif (newPanel !== 'character') {\n\t\t\tthis.selectedCharacter = null;\n\t\t}\n\t}\n\n\t@Watch('textbox', { deep: true })\n\t@Watch('lqRendering')\n\t@Watch('currentBackground')\n\tpublic invalidateRender() {\n\t\tif (this.queuedRender) return;\n\t\tthis.queuedRender = requestAnimationFrame(() => this.render_());\n\t}\n\n\tpublic async render_(): Promise<void> {\n\t\tif (this.queuedRender) {\n\t\t\tcancelAnimationFrame(this.queuedRender);\n\t\t\tthis.queuedRender = null;\n\t\t}\n\n\t\tconst completed = await this.renderer.render(\n\t\t\tthis.renderCallback,\n\t\t\t!this.lqRendering\n\t\t);\n\t\tif (completed) {\n\t\t\tthis.display();\n\t\t}\n\t}\n\n\tprivate async renderCallback(rx: RenderContext): Promise<void> {\n\t\tif (!this.loaded) {\n\t\t\trx.drawText(\n\t\t\t\t'Starting...',\n\t\t\t\tthis.renderer.width / 2,\n\t\t\t\tthis.renderer.height / 2,\n\t\t\t\t'center',\n\t\t\t\t5,\n\t\t\t\t'white',\n\t\t\t\t'#b59',\n\t\t\t\t'32px riffic'\n\t\t\t);\n\t\t} else {\n\t\t\tif (this.currentBackground) {\n\t\t\t\tawait this.currentBackground.render(rx);\n\t\t\t}\n\n\t\t\tfor (const character of this.characters) {\n\t\t\t\tif (!character.infront) {\n\t\t\t\t\tawait character.render(rx);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tawait this.textbox.render(rx);\n\n\t\t\tfor (const character of this.characters) {\n\t\t\t\tif (character.infront) {\n\t\t\t\t\tawait character.render(rx);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate created(): void {\n\t\t(window as any).cats = this;\n\t\twindow.removeEventListener('keydown', this.onKeydown);\n\t\twindow.addEventListener('keydown', this.onKeydown);\n\t}\n\n\tprivate destroyed(): void {\n\t\twindow.removeEventListener('keydown', this.onKeydown);\n\t}\n\n\tprivate mounted(): void {\n\t\tconst sd = this.$refs.sd as HTMLCanvasElement;\n\t\tthis.sdCtx = sd.getContext('2d') || undefined;\n\n\t\tthis.updateArea();\n\t\twindow.addEventListener('resize', this.updateArea);\n\t\twindow.addEventListener('keypress', e => {\n\t\t\tif (e.keyCode === 27) {\n\t\t\t\tthis.selectedCharacter = null;\n\t\t\t\tthis.panel = '';\n\t\t\t}\n\t\t});\n\n\t\tthis.currentBackground = backgrounds[0];\n\t\tthis.invalidateRender();\n\t\tdebugger;\n\t\tPromise.all([\n\t\t\tgetAsset((this.currentBackground as VariantBackground).path, false),\n\t\t\tgetAsset('textbox'),\n\t\t\tgetAsset('namebox'),\n\t\t\tgetAsset('next'),\n\t\t])\n\t\t\t.then(() => {\n\t\t\t\tthis.loaded = true;\n\t\t\t\tthis.invalidateRender();\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\talert('Error while loading. Sorry :/');\n\t\t\t});\n\t}\n\n\tprivate optimum(sw: number, sh: number): [number, number] {\n\t\tlet rh = sw / (16 / 9);\n\t\tlet rw = sh * (16 / 9);\n\n\t\tif (rh > sh) {\n\t\t\trh = sh;\n\t\t} else {\n\t\t\trw = sw;\n\t\t}\n\n\t\treturn [rw, rh];\n\t}\n\n\tprivate optimizeWithMenu(sw: number, sh: number): [number, number, boolean] {\n\t\tconst opth = this.optimum(sw, sh - this.uiSize);\n\t\tconst optv = this.optimum(sw - this.uiSize, sh);\n\n\t\tif (opth[0] * opth[1] > optv[0] * optv[1]) {\n\t\t\treturn [opth[0], opth[1], false];\n\t\t} else {\n\t\t\treturn [optv[0], optv[1], true];\n\t\t}\n\t}\n\n\tprivate updateArea(): void {\n\t\tconst [cw, ch, v] = this.optimizeWithMenu(\n\t\t\twindow.innerWidth,\n\t\t\twindow.innerHeight\n\t\t);\n\n\t\tthis.canvasWidth = cw;\n\t\tthis.canvasHeight = ch;\n\t\tthis.vertical = v;\n\t\tthis.$nextTick(() => {\n\t\t\tthis.display();\n\t\t});\n\t}\n\n\tprivate display(): void {\n\t\tif (!this.sdCtx) return;\n\t\tthis.renderer.paintOnto(this.sdCtx, 0, 0, 1280, 720);\n\t}\n\n\tprivate async download() {\n\t\tthis.selectedCharacter = null;\n\t\tthis.renderer.download(this.renderCallback, 'panel.png');\n\t}\n\n\tprivate onCharacterCreate(character: CharacterIds): void {\n\t\tthis.characterSelectorOpen = false;\n\t\tthis.characters.push(new Character(character, this.invalidateRender));\n\t\tthis.invalidateRender();\n\t}\n\n\tprivate toRendererCoordinate(x: number, y: number): [number, number] {\n\t\tconst sd = this.$refs.sd as HTMLCanvasElement;\n\t\tconst rx = x - sd.offsetLeft;\n\t\tconst ry = y - sd.offsetTop;\n\t\tconst sx = (rx / sd.offsetWidth) * sd.width;\n\t\tconst sy = (ry / sd.offsetWidth) * sd.width;\n\t\treturn [sx, sy];\n\t}\n\n\tprivate onUiClick(e: MouseEvent): void {\n\t\tif (this.dropPreventClick) {\n\t\t\tthis.dropPreventClick = false;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.panel = '';\n\n\t\tconst [sx, sy] = this.toRendererCoordinate(e.clientX, e.clientY);\n\n\t\tconst characters = this.objectsAt(sx, sy);\n\n\t\tconst currentCharacterIdx = characters.indexOf(\n\t\t\t(this.selectedCharacter || this.selectedSprite)!\n\t\t);\n\t\tlet selectedObject: IRenderable | null;\n\n\t\tif (currentCharacterIdx === 0) {\n\t\t\tselectedObject = null;\n\t\t} else if (currentCharacterIdx !== -1) {\n\t\t\t// Select the next lower character\n\t\t\tselectedObject = characters[currentCharacterIdx - 1];\n\t\t} else {\n\t\t\tselectedObject = characters[characters.length - 1] || null;\n\t\t}\n\n\t\tif (!selectedObject) {\n\t\t\tthis.selectedCharacter = null;\n\t\t\tthis.selectedSprite = null;\n\t\t} else if (selectedObject instanceof Sprite) {\n\t\t\tthis.selectedCharacter = null;\n\t\t\tthis.selectedSprite = selectedObject;\n\t\t} else if (selectedObject instanceof Character) {\n\t\t\tthis.selectedSprite = null;\n\t\t\tthis.selectedCharacter = selectedObject;\n\t\t} else {\n\t\t\tthrow new Error('Unknown selected object');\n\t\t}\n\t}\n\n\tprivate objectsAt(x: number, y: number): IRenderable[] {\n\t\treturn this.characters.filter(character => character.hitTest(x, y));\n\t}\n\n\tprivate onObjectLayerShift(event: MoveObject): void {\n\t\tconst idx = this.characters.indexOf(event.object);\n\t\tlet targetIdx = idx;\n\t\tthis.characters.splice(idx, 1);\n\t\tswitch (event.move) {\n\t\t\tcase 'Forward':\n\t\t\t\ttargetIdx += 1;\n\t\t\t\tbreak;\n\t\t\tcase 'Backward':\n\t\t\t\ttargetIdx -= 1;\n\t\t\t\tbreak;\n\t\t\tcase 'Back':\n\t\t\t\ttargetIdx = 0;\n\t\t\t\tbreak;\n\t\t\tcase 'Front':\n\t\t\t\ttargetIdx = this.characters.length;\n\t\t\t\tbreak;\n\t\t\tcase 'Delete':\n\t\t\t\tthis.panel = '';\n\t\t\t\tthis.invalidateRender();\n\t\t\t\treturn;\n\t\t}\n\t\tif (targetIdx <= 0) {\n\t\t\tthis.characters.unshift(event.object);\n\t\t} else if (targetIdx >= this.characters.length) {\n\t\t\tthis.characters.push(event.object);\n\t\t} else {\n\t\t\tthis.characters.splice(targetIdx, 0, event.object);\n\t\t}\n\t\tthis.invalidateRender();\n\t}\n\n\tprivate onAssetCreate(assetName: string) {\n\t\tthis.characters.push(new Sprite(assetName, this.invalidateRender));\n\t}\n\n\tprivate draggedObject: IDragable | null = null;\n\tprivate dragXOffset: number = 0;\n\tprivate dragYOffset: number = 0;\n\tprivate dragXOriginal: number = 0;\n\tprivate dragYOriginal: number = 0;\n\n\tprivate onDragStart(e: DragEvent) {\n\t\te.preventDefault();\n\t\tconst selected = this.selectedCharacter || this.selectedSprite;\n\t\tif (!selected) return;\n\t\tthis.draggedObject = selected;\n\t\tconst [x, y] = this.toRendererCoordinate(e.clientX, e.clientY);\n\t\tthis.dragXOffset = x - selected.x;\n\t\tthis.dragYOffset = y - selected.y;\n\t\tthis.dragXOriginal = selected.x;\n\t\tthis.dragYOriginal = selected.y;\n\t}\n\n\tprivate onTouchStart(e: TouchEvent) {\n\t\tconst selected = this.selectedCharacter || this.selectedSprite;\n\t\tif (!selected) return;\n\t\tthis.draggedObject = selected;\n\t\tconst [x, y] = this.toRendererCoordinate(\n\t\t\te.touches[0].clientX,\n\t\t\te.touches[0].clientY\n\t\t);\n\t\tthis.dragXOffset = x - selected.x;\n\t\tthis.dragYOffset = y - selected.y;\n\t\tthis.dragXOriginal = selected.x;\n\t\tthis.dragYOriginal = selected.y;\n\t}\n\n\tprivate onDragOver(e: DragEvent) {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t\te.dataTransfer!.dropEffect = 'copy';\n\t}\n\n\tprivate onSpriteDragMove(e: MouseEvent | TouchEvent) {\n\t\tif (this.draggedObject) {\n\t\t\te.preventDefault();\n\n\t\t\tlet [x, y] =\n\t\t\t\te instanceof MouseEvent\n\t\t\t\t\t? this.toRendererCoordinate(e.clientX, e.clientY)\n\t\t\t\t\t: this.toRendererCoordinate(\n\t\t\t\t\t\t\te.touches[0].clientX,\n\t\t\t\t\t\t\te.touches[0].clientY\n\t\t\t\t\t  );\n\t\t\tx -= this.dragXOffset;\n\t\t\ty -= this.dragYOffset;\n\n\t\t\tconst deltaX = Math.abs(x - this.dragXOriginal);\n\t\t\tconst deltaY = Math.abs(y - this.dragYOriginal);\n\n\t\t\tif (deltaX + deltaY > 1) this.dropPreventClick = true;\n\n\t\t\tif (e.shiftKey) {\n\t\t\t\tconst deltaX = Math.abs(x - this.dragXOriginal);\n\t\t\t\tconst deltaY = Math.abs(y - this.dragYOriginal);\n\n\t\t\t\tif (deltaX > deltaY) {\n\t\t\t\t\ty = this.dragYOriginal;\n\t\t\t\t} else {\n\t\t\t\t\tx = this.dragXOriginal;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.draggedObject.x = x;\n\t\t\tthis.draggedObject.y = y;\n\t\t\tthis.invalidateRender();\n\t\t}\n\t}\n\n\tprivate onDrop(e: DragEvent) {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\n\t\tif (!e.dataTransfer) return;\n\n\t\tfor (const item of e.dataTransfer.items) {\n\t\t\tif (item.kind === 'file' && item.type.match(/image.*/)) {\n\t\t\t\tconst name = 'dropCustomAsset' + ++this.dropSpriteCount;\n\t\t\t\tconst url = registerAsset(name, item.getAsFile()!);\n\t\t\t\tthis.onAssetCreate(name);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate onSpriteDrop(e: MouseEvent | TouchEvent) {\n\t\tif (this.draggedObject) {\n\t\t\tif ('TouchEvent' in window && e instanceof TouchEvent) {\n\t\t\t\tthis.dropPreventClick = false;\n\t\t\t}\n\t\t\tthis.draggedObject = null;\n\t\t}\n\t}\n\n\tprivate onMouseEnter(e: MouseEvent) {\n\t\tif (e.buttons !== 1) {\n\t\t\tthis.draggedObject = null;\n\t\t}\n\t}\n\n\tprivate onKeydown(e: KeyboardEvent) {\n\t\tconst target = this.selectedCharacter || this.selectedSprite;\n\t\tif (target && e.key === 'Delete') {\n\t\t\tthis.onObjectLayerShift({\n\t\t\t\tobject: target,\n\t\t\t\tmove: 'Delete',\n\t\t\t});\n\t\t} else if (target && e.key === 'ArrowLeft') {\n\t\t\tif (target instanceof Character && !target.allowFreeMove) {\n\t\t\t\ttarget.pos -= 1;\n\t\t\t} else {\n\t\t\t\ttarget.x -= e.shiftKey ? 1 : 20;\n\t\t\t\ttarget.x |= 0;\n\t\t\t}\n\t\t\tthis.invalidateRender();\n\t\t} else if (target && e.key === 'ArrowRight') {\n\t\t\tif (target instanceof Character && !target.allowFreeMove) {\n\t\t\t\ttarget.pos += 1;\n\t\t\t} else {\n\t\t\t\ttarget.x += e.shiftKey ? 1 : 20;\n\t\t\t\ttarget.x |= 0;\n\t\t\t}\n\t\t\tthis.invalidateRender();\n\t\t} else if (target && e.key === 'ArrowUp') {\n\t\t\ttarget.y -= e.shiftKey ? 1 : 20;\n\t\t\ttarget.y |= 0;\n\t\t\tthis.invalidateRender();\n\t\t} else if (target && e.key === 'ArrowDown') {\n\t\t\ttarget.y += e.shiftKey ? 1 : 20;\n\t\t\ttarget.y |= 0;\n\t\t\tthis.invalidateRender();\n\t\t} else {\n\t\t\tconsole.log(e);\n\t\t}\n\t}\n}\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--13-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/ts-loader/index.js??ref--13-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=cb80a60a&\"\nimport script from \"./App.vue?vue&type=script&lang=ts&\"\nexport * from \"./App.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\r\nimport App from './App.vue';\r\n// import './registerServiceWorker';\r\n\r\nVue.config.productionTip = false;\r\n\r\nnew Vue({\r\n\trender: h => h(App),\r\n}).$mount('#app');\r\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Toggle.vue?vue&type=style&index=0&id=7e803566&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Toggle.vue?vue&type=style&index=0&id=7e803566&lang=scss&scoped=true&\""],"sourceRoot":""}